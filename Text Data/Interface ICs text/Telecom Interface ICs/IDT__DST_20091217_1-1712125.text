            16-Channel
     Short Haul E1
Line Interface Unit
      IDT82P20516
                                       Version -
                               December 17, 2009
                6024 Silver Creek Valley Road, San Jose, California 95138
  Telephone: 1-800-345-7015 or 408-284-8200• TWX: 910-338-2070 • FAX: 408-284-2775
                                    Printed in U.S.A.
                        © 2009 Integrated Device Technology, Inc.


                                                                                               DISCLAIMER
Integrated Device Technology, Inc. reserves the right to make changes to its products or specifications at any time, without notice, in order to improve design or performance and to supply the best pos-
sible product. IDT does not assume any responsibility for use of any circuitry described other than the circuitry embodied in an IDT product. The Company makes no representations that circuitry
described herein is free from patent infringement or other rights of third parties which may result from its use. No license is granted by implication or otherwise under any patent, patent rights or other
rights, of Integrated Device Technology, Inc.
                                                                                          LIFE SUPPORT POLICY
Integrated Device Technology's products are not authorized for use as critical components in life support devices or systems unless a specific written agreement pertaining to such intended use is exe-
cuted between the manufacturer and an officer of IDT.
1. Life support devices or systems are devices or systems which (a) are intended for surgical implant into the body or (b) support or sustain life and whose failure to perform, when properly used in
accordance with instructions for use provided in the labeling, can be reasonably expected to result in a significant injury to the user.
2. A critical component is any components of a life support device or system whose failure to perform can be reasonably expected to cause the failure of the life support device or system, or to affect its
safety or effectiveness.


                                                                                                                    Table of Contents
TABLE OF CONTENTS ........................................................................................................................................................... 3
LIST OF TABLES .................................................................................................................................................................... 6
LIST OF FIGURES ................................................................................................................................................................... 7
FEATURES ............................................................................................................................................................................... 8
APPLICATIONS........................................................................................................................................................................ 9
DESCRIPTION.......................................................................................................................................................................... 9
BLOCK DIAGRAM ................................................................................................................................................................. 10
1 PIN ASSIGNMENT .......................................................................................................................................................... 11
2 PIN DESCRIPTION ......................................................................................................................................................... 12
3 FUNCTIONAL DESCRIPTION ........................................................................................................................................ 19
   3.1 E1 MODE SELECTION ............................................................................................................................................ 19
   3.2 RECEIVE PATH ....................................................................................................................................................... 19
         3.2.1 Rx Termination ............................................................................................................................................ 19
                3.2.1.1 Receive Differential Mode ........................................................................................................... 19
         3.2.2 Equalizer ..................................................................................................................................................... 20
                3.2.2.1 Line Monitor ................................................................................................................................ 21
                3.2.2.2 Receive Sensitivity ...................................................................................................................... 21
         3.2.3 Slicer ........................................................................................................................................................... 22
         3.2.4 Rx Clock & Data Recovery ......................................................................................................................... 22
         3.2.5 Decoder ...................................................................................................................................................... 22
         3.2.6 Receive System Interface ........................................................................................................................... 22
         3.2.7 Receiver Power Down ................................................................................................................................ 23
   3.3 TRANSMIT PATH .................................................................................................................................................... 23
         3.3.1 Transmit System Interface .......................................................................................................................... 23
         3.3.2 Tx Clock Recovery ...................................................................................................................................... 24
         3.3.3 Encoder ....................................................................................................................................................... 24
         3.3.4 Waveform Shaper ....................................................................................................................................... 24
                3.3.4.1 Preset Waveform Template ........................................................................................................ 24
                3.3.4.2 User-Programmable Arbitrary Waveform .................................................................................... 25
         3.3.5 Line Driver ................................................................................................................................................... 27
                3.3.5.1 Transmit Over Current Protection ............................................................................................... 27
         3.3.6 Tx Termination ............................................................................................................................................ 27
                3.3.6.1 Transmit Differential Mode .......................................................................................................... 27
         3.3.7 Transmitter Power Down ............................................................................................................................ 29
         3.3.8 Output High-Z on TTIP and TRING ............................................................................................................ 29
   3.4 JITTER ATTENUATOR (RJA & TJA) ....................................................................................................................... 30
   3.5 DIAGNOSTIC FACILITIES ....................................................................................................................................... 31
         3.5.1 Bipolar Violation (BPV) / Code Violation (CV) Detection and BPV Insertion .............................................. 31
 Table of Contents                                                                      3                                                                   December 17, 2009


 IDT82P20516                                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                3.5.1.1 Bipolar Violation (BPV) / Code Violation (CV) Detection .............................................................                                      31
                3.5.1.2 Bipolar Violation (BPV) Insertion .................................................................................................                        31
         3.5.2 Excessive Zeroes (EXZ) Detection .............................................................................................................                      31
         3.5.3 Loss of Signal (LOS) Detection ...................................................................................................................                  32
                3.5.3.1 Line LOS (LLOS) .........................................................................................................................                  32
                3.5.3.2 System LOS (SLOS) ...................................................................................................................                      33
                3.5.3.3 Transmit LOS (TLOS) .................................................................................................................                      34
         3.5.4 Alarm Indication Signal (AIS) Detection and Generation ............................................................................                                 35
                3.5.4.1 Alarm Indication Signal (AIS) Detection ......................................................................................                             35
                3.5.4.2 (Alarm Indication Signal) AIS Generation ...................................................................................                               35
         3.5.5 PRBS, QRSS, ARB and IB Pattern Generation and Detection ...................................................................                                         36
                3.5.5.1 Pattern Generation ......................................................................................................................                  36
                3.5.5.2 Pattern Detection ........................................................................................................................                 37
         3.5.6 Error Counter ..............................................................................................................................................        38
                3.5.6.1 Automatic Error Counter Updating ..............................................................................................                            38
                3.5.6.2 Manual Error Counter Updating ..................................................................................................                           39
         3.5.7 Loopback ....................................................................................................................................................       40
                3.5.7.1 Analog Loopback ........................................................................................................................                   40
                3.5.7.2 Remote Loopback .......................................................................................................................                    41
                3.5.7.3 Digital Loopback ..........................................................................................................................                42
         3.5.8 Channel 0 Monitoring ..................................................................................................................................             43
                3.5.8.1 G.772 Monitoring .........................................................................................................................                 43
                3.5.8.2 Jitter Measurement (JM) .............................................................................................................                      44
   3.6 CLOCK INPUTS AND OUTPUTS ............................................................................................................................                       45
         3.6.1 Free Running Clock Outputs on CLKE1 .....................................................................................................                           45
         3.6.2 MCLK, Master Clock Input ..........................................................................................................................                 46
         3.6.3 XCLK, Internal Reference Clock Input ........................................................................................................                       46
   3.7 INTERRUPT SUMMARY .........................................................................................................................................                 47
4 MISCELLANEOUS ..........................................................................................................................................................         49
   4.1 RESET ..................................................................................................................................................................... 49
         4.1.1 Power-On Reset .........................................................................................................................................            50
         4.1.2 Hardware Reset ..........................................................................................................................................           50
         4.1.3 Global Software Reset ................................................................................................................................              50
         4.1.4 Per-Channel Software Reset ......................................................................................................................                   50
   4.2 MICROPROCESSOR INTERFACE .........................................................................................................................                          50
   4.3 POWER UP ..............................................................................................................................................................     51
   4.4 HITLESS PROTECTION SWITCHING (HPS) SUMMARY ......................................................................................                                           51
5 PROGRAMMING INFORMATION ...................................................................................................................................                      54
   5.1 REGISTER MAP ......................................................................................................................................................         54
         5.1.1 Global Register ...........................................................................................................................................         54
         5.1.2 Per-Channel Register .................................................................................................................................              55
   5.2 REGISTER DESCRIPTION .....................................................................................................................................                  58
         5.2.1 Global Register ...........................................................................................................................................         58
         5.2.2 Per-Channel Register .................................................................................................................................              62
 Table of Contents                                                                   4                                                                   December 17, 2009


 IDT82P20516                                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
6 JTAG ............................................................................................................................................................................... 92
   6.1 JTAG INSTRUCTION REGISTER (IR) .................................................................................................................... 92
   6.2 JTAG DATA REGISTER .......................................................................................................................................... 92
         6.2.1 Device Identification Register (IDR) ............................................................................................................ 92
         6.2.2 Bypass Register (BYP) ............................................................................................................................... 92
         6.2.3 Boundary Scan Register (BSR) .................................................................................................................. 92
   6.3 TEST ACCESS PORT (TAP) CONTROLLER ......................................................................................................... 92
7 THERMAL MANAGEMENT ............................................................................................................................................ 94
   7.1 JUNCTION TEMPERATURE ................................................................................................................................... 94
   7.2 EXAMPLE OF JUNCTION TEMPERATURE CALCULATION ................................................................................. 94
   7.3 HEATSINK EVALUATION ....................................................................................................................................... 94
8 PHYSICAL AND ELECTRICAL SPECIFICATIONS ....................................................................................................... 95
   8.1 ABSOLUTE MAXIMUM RATINGS ........................................................................................................................... 95
   8.2 RECOMMENDED OPERATING CONDITIONS ...................................................................................................... 96
   8.3 DEVICE POWER CONSUMPTION AND DISSIPATION (TYPICAL) 1 ................................................................... 97
   8.4 DEVICE POWER CONSUMPTION AND DISSIPATION (MAXIMUM) 1 ................................................................. 98
   8.5 D.C. CHARACTERISTICS ....................................................................................................................................... 99
   8.6 E1 RECEIVER ELECTRICAL CHARACTERISTICS ............................................................................................. 100
   8.7 E1 TRANSMITTER ELECTRICAL CHARACTERISTICS ...................................................................................... 102
   8.8 TRANSMITTER AND RECEIVER TIMING CHARACTERISTICS ......................................................................... 103
   8.9 CLKE1 TIMING CHARACTERISTICS ................................................................................................................... 105
   8.10 JITTER ATTENUATION CHARACTERISTICS ...................................................................................................... 106
   8.11 MICROPROCESSOR INTERFACE TIMING ......................................................................................................... 108
         8.11.1 Serial Microprocessor Interface ................................................................................................................ 108
   8.12 JTAG TIMING CHARACTERISTICS ..................................................................................................................... 110
GLOSSARY ......................................................................................................................................................................... 111
INDEX .................................................................................................................................................................................. 113
ORDERING INFORMATION ................................................................................................................................................ 115
 Table of Contents                                                                          5                                                                   December 17, 2009


                                                                                                                                                               List of Tables
Table-1   Operation Mode Selection ...........................................................................................................................................................................             19
Table-2   Impedance Matching Value in Receive Differential Mode ...........................................................................................................................                                20
Table-3   Multiplex Pin Used in Receive System Interface .........................................................................................................................................                         22
Table-4   Multiplex Pin Used in Transmit System Interface ........................................................................................................................................                         24
Table-5   PULS[3:0] Setting in E1 Mode .....................................................................................................................................................................               25
Table-6   Transmit Waveform Value for E1 75 ohm ....................................................................................................................................................                       26
Table-7   Transmit Waveform Value for E1 120 ohm ..................................................................................................................................................                        26
Table-8   Impedance Matching Value in Transmit Differential Mode ..........................................................................................................................                                27
Table-9   EXZ Definition ..............................................................................................................................................................................................    31
Table-10  LLOS Criteria ...............................................................................................................................................................................................    32
Table-11  SLOS Criteria ...............................................................................................................................................................................................    33
Table-12  TLOS Detection Between Two Channels ....................................................................................................................................................                         34
Table-13  AIS Criteria ................................................................................................................................................................................................... 35
Table-14  Clock Output on CLKE1 ...............................................................................................................................................................................            45
Table-15  Interrupt Summary .......................................................................................................................................................................................        47
Table-16  After Reset Effect Summary ........................................................................................................................................................................              49
 List of Tables                                                                                          6                                                                                December 17, 2009


                                                                                                                                                             List of Figures
Figure-1  Functional Block Diagram ............................................................................................................................................................................ 10
Figure-2  484-Pin Fine Pitch BGA (Top View) ............................................................................................................................................................. 11
Figure-3  Switch between Impedance Matching Modes .............................................................................................................................................. 19
Figure-4  Receive Differential Line Interface with Twisted Pair Cable (with transformer) ........................................................................................... 20
Figure-5  Receive Differential Line Interface with Coaxial Cable (with transformer) ................................................................................................... 20
Figure-6  Receive Differential Line Interface with Twisted Pair Cable (transformer-less, non standard compliant) .................................................... 20
Figure-7  Receive Path Monitoring .............................................................................................................................................................................. 21
Figure-8  Transmit Path Monitoring ............................................................................................................................................................................. 21
Figure-9  E1 Waveform Template ............................................................................................................................................................................... 24
Figure-10  E1 Waveform Template Measurement Circuit ............................................................................................................................................ 24
Figure-11  Transmit Differential Line Interface with Twisted Pair Cable (with Transformer) ........................................................................................ 28
Figure-12  Transmit Differential Line Interface with Coaxial Cable (with transformer) ................................................................................................. 28
Figure-13  Transmit Differential Line Interface with Twisted Pair Cable (transformer-less, non standard compliant) .................................................. 28
Figure-14  Jitter Attenuator ........................................................................................................................................................................................... 30
Figure-15  LLOS Indication on Pins .............................................................................................................................................................................. 32
Figure-16  TLOS Detection Between Two Channels .................................................................................................................................................... 34
Figure-17  Pattern Generation (1) ................................................................................................................................................................................. 36
Figure-18  Pattern Generation (2) ................................................................................................................................................................................. 36
Figure-19  PRBS / ARB Detection ................................................................................................................................................................................ 37
Figure-20  IB Detection ................................................................................................................................................................................................. 38
Figure-21  Automatic Error Counter Updating .............................................................................................................................................................. 39
Figure-22  Manual Error Counter Updating .................................................................................................................................................................. 39
Figure-23  Priority Of Diagnostic Facilities During Analog Loopback ........................................................................................................................... 40
Figure-24  Priority Of Diagnostic Facilities During Manual Remote Loopback ............................................................................................................. 41
Figure-25  Priority Of Diagnostic Facilities During Digital Loopback ............................................................................................................................ 42
Figure-26  G.772 Monitoring ......................................................................................................................................................................................... 43
Figure-27  Automatic JM Updating ............................................................................................................................................................................... 44
Figure-28  Manual JM Updating ................................................................................................................................................................................... 44
Figure-29  Interrupt Service Process ............................................................................................................................................................................ 48
Figure-30  Reset ........................................................................................................................................................................................................... 49
Figure-31  1+1 HPS Scheme, Differential Interface (Shared Common Transformer) .................................................................................................. 51
Figure-32  1:1 HPS Scheme, Differential Interface (Individual Transformer) ............................................................................................................... 52
Figure-33  1+1 HPS Scheme, E1 75 ohm Single-Ended Interface (Shared Common Transformer) ........................................................................... 53
Figure-34  JTAG Architecture ....................................................................................................................................................................................... 92
Figure-35  JTAG State Diagram ................................................................................................................................................................................... 93
Figure-36  Transmit Clock Timing Diagram ................................................................................................................................................................ 104
Figure-37  Receive Clock Timing Diagram ................................................................................................................................................................. 104
Figure-38  CLKE1 Clock Timing Diagram ................................................................................................................................................................... 105
Figure-39  E1 Jitter Tolerance Performance ............................................................................................................................................................... 106
Figure-40  E1 Jitter Transfer Performance ................................................................................................................................................................. 107
Figure-41  Read Operation in Serial Microprocessor Interface .................................................................................................................................. 108
Figure-42  Write Operation in Serial Microprocessor Interface ................................................................................................................................... 108
Figure-43  Timing Diagram ......................................................................................................................................................................................... 109
Figure-44  JTAG Timing ............................................................................................................................................................................................. 110
 List of Figures                                                                                           7                                                                                December 17, 2009


                                                                         16-Channel
                                                                         Short Haul E1 Line Inter-
                                                                                                                                           IDT82P20516
                                                                         face Unit
FEATURES
    Integrates 16 channels E1 short haul line interface units for 120                   • Various pattern, defect and alarm reporting options
     Ω E1 twisted pair cable and 75 Ω E1 coaxial cable applications                          – Serial hardware LLOS reporting (LLOS, LLOS0) for all 16 channels
  Per-channel configurable Line Interface options                                           – Register access to individual registers or 16-bit error counters
      • Fully integrated and software selectable receive and transmit                    • Supports Analog Loopback, Digital Loopback and Remote
          termination                                                                       Loopback
           – Option 1: Fully Internal Impedance Matching with integrated receive         • Supports line monitor
              termination resistor                                                      Hitless Protection Switching (HPS) without external Relays
           – Option 2: Partially Internal Impedance Matching with common external        • Supports 1+1 and 1:1 hitless protection switching
              resistor for improved device power dissipation                             • Asynchronous hardware control (OE, RIM) for fast global high
           – Option 3: External impedance Matching termination                              impedance of receiver and transmitter (hot switching between
      • Supports global configuration and per-channel configuration to                      working and backup board)
          E1 mode                                                                        • High impedance transmitter and receiver while powered down
  Per-channel programmable features                                                     • Per-channel register control for high impedance, independent for
      • Provides E1 short haul waveform templates and user-                                 receiver and transmitter
          programmable arbitrary waveform templates                                     Clock Inputs and Outputs
      • Provides two JAs (Jitter Attenuator) for each channel of receiver                • Flexible master clock (N x 1.544 MHz or N x 2.048 MHz) (1 ≤ N ≤
          and transmitter                                                                   8, N is an integer number)
      • Supports AMI/HDB3 (for E1) encoding and decoding                                 • Integrated clock synthesizer can multiply or divide the reference
  Per-channel System Interface options                                                     clock to a wide range of frequencies: 8 KHz, 64 KHz, 2.048 MHz,
      • Supports Single Rail, Dual Rail with clock or without clock and                     4.096 MHz, 8.192 MHz, 19.44 MHz and 32.768 MHz
          sliced system interface                                                       Microprocessor Interface
      • Integrated Clock Recovery for the transmit interface to recover                  • Supports Serial microprocessor interface
          transmit clock from system transmit data                                      Other Key Features
  Per-channel system and diagnostic functions                                           • IEEE1149.1 JTAG boundary scan
      • Provides transmit driver over-current detection and protection                   • Two general purpose I/O pins
          with optional automatic high impedance of transmit interface
                                                                                         • 3.3 V I/O with 5 V tolerant inputs
      • Detects and generates PRBS (Pseudo Random Bit Sequence),
                                                                                         • 3.3 V and 1.8 V power supply
          ARB (Arbitrary Pattern) and IB (Inband Loopback) in either
          receive or transmit direction                                                  • Package: 484-pin Fine Pitch BGA (19 mm X 19 mm)
      • Provides defect and alarm detection in both receive and transmit                Applicable Standards
          directions.                                                                    • Bellcore TR-TSY-000009, GR-253-CORE and GR-499-CORE
           – Defects include BPV (Bipolar Violation) /CV (Code Violation) and EXZ        • ETSI CTR12/13
              (Excessive Zeroes)                                                         • ETS 300166 and ETS 300 233
           – Alarms include LLOS (Line LOS), SLOS (System LOS), TLOS                     • G.703, G.735, G.736, G.742, G.772, G.775, G.783 and G.823
              (Transmit LOS) and AIS (Alarm Indication Signal)
                                                                                         • O.161
      • Programmable LLOS detection /clear levels. Compliant with ITU
          and ANSI specifications
IDT and the IDT logo are trademarks of Integrated Device Technology, Inc.
                                                                                    8                                                      December 17, 2009
 2009 Integrated Device Technology, Inc.                                                                                                                  DSC-7266/-


 IDT82P20516                                                                          16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
APPLICATIONS                                                                  AMI/HDB3 line code rule in Single Rail NRZ Format mode and output to
                                                                              the system, or output to the system without decoding in Dual Rail NRZ
    SDH/SONET multiplexers                                                   Format mode and Dual Rail RZ Format mode.
    Central office or PBX (Private Branch Exchange)
                                                                                  In the transmit path, the data to be transmitted is input on TDn in
    Digital access cross connects                                            Single Rail NRZ Format mode or TDPn/TDNn in Dual Rail NRZ Format
    Remote wireless modules                                                  mode and Dual Rail RZ Format mode, and is sampled by a transmit
    Microwave transmission systems                                           reference clock. The clock can be supplied externally from TCLKn or
                                                                              recovered from the input transmit data by an internal Clock Recovery. A
DESCRIPTION                                                                   selectable JA in Tx path is used to de-jitter gapped clocks. To meet E1
                                                                              waveform standards, two E1 templates and one J1 template, as well as
    The IDT82P20516 is a 16-channel high-density E1 short haul Line           an arbitrary waveform generator are provided. The data through the
Interface Unit. Each channel of the IDT82P20516 can be independently          Waveform Shaper, the Line Driver and the Tx Transmitter is output on
configured. The configuration is performed through a Serial micropro-         TTIPn and TRINGn.
cessor interface.
                                                                                  Alarms (including LOS, AIS) and defects (including BPV, EXZ) are
    In the receive path, through a Single Ended or Differential line inter-   detected in both receive line side and transmit system side. AIS alarm,
face, the received signal is processed by an adaptive Equalizer and then      PRBS, ARB and IB patterns can be generated /detected in receive /
sent to a Slicer. Clock and data are recovered from the digital pulses        transmit direction for testing purpose. Analog Loopback, Digital Loop-
output from the Slicer. After passing through an enabled or disabled          back and Remote Loopback are all integrated for diagnostics.
Receive Jitter Attenuator, the recovered data is decoded using B8ZS/
                                                                                  JTAG per IEEE 1149.1 is also supported by the IDT82P20516.
 Applications                                                               9                                                  December 17, 2009


                                                                                                                                                                                                                                      IDT82P20516
Block Diagram
                                                                                                                                                                                               LLOS
                                                                                                                                                                                               LLOS0
                                                                                                                               Defect/Alarm
                                                                                                                                Detector
                                                                                                                                                                                                                      BLOCK DIAGRAM
                                                        RTIP[15:0]                                                             Rx Clock &                                                      RCLK[15:0]
                                                                                    Rx
                                                                                                 Amplifier     Slicer             Data                      RJA             Decoder            RDN[15:0]
                                                        RRING[15:0]              Terminator
                                                                                                                                Recovery                                                       RD[15:0]/RDP[15:0]
                                                                             Analog                                            Remote Loopback                               Pattern
                                                                            Loopback                                                                                        Generator/
                                                                                                                                                Digital Loopback             Detector
                                                        TTIP[15:0]                                                                                                                             TCLK[15:0]/TDN[15:0]
                                                                                    Tx             Line       Waveform
                                                                                                                                   TJA                  Encoder                     Tx Clock   TDN[15:0]
                                                        TRING[15:0]              Terminator       Driver       Shaper
                                                                                                                                                                                    Recovery   TD[15:0]/TDP[15:0]
10
                                                                      G.772                                    Alarm                                                 Defect/Alarm
                                                                      Monitor                                 Generator                                                Detector
                                                                                                                                                 RCLK[15:0]
                                                                                Common Control                 MCU Interface                         Clock Generator                  JTAG
                    Figure-1 Functional Block Diagram
                                                                          RST
                                                                          GPIO[1:0]                     CS                SDO                                                 TDO
                                                                                                                                                                              TDI
                                                                          TEHW                          INT               SDI                                        CLKB     TCK                   VDDIO
                                                                          TEHWE                                           SCLK                                       CLKA     TMS
                                                                                                                                                                              TRST
                                                                          OE
                                                                          RIM
                                                                                                                                              MCKSEL[3:0]    CLKE1                                  VDDA
                                                                          REF
                                                                          VCOM[1:0]                                                                                                                 VDDD
                                                                          VCOMEN                                                                                                                    VDDR
                                                                                                                                              MCLK                                                  VDDT
                                                                                                                                                                                                    GNDA
                                                                                                                                                                                                    GNDD
                                                                                                                                                                                                    GNDT
December 17, 2009
                                                                                                                                                                                                                                      16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT


IDT82P20516                                                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
1     PIN ASSIGNMENT
       1      2     3      4      5     6      7      8       9     10     11     12     13      14     15     16     17    18     19    20    21   22
  A    NC     NC    NC     NC
                                RD15/
                               RDP15
                                      TDN14
                                             RCLK1
                                                4
                                                    TDN13
                                                           RCLK1
                                                               3
                                                                  TDN12
                                                                         RCLK1
                                                                             2
                                                                                 RCLK1
                                                                                    1
                                                                                       TDN11
                                                                                               RCLK1
                                                                                                  0
                                                                                                      TDN10  RCLK9   TDN9 RCLK8    NC    NC    NC   NC     A
  B    NC     NC    NC     NC
                               TCLK15
                               /TDN15
                                       TD14/
                                      TDP14
                                             RDN14
                                                     TD13/
                                                    TDP13
                                                           RDN13
                                                                   TD12/
                                                                  TDP12
                                                                         RDN12   RDN11
                                                                                        TD11/
                                                                                       TDP11
                                                                                               RDN10
                                                                                                       TD10/
                                                                                                      TDP10
                                                                                                              RDN9   TD9/
                                                                                                                     TDP9
                                                                                                                           RD8/
                                                                                                                           RDP8
                                                                                                                                   NC    NC    NC   NC     B
 C
     TRING
       12
              NC    NC     NC
                                TD15/
                                TDP15
                                      GNDD    GNDD  GNDD    GNDD  GNDD    GNDD   GNDD  GNDD     GNDD  GNDD   GNDD   GNDD   TDN8    NC    NC    NC   NC    C
                                             TCLK14        TCLK13        TCLK12 TCLK11         TCLK10        TCLK9/
 D   TTIP12   NC    NC     NC   TDN15 RDN15
                                             /TDN14
                                                    VDDIO
                                                           /TDN13
                                                                  GNDD
                                                                         /TDN12 /TDN11
                                                                                       VDDIO
                                                                                               /TDN10
                                                                                                      VDDIO
                                                                                                              TDN9  VDDIO
                                                                                                                           TD8/
                                                                                                                           TDP8
                                                                                                                                   NC    NC    NC   NC    D
     TRING                            RCLK1   RD14/         RD13/                               RD10/         RD9/        TCLK8/
  E    13
            GNDA  GNDA   GNDA     NC
                                         5   RDP14
                                                    GNDD
                                                           RDP13
                                                                  VDDIO   RD12/
                                                                         RDP12
                                                                                 RD11/
                                                                                 RDP11
                                                                                       GNDD
                                                                                               RDP10
                                                                                                      GNDD
                                                                                                              RDP9  RDN8
                                                                                                                           TDN8  GNDA   GNDA   NC
                                                                                                                                                   TRING
                                                                                                                                                     11
                                                                                                                                                           E
  F  TTIP13   NC  GNDA   GNDA   VDDD  GNDD    GNDD  VDDD      NC  VDDD    GNDD   VDDIO VDDD     VDDD  VDDD   VDDD   VDDD  VDDD   GNDA   GNDA   NC  TTIP11  F
     TRING               RRING
 G     14
              NC  RTIP12
                           12
                                VDDD  VDDD    GNDD  GNDD    GNDD  GNDD    VDDD   GNDD  GNDD     GNDD  GNDD   GNDD   GNDD    NC   RRING
                                                                                                                                   11
                                                                                                                                       RTIP11  NC
                                                                                                                                                   TRING
                                                                                                                                                     10
                                                                                                                                                          G
                         RRING        VDDR1                                                                                      RRING
 H   TTIP14   NC  RTIP13
                           13
                                  NC
                                         2
                                              GNDD  GNDD    GNDD  GNDD    GNDD   GNDD  GNDD     GNDD  GNDD   GNDD   GNDD    NC
                                                                                                                                   10
                                                                                                                                       RTIP10  NC  TTIP10 H
     TRING               RRING                                                                               VDDR1               RRING             TRING
  J    15
              NC  RTIP14
                           14   VDDT   VDDT   GNDT  GNDT    GNDT  GNDT    GNDT   GNDT  GNDT     GNDT  GNDT
                                                                                                                1
                                                                                                                    VDDT   VDDT
                                                                                                                                    9
                                                                                                                                        RTIP9  NC
                                                                                                                                                      9    J
                         RRING                      VDDR1  VDDR1                                      VDDR1                      RRING
  K  TTIP15   NC  RTIP15
                           15   VDDT   VDDT   GNDT
                                                       3       4
                                                                  GNDT    GNDT   GNDT  VDDR9    GNDT
                                                                                                         0
                                                                                                             GNDT   VDDT   VDDT
                                                                                                                                    8
                                                                                                                                        RTIP8  NC  TTIP9   K
     TRING               RRING        VDDR1                                                                                      VCOM              TRING
              NC  RTIP0
  L     0                   0  VDDR0
                                         5
                                              VDDT  GNDT    VDDT  GNDT    GNDT   GNDT   VDDT    GNDT  GNDT    VDDT  VDDR8   NC
                                                                                                                                   EN
                                                                                                                                         REF   NC
                                                                                                                                                      8    L
                         RRING
      TTIP0   NC  RTIP1
 M                          1   VDDT   VDDT  VDDR2  GNDT   VDDR1   VDDT   GNDT   VDDA  GNDA     GNDT  GNDT   VDDR7  VDDT   VDDA  VCOM1 VCOM0  GNDA TTIP8  M
     TRING               RRING                                                                                                   RRING             TRING
              NC  RTIP2
 N      1                   2   VDDT   VDDT  VDDR3  GNDT    GNDT  GNDT    GNDT   VDDA   VDDT     NC    VDDT  VDDR6  VDDT   VDDT     7
                                                                                                                                        RTIP7 VDDA
                                                                                                                                                      7   N
                         RRING                                                                                                   RRING
      TTIP1   NC  RTIP3
  P                         3   VDDT   VDDT   GNDT  VDDR4   GNDD  GNDD      NC   GNDD  VDDIO     NC   GNDD   GNDT   VDDR5   NC      6
                                                                                                                                        RTIP6  NC  TTIP7
                                                                                                                                                           P
     TRING               RRING                                                                                                   RRING             TRING
              NC  RTIP4
 R      2                   4   VDDT   VDDT    NC     NC    GNDD  VDDIO  VDDIO   VDDD  GNDD     VDDD  VDDD   VDDIO  GNDD    NC      5
                                                                                                                                        RTIP5  NC
                                                                                                                                                      6   R
      TTIP2   NC  GNDA   GNDA
  T                               NC    NC   VDDIO  VDDD    VDDD  GNDD    GNDD   GNDD  GNDD     GNDD   RDN6  VDDD   GNDD   VDDT   VDDT  GNDA   NC  TTIP6
                                                                                                                                                           T
     TRING                                                                                                                                         TRING
              NC  GNDA   GNDA
 U      3                         NC    NC     NC   VDDD    VDDD  GNDD    GNDD   GNDD  GNDD     GNDD  GNDD   GNDD   GNDD    NC   GNDA   GNDA   NC
                                                                                                                                                      5   U
                          TD1/        TCLK2/ TCLK3/ TCLK4/                                             MCK   TCLK6/  TD7/         TD6/
      TTIP3   NC  GNDA
  V                      TDP1   RDN1
                                       TDN2   TDN3   TDN4
                                                            RDN0  GPIO0     OE  TEHWE    CS     CLKB
                                                                                                       SEL3   TDN6   TDP7
                                                                                                                           RDN7   TDP6
                                                                                                                                        GNDA  GNDA TTIP5
                                                                                                                                                           V
     TRING        TCLK1/               TD2/                       TCLK0/                                     MCKSE TCLK5/
              NC         RCLK1
 W      4          TDN1         TDN2
                                       TDP2
                                              RDN2   RDN3   RDN4
                                                                   TDN0
                                                                           TMS    TCK    SDI     NC     NC
                                                                                                               L1    TDN5
                                                                                                                          RCLK7   RDN5    IC   NC   NC
                                                                                                                                                          W
             RD1/
      TTIP4        TDN1    NC
  Y         RDP1                  NC    NC     NC     NC      NC    NC      NC     NC    NC      NC     NC     NC     NC    NC     NC  GNDD    NC   NC
                                                                                                                                                           Y
             RD2/         TD3/   RD3/  TD4/          RD0/                                                                  RD6/        TCLK7/ RD7/
 AA    NC
            RDP2
                  RCLK2
                         TDP3   RDP3   TDP4
                                             RCLK4
                                                     RDP0    TDI  GPIO1    RST    SDO  LLOS0    CLKA
                                                                                                      MCKSE
                                                                                                        L2
                                                                                                              TD5/
                                                                                                              TDP5
                                                                                                                    RCLK5
                                                                                                                           RDP6
                                                                                                                                  TDN7
                                                                                                                                        TDN7  RDP7
                                                                                                                                                    NC
                                                                                                                                                          AA
                          RD4/   TD0/                                                                                                   RD5/
 AB   TDN3  RCLK3  TDN4
                         RDP4    TDP0
                                       TDN0  RCLK0   TRST    TDO  TEHW     RIM   SCLK    INT    LLOS    NC   CLKE1
                                                                                                                    MCKSE
                                                                                                                      L0
                                                                                                                           MCLK   TDN5
                                                                                                                                        RDP5
                                                                                                                                              TDN6 RCLK6
                                                                                                                                                          AB
      1     2      3      4      5      6      7      8       9     10     11     12     13      14      15     16     17    18     19     20   21     22
                                               Figure-2 484-Pin Fine Pitch BGA (Top View)
Pin Assignment                                                                  11                                                         December 17, 2009


 IDT82P20516                                                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
2         PIN DESCRIPTION
       Name                 I/O                          Pin No. 1                                                                  Description
                                                                                        Line Interface
       RTIPn               Input        L3, M3, N3, P3, R3, R20, P20, N20, RTIPn / RRINGn: Receive Bipolar Tip/Ring for Channel 0 ~ 15
                                        K20, J20, H20, G20, G3, H3, J3, K3 The receive line interface supports both Receive Differential mode and Receive Single Ended
      RRINGn                                                                        mode.
                                        L4, M4, N4, P4, R4, R19, P19, N19, In Receive Differential mode, the received signal is coupled into RTIPn and RRINGn via a 1:1
     (n=0~15)                           K19, J19, H19, G19, G4, H4, J4, K4 transformer or without a transformer (transformer-less).
                                                                                    In Receive Single Ended mode, RRINGn should be left open. The received signal is input on
                                                                                    RTIPn via a 2:1 (step down) transformer or without a transformer (transformer-less).
                                                                                    These pins will become High-Z globally or channel specific in the following conditions:
                                                                                        • Global High-Z:
                                                                                           - Connecting the RIM pin to low;
                                                                                           - Loss of MCLK
                                                                                           - During and after power-on reset, hardware reset or global software reset;
                                                                                        • Per-channel High-Z
                                                                                           - Receiver power down by writing ‘1’ to the R_OFF bit (b5, RCF0,...)
       TTIPn              Output        M1, P1, T1, V1, Y1, V22, T22, P22, TTIPn / TRINGn: Transmit Bipolar Tip /Ring for Channel 0 ~ 15
                                        M22, K22, H22, F22, D1, F1, H1, K1 The transmit line interface supports both Transmit Differential mode and Transmit Single
      TRINGn                                                                        Ended mode.
                                        L1, N1, R1, U1, W1, U22, R22, N22, In Transmit Differential mode, TTIPn outputs a positive differential pulse while TRINGn out-
     (n=0~15)                           L22, J22, G22, E22, C1, E1, G1, J1 puts a negative differential pulse. The pulses are coupled to the line side via a 1:2 (step up)
                                                                                    transformer or without a transformer (transformer-less).
                                                                                    In Transmit Single Ended mode, TRINGn should be left open (it is shorted to ground inter-
                                                                                    nally). The signal presented at TTIPn is output to the line side via a 1:2 (step up) transformer.
                                                                                    These pins will become High-Z globally or channel specific in the following conditions:
                                                                                        • Global High-Z:
                                                                                           - Connecting the OE pin to low;
                                                                                           - Loss of MCLK;
                                                                                           - During and after power-on reset, hardware reset or global software reset;
                                                                                        • Per-channel High-Z
                                                                                           - Writing ‘0’ to the OE bit (b6, TCF0,...) 2;
                                                                                           - Loss of TCLKn in Transmit Single Rail NRZ Format mode or Transmit Dual Rail NRZ
                                                                                             Format mode, except that the channel is in Remote Loopback or transmit internal pat-
                                                                                             tern with XCLK 3;
                                                                                           - Transmitter power down by writing ‘1’ to the T_OFF bit (b5, TCF0,...);
                                                                                           - Per-channel software reset;
                                                                                           - The THZ_OC bit (b4, TCF0,...) is set to ‘1’ and the transmit driver over-current is
                                                                                             detected.
                                                                                    Refer to Section 3.3.8 Output High-Z on TTIP and TRING for details.
Note:
1. The pin number of the pins with the footnote ‘n’ is listed in order of channel (CH0 ~ CH15).
2. The content in the brackets indicates the position and the register name of the preceding bit. After the register name, if the punctuation ‘,...’ is followed, this bit is in a per-channel register.
The addresses and details are included in Chapter 5 Programming Information.
3. XCLK is derived from MCLK. It is 2.048 MHz in E1 mode.
 Pin Description                                                                               12                                                                      December 17, 2009


IDT82P20516                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
     Name        I/O               Pin No.                                                          Description
                                                            System Interface
  RDn / RDPn    Output  AA8, Y2, AA2, AA5, AB4, AB20, RDn: Receive Data for Channel 0 ~ 15
                       AA18, AA21, B18, E16, E14, E12, When the receive system interface is configured to Single Rail NRZ Format mode, this multi-
   (n=0~15)                     E11, E9, E7, A5          plex pin is used as RDn.
                                                         The decoded NRZ data is updated on the active edge of RCLKn. The active level on RDn is
                                                         selected by the RD_INV bit (b3, RCF1,...).
                                                         When the receiver is powered down, RDn will be in High-Z state or low, as selected by the
                                                         RHZ bit (b6, RCF0,...).
                                                         RDPn: Positive Receive Data for Channel 0 ~ 15
                                                         When the receive system interface is configured to Dual Rail NRZ Format mode, Dual Rail RZ
                                                         Format mode or Dual Rail Sliced mode, this multiplex pin is used as RDPn.
                                                         In Receive Dual Rail NRZ Format mode, the un-decoded NRZ data is output on RDPn and
                                                         RDNn and updated on the active edge of RCLKn.
                                                         In Receive Dual Rail RZ Format mode, the un-decoded RZ data is output on RDPn and RDNn
                                                         and updated on the active edge of RCLKn.
                                                         In Receive Dual Rail Sliced mode, the raw RZ sliced data is output on RDPn and RDNn.
                                                         For Receive Differential line interface, an active level on RDPn indicates the receipt of a posi-
                                                         tive pulse on RTIPn and a negative pulse on RRINGn; while an active level on RDNn indi-
                                                         cates the receipt of a negative pulse on RTIPn and a positive pulse on RRINGn.
                                                         For Receive Single Ended line interface, an active level on RDPn indicates the receipt of a
                                                         positive pulse on RTIPn; while an active level on RDNn indicates the receipt of a negative
                                                         pulse on RTIPn.
                                                         The active level on RDPn and RDNn is selected by the RD_INV bit (b3, RCF1,...).
                                                         When the receiver is powered down, RDPn and RDNn will be in High-Z state or low, as
                                                         selected by the RHZ bit (b6, RCF0,...).
     RDNn       Output  V9, V5, W7, W8, W9, W19, T15, RDNn: Negative Receive Data for Channel 0 ~ 15
                       V18, E17, B16, B14, B12, B11, B9, When the receive system interface is configured to Dual Rail NRZ Format mode, Dual Rail RZ
   (n=0~15)                         B7, D6               Format mode or Dual Rail Sliced mode, this multiplex pin is used as RDNn.
                                                         (Refer to the description of RDPn for details).
    RCLKn       Output  AB7, W4, AA3, AB2, AA7, AA17, RCLKn: Receive Clock for Channel 0 ~ 15
                        AB22, W18, A18, A16, A14, A12, When the receive system interface is configured to Single Rail NRZ Format mode, Dual Rail
   (n=0~15)                     A11, A9, A7, E6          NRZ Format mode or Dual Rail RZ Format mode, this multiplex pin is used as RCLKn.
                                                         RCLKn outputs a 2.048 MHz (in E1 mode) clock which is recovered from the received signal.
                                                         The data output on RDPn/RDNn (in Receive Dual Rail NRZ Format mode, Receive Dual Rail
                                                         RZ Format mode and Receive Dual Rail Sliced) is updated on the active edge of RCLKn. The
                                                         active edge is selected by the RCK_ES bit (b4, RCF1,...).
                                                         In LLOS condition, RCLKn output high or XCLK, as selected by the RCKH bit (b7,
                                                         RCF0,...) (refer to Section 3.5.3.1 Line LOS (LLOS) for details).
                                                         When the receiver is powered down, RCLKn will be in High-Z state or low, as selected by the
                                                         RHZ bit (b6, RCF0,...).
     LLOS       Output               AB14                LLOS: Receive Line Loss Of Signal
                                                         LLOS synchronizes with the output of CLKE1 and can indicate the LLOS (Line LOS) status of
                                                         all 16 channels in a serial format.
                                                         When the clock output on CLKE1 is enabled, LLOS indicates the LLOS status of the 16 chan-
                                                         nels in a serial format and repeats every seventeen cycles. The start filler is positioned by
                                                         LLOS0. Refer to the description of LLOS0 below for details.
                                                         LLOS is updated on the rising edge of CLKE1 and is always active high.
                                                         When the clock output of CLKE1 is disabled, LLOS will be held in High-Z state.
                                                         (Refer to Section 3.5.3.1 Line LOS (LLOS) for details.)
Pin Description                                                     13                                                         December 17, 2009


IDT82P20516                                                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
     Name          I/O                   Pin No.                                                           Description
    LLOS0        Output                   AA13               LLOS0: Receive Line Loss Of Signal for Start Position
                                                             LLOS0 can indicate the start position on the LLOS pin.
                                                             When the clock output on CLKE1 is enabled, LLOS0 pulses high for one CLKE1 clock cycle to
                                                             indicate the start position on the LLOS pin. When CLKE1 outputs 8 KHz clock, LLOS0 pulses
                                                             high for one 8 KHz clock cycle (125 µs) every seventeen 8 KHz clock cycles; when CLKE1
                                                             outputs 2.048 MHz clock, LLOS0 pulses high for one 2.048 MHz clock cycle (488 ns) every
                                                             seventeen 2.048 MHz clock cycles. LLOS0 is updated on the rising edge of CLKE1.
                                                             When the clock output on CLKE1 is disabled, LLOS0 will be held in High-Z state.
                                                             (Refer to Section 3.5.3.1 Line LOS (LLOS) for details.)
  TDn / TDPn      Input       AB5, V4, W6, AA4, AA6, AA16,   TDn: Transmit Data for Channel 0 ~ 15
                              V19, V17, D18, B17, B15, B13,  When the transmit system interface is configured to Single Rail NRZ Format mode, this multi-
   (n=0~15)                         B10, B8, B16, C5         plex pin is used as TDn.
                                                             TDn accepts Single Rail NRZ data. The data is sampled into the device on the active edge of
                                                             TCLKn.
                                                             The active level on TDn is selected by the TD_INV bit (b3, TCF1,...).
                                                             TDPn: Positive Transmit Data for Channel 0 ~ 15
                                                             When the transmit system interface is configured to Dual Rail NRZ Format mode or Dual Rail
                                                             RZ Format mode, this multiplex pin is used as TDPn.
                                                             In Transmit Dual Rail NRZ Format mode, the pre-encoded NRZ data is input on TDPn and
                                                             TDNn and sampled on the active edge of TCLKn.
                                                             In Transmit Dual Rail RZ Format mode, the pre-encoded RZ data is input on TDPn and TDNn.
                                                             The line code is as follows (when the TD_INV bit (b3, TCF1,...) is ‘0’):
                                                                     TDPn              TDNn          Output Pulse on TTIPn Output Pulse on TRINGn *
                                                                        0                0                     Space                    Space
                                                                        0                1                Negative Pulse             Positive Pulse
                                                                        1                0                 Positive Pulse           Negative Pulse
                                                                        1                1                     Space                    Space
                                                                 Note:
                                                                 * For Transmit Single Ended line interface, TRINGn should be open.
                                                             The active level on TDPn and TDNn is selected by the TD_INV bit (b3, TCF1,...).
     TDNn     Input / Output  AB6, Y3, W5, AB1, AB3, AB19, TDNn: Negative Transmit Data for Channel 0 ~ 15
                             AB21, AA19, C18, A17, A15, A13, When the transmit system interface is configured to Dual Rail NRZ Format mode, this multi-
   (n=0~15)                          A10, A8, A6, D5         plex pin is used as TDNn.
                                                             (Refer to the description of TDPn for details).
 TCLKn / TDNn     Input      W10, W3, V6, V7, V8, W17, V16, TCLKn: Transmit Clock for Channel 0 ~ 15
                             AA20, E18, D16, D14, D12, D11, When the transmit system interface is configured to Single Rail NRZ Format mode or Dual
   (n=0~15)                            D9, D7, B5            Rail NRZ Format mode, this multiplex pin is used as TCLKn.
                                                             TCLKn inputs a 2.048 MHz (in E1 mode) clock.
                                                             The data input on TDn (in Transmit Single Rail NRZ Format mode) or TDPn/TDNn (in Trans-
                                                             mit Dual Rail NRZ Format mode) is sampled on the active edge of TCLKn.
                                                             TDNn: Negative Transmit Data for Channel 0 ~ 15
                                                             When the transmit system interface is configured to Dual Rail RZ Format mode, this multiplex
                                                             pin is used as TDNn.
                                                             (Refer to the description of TDPn for details).
Pin Description                                                          14                                                         December 17, 2009


IDT82P20516                                          16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
    Name         I/O   Pin No.                                          Description
                                       Clock
    MCLK        Input   AB18   MCLK: Master Clock Input
                               MCLK provides a stable reference timing for the IDT82P20516. MCLK should be a clock with
                               +/-50 ppm (in E1 mode) accuracy. The clock frequency of MCLK is informed to the device by
                               MCKSEL[3:0].
                               If MCLK misses (duty cycle is less than 30% for 10 µs) and then recovers, the device will be
                               reset automatically.
  MCKSEL[0]     Input   AB17   MCKSEL[3:0]: Master Clock Selection
                               These four pins inform the device of the clock frequency input on MCLK:
  MCKSEL[1]             W16
                                                    MCKSEL[3:0]*                Frequency (MHz)
  MCKSEL[2]             AA15
                                                        0000                          1.544
  MCKSEL[3]              V15                            0001                        1.544 X 2
                                                        0010                        1.544 X 3
                                                        0011                        1.544 X 4
                                                        0100                        1.544 X 5
                                                        0101                        1.544 X 6
                                                        0110                        1.544 X 7
                                                        0111                        1.544 X 8
                                                        1000                          2.048
                                                        1001                        2.048 X 2
                                                        1010                        2.048 X 3
                                                        1011                        2.048 X 4
                                                        1100                        2.048 X 5
                                                        1101                        2.048 X 6
                                                        1110                        2.048 X 7
                                                        1111                        2.048 X 8
                                                Note:
                                                0: GNDD
                                                1: VDDIO
    CLKE1       Output  AB16   CLKE1: 8 KHz / E1 Clock Output
                               The output on CLKE1 can be enabled or disabled, as determined by the CLKE1_EN bit (b3,
                               CLKG).
                               When the output is enabled, CLKE1 outputs an 8 KHz or 2.048 MHz clock, as selected by the
                               CLKE1 bit (b2, CLKG). The output is locked to MCLK.
                               When the output is disabled, CLKE1 is in High-Z state.
    CLKA        Input   AA14   CLKA: External E1 Clock Input A
                               External E1 (2.048 MHz) clock is input on this pin.
                               When not used, this pin should be connected to GNDD.
    CLKB        Input    V14   CLKB: External E1 Clock Input B
                               External E1 (2.048 MHz) clock is input on this pin.
                               When not used, this pin should be connected to GNDD.
Pin Description                          15                                                       December 17, 2009


IDT82P20516                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
     Name          I/O       Pin No.                                              Description
                                        Common Control
   VCOM[0]       Output       M20    VCOM: Voltage Common Mode [1:0]
                                     These pins are used only when the receive line interface is in Receive Differential mode and
   VCOM[1]                    M19    connected without a transformer (transformer-less).
                                     To enable these pins, the VCOMEN pin must be connected high. Refer to Figure-6 for the
                                     connection.
                                     When these pins are not used, they should be left open.
   VCOMEN         Input        L19   VCOMEN: Voltage Common Mode Enable
               (Pull-Down)           This pin should be connected high only when the receive line interface is in Receive Differen-
                                     tial mode and connected without a transformer (transformer-less).
                                     When not used, this pin should be left open.
      REF            -         L20   REF: Reference Resistor
                                     An external resistor (10 KΩ, ±1%) is used to connect this pin to ground to provide a standard
                                     reference current for internal circuit. This resistor is required to ensure correct device opera-
                                     tion.
      RIM         Input       AB11   RIM: Receive Impedance Matching
               (Pull-Down)           In Receive Differential mode, when RIM is low, all 16 receivers become High-Z and only exter-
                                     nal impedance matching is supported. In this case, the per-channel impedance matching con-
                                     figuration bits - the R_TERM[2:0] bits (b2~0, RCF0,...) and the R120IN bit (b4, RCF0,...) - are
                                     ignored.
                                     In Receive Differential mode, when RIM is high, impedance matching is configured on a per-
                                     channel basis by the R_TERM[2:0] bits (b2~0, RCF0,...) and the R120IN bit (b4, RCF0,...).
                                     This pin can be used to control the receive impedance state for Hitless Protection applica-
                                     tions. Refer to Section 4.4 Hitless Protection Switching (HPS) Summary for details.
                                     In Receive Single Ended mode, this pin should be left open.
      OE          Input        V11   OE: Output Enable
                                     OE enables or disables all Line Drivers globally.
                                     A high level on this pin enables all Line Drivers while a low level on this pin places all Line
                                     Drivers in High-Z state and independent from related register settings.
                                     Note that the functionality of the internal circuit is not affected by OE.
                                     If this pin is not used, it should be tied to VDDIO.
                                     This pin can be used to control the transmit impedance state for Hitless protection applica-
                                     tions. Refer to Section 4.4 Hitless Protection Switching (HPS) Summary for details.
    TEHWE         Input        V12   TEHWE: Hardware E1 Mode Selection Enable
                (Pull-Up)            When this pin is open, the E1 operation mode is selected by TEHW globally.
                                     When this pin is low, the E1 operation mode is selected by the E1 bit (b0, CHCF,...) on a per-
                                     channel basis.
     TEHW         Input       AB10   TEHW: Hardware E1 Mode Selection
                (Pull-Up)            When TEHWE is open, this pin selects the E1 operation mode globally:
                                     Low - E1 mode;
                                     When TEHWE is low, the input on this pin is ignored.
    GPIO[0]   Output / Input   V10   GPIO: General Purpose I/O [1:0]
                                     These two pins can be defined as input pins or output pins by the DIR[1:0] bits (b1~0, GPIO)
    GPIO[1]                   AA10   respectively.
                                     When the pins are input, their polarities are indicated by the LEVEL[1:0] bits (b3~2, GPIO)
                                     respectively.
                                     When the pins are output, their polarities are controlled by the LEVEL[1:0] bits (b3~2, GPIO)
                                     respectively.
      RST         Input       AA11   RST: Reset (Active Low)
                                     A low pulse on this pin resets the device. This hardware reset process completes in 2 µs max-
                                     imum. Refer to Section 4.1 Reset for an overview on reset options.
Pin Description                                   16                                                          December 17, 2009


IDT82P20516                                                                          16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
    Name           I/O                Pin No.                                                            Description
                                                                MCU Interface
     INT         Output                 AB13                INT: Interrupt Request
                                                            This pin indicates interrupt requests for all unmasked interrupt sources.
                                                            The output characteristics (open drain or push-pull internally) and the active level are deter-
                                                            mined by the INT_PIN[1:0] bits (b3~2, GCF).
      CS          Input                  V13                CS: Chip Select (Active Low)
                                                            This pin must be asserted low to enable the microprocessor interface.
                                                            A transition from high to low must occur on this pin for each Read/Write operation and CS
                                                            should remain low until the operation is over.
    SCLK          Input                 AB12                SCLK: Shift Clock
                                                            In Serial microprocessor interface, this multiplex pin is used as SCLK.
                                                            SCLK inputs the shift clock for the Serial microprocessor interface. Data on SDI is sampled by
                                                            the device on the rising edge of SCLK. Data on SDO is updated on the falling edge of SCLK.
     SDI          Input                 W13                 SDI: Serial Data Input
                                                            In Serial microprocessor interface, this multiplex pin is used as SDI.
                                                            Address and data on this pin are serially clocked into the device on the rising edge of SCLK.
     SDO         Output                 AA12                SDO: Serial Data Output
                                                            In Serial microprocessor interface, this multiplex pin is used as SDO.
                                                            Data on this pin is serially clocked out of the device on the falling edge of SCLK.
                                                           JTAG (per IEEE 1149.1)
    TRST          Input                 AB8                 TRST: JTAG Test Reset (Active Low)
                Pull-Down                                   A low signal on this pin resets the JTAG test port. To ensure deterministic operation of the test
                                                            logic, TMS should be held high when the signal on TRST changes from low to high.
                                                            This pin may be left unconnected when JTAG is not used.
                                                            This pin has an internal pull-down resistor.
     TMS          Input                 W11                 TMS: JTAG Test Mode Select
                 Pull-up                                    The signal on this pin controls the JTAG test performance and is sampled on the rising edge
                                                            of TCK. To ensure deterministic operation of the test logic, TMS should be held high when the
                                                            signal on TRST changes from low to high.
                                                            This pin may be left unconnected when JTAG is not used.
                                                            This pin has an internal pull-up resistor.
     TCK          Input                 W12                 TCK: JTAG Test Clock
                                                            The clock for the JTAG test is input on this pin. TDI and TMS are sampled on the rising edge
                                                            of TCK and TDO is updated on the falling edge of TCK.
                                                            When TCK is idle at low state, all stored-state devices contained in the test logic shall retain
                                                            their state indefinitely.
                                                            This pin should be connected to GNDD when JTAG is not used.
     TDI          Input                 AA9                 TDI: JTAG Test Data Input
                 Pull-up                                    The test data is input on this pin. It is clocked into the device on the rising edge of TCK. This
                                                            pin has an internal pull-up resistor.
                                                            This pin may be left unconnected when JTAG is not used.
     TDO         Output                 AB9                 TDO: JTAG Test Data Output
                                                            The test data is output on this pin. It is clocked out of the device on the falling edge of TCK.
                                                            TDO is a High-Z output signal except during the process of data scanning.
                                                              Power & Ground
    VDDIO                 D8, D13, D15, D17, E10, F12, P13, VDDIO: 3.3 V I/O Power Supply
                                 R10, R11, R16, T7
    VDDA                        N21, M12, N12, M18          VDDA: 3.3 V Analog Core Power Supply
Pin Description                                                         17                                                           December 17, 2009


IDT82P20516                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
     Name       I/O                Pin No.                                                        Description
    VDDD              F5, F8, F10, F13, F14, F15, F16, VDDD: 1.8 V Digital Core Power Supply
                     F17, F18, G5, G6, G11, R12, R14,
                          R15, T8, T9, T16, U8, U9
    VDDRn            H6, J16, K8, K9, K13, K15, L5, L6, VDDRn: 3.3 V Power Supply for Receiver
                      L17, M7, M9, M16, N7, N16, P8,
   (N=0~15)                          P17
     VDDT           J5, J6, J17, J18, K5, K6, K17, K18, VDDT: 3.3 V Power Supply for Transmitter Driver
                       L7, L9, L13, L16, M5, M6, M10,
                    M17, N5, N6, N13, N15, N17, N18,
                          P5, P6, R5, R6, T18, T19
    GNDA            E2, E3, E4, E19, E20, F3, F4, F19, GNDA: GND for Analog Core / Receiver
                      F20, M13, M21, T3, T4, T20, U3,
                        U4, U19, U20, V3, V20, V21
    GNDD              C6, C7, C8, C9, C10, C11, C12, GNDD: Digital GND
                    C13, C14, C15, C16, C17, D10, E8,
                    E13, E15, F6, F7, F11, G7, G8, G9,
                      G10, G12, G13, G14, G15, G16,
                     G17, H7, H8, H9, H10, H11, H12,
                    H13, H14, H15, H16, H17, P9, P10,
                    P12, P15, R9, R13, R17, T10, T11,
                    T12, T13, T14, T17, U10, U11, U12,
                       U13, U14, U15, U16, U17, Y20
    GNDT            J7, J8, J9, J10, J11, J12, J13, J14, GNDT: Analog GND for Transmitter Driver
                     J15, K7, K10, K11, K12, K14, K16,
                      L8, L10, L11, L12, L14, L15, M8,
                    M11, M14, M15, N8, N9, N10, N11,
                                   P7, P16
                                                                  TEST
      NC         -     A1, A2, A3, A4, A19, A20, A21, NC: No Connected
                       A22, B1, B2, B3, B4, B19, B20, These pins should be left open.
                      B21, B22, C2, C3, C4, C19, C20,
                     C21, C22, D2, D3, D4, D19, D20,
                      D21, D22, E5, E21, F2, F9, F21,
                     G2, G18, G21, H2, H5, H18, H21,
                    J2, J21, K2, K21, L2, L18, L21, M2,
                     N2, N14, P2, P11, P14, P18, P21,
                     R2, R7, R8, R18, R21, T2, T5, T6,
                    T21, U2, U5, U6, U7, U18, U21, V2,
                    W2, W21, W22, Y4, Y5, Y6, Y7, Y8,
                    Y9, Y10, Y11, Y12, Y13, Y14, Y15,
                       Y16, Y17, Y18, Y19, Y21, Y22,
                        AA1, AA22, AB15, W14, W15
                                                                 Others
      IC                             W20                 IC: Internal Connected
                                                         This pin is for IDT use only and should be connected to GNDD.
Pin Description                                                     18                                                 December 17, 2009


  IDT82P20516                                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3        FUNCTIONAL DESCRIPTION
3.1      E1 MODE SELECTION
    The IDT82P20516 can be configured to E1 mode globally or on a
per-channel basis. The configuration is determined by the TEHWE pin,
the TEHW pin and the E1 bit (b0, CHCF,...). Refer to Table-1 for details
of the operation mode selection.
Table-1 Operation Mode Selection
                                                     Global Programming                                            Per-Channel Programming
             TEHWE Pin                                        Open                                                              Low
              TEHW Pin                         Open                                Low                        (The configuration of this pin is ignored)
                E1 Bit                       (The configuration of this bit is ignored).                        0                                  1
          Operation Mode                                                            E1                                                             E1
3.2      RECEIVE PATH
3.2.1    RX TERMINATION                                                                                   RIM
    The receive line interface supports Receive Differential mode. In
Receive Differential mode, both RTIPn and RRINGn are used to receive                         RTIP
signal from the line side.
                                                                                                                         1   0
    In Receive Differential mode, the line interface can be connected                                                      RIN
with E1 120 Ω twisted pair cable or E1 75 Ω coaxial cable.
                                                                                                                         0   1   R_TERM2
    The receive impedance matching is realized by using internal imped-                                                                              Receive
ance matching or external impedance matching for each channel in                       Rr = 120 Ω                                                     path
different applications.
3.2.1.1 Receive Differential Mode
                                                                                                                               R_TERM[1:0]
                                                                                                               R120IN
    In Receive Differential mode, three kinds of impedance matching are                                                  IM
supported: Fully Internal Impedance Matching, Partially Internal Imped-
                                                                                          RRING
ance Matching and External Impedance Matching. Figure-3 shows an
overview of how these Impedance Matching modes are switched.
    Fully Internal Impedance Matching circuit uses an internal program-              Figure-3 Switch between Impedance Matching Modes
mable resistor (IM) only and does not use an external resistor. This
configuration saves external components and supports 1:1 Hitless                         To support some particular applications, such as hot-swap or Hitless
Protection Switching (HPS) applications without relays. Refer to                     Protection Switch (HPS) hot-switchover, RTIPn/RRINGn must be forced
Section 4.4 Hitless Protection Switching (HPS) Summary.                              to enter high impedance state (i.e., External Impedance Matching). For
                                                                                     hot-swap, RTIPn/RRINGn must be always held in high impedance state
    Partially Internal Impedance Matching circuit consists of an internal            during /after power up; for HPS hot-switchover, RTIPn/RRINGn must
programmable resistor (IM) and a value-fixed 120 Ω external resistor                 enter high impedance state immediately after switchover. Though each
(Rr). Compared with Fully Internal Impedance Matching, this configura-               channel can be individually configured to External Impedance Matching
tion provides considerable savings in power dissipation of the device.               through register access, it is too slow for hitless switch. Therefore, a
For example, In E1 120 Ω PRBS mode, the power savings would be                       hardware pin - RIM - is provided to globally control the high impedance
0.44 W. For power savings in other modes, please refer to Chapter 8                  for all 16 receivers.
Physical And Electrical Specifications.
                                                                                         When RIM is low, only External Impedance Matching is supported for
    External Impedance Matching circuit uses an external resistor (Rr)               all 16 receivers and the per-channel impedance matching configuration
only.                                                                                bits - the R_TERM[2:0] bits (b2~0, RCF0,...) and the R120IN bit (b4,
                                                                                     RCF0,...) - are ignored.
 Functional Description                                                          19                                                       December 17, 2009


 IDT82P20516                                                                                          16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
    When RIM is high, impedance matching is configured on a per-                                  A twisted pair cable can be connected with a 1:1 transformer or
channel basis. Three kinds of impedance matching are all supported                            without a transformer (transformer-less), while a coaxial cable must be
and selected by the R_TERM[2:0] bits (b2~0, RCF0,...) and the R120IN                          connected with a 1:1 transformer. Table 2 lists the recommended imped-
bit (b4, RCF0,...). The R_TERM[2] bit (b2, RCF0,...) should be set to                         ance matching value in different applications. Figure-4 to Figure-6 show
match internal or external impedance. If the R_TERM[2] bit (b2,                               the connection for one channel.
RCF0,...) is ‘0’, internal impedance matching is enabled. The R120IN bit                          The transformer-less connection will offer a termination option with
(b4, RCF0,...) should be set to select Partially Internal Impedance                           reduced cost and board space. However, the waveform amplitude is not
Matching or Fully Internal Impedance Matching. The internal program-                          standard compliant, and surge protection and common mode depres-
mable resistor (IM) is determined by the R_TERM[1:0] bits (b1~0,                              sion should be enhanced depending on equipment environment.
RCF0,...). If the R_TERM[2] bit (b2, RCF0,...) is ‘1’, external impedance
matching is enabled. The configuration of the R120IN bit (b4, RCF0,...)
and the R_TERM[1:0] bits (b1~0, RCF0,...) is ignored.
Table-2 Impedance Matching Value in Receive Differential Mode
                                                   Partially Internal Impedance Matching           Fully Internal Impedance Matching
                                                                                                                                                   External Impedance Matching
                                                                  (R120IN = 0) 1                              (R120IN = 1) 1, 2
                 Cable Condition
                                                       R_TERM[2:0]                    Rr            R_TERM[2:0]                    Rr            R_TERM[2:0] 3            Rr
  E1 120 Ω twisted pair (with transformer)                   010                   120 Ω                  010                    (open)                 1XX             120 Ω
     E1 75 Ω coaxial (with transformer)                      011                                          011                                                            75 Ω
  E1 120 Ω twisted pair (transformer-less)                   010                                               (not supported)                                          120 Ω
 Note:
 1. Partially Internal Impedance Matching and Fully Internal Impedance Matching are not supported when RIM is low.
 2. Fully Internal Impedance Matching is not supported in transformer-less applications.
 3. When RIM is low, the setting of the R_TERM[2:0] bits is ignored.
                              1:1        RTIPn                                                                                              RTIPn
                                                                                                                          Rr/2
                6.0 Vpp                 Rr              IM                                                  6.0Vpp                                          IM
                                                                                                                          Rr/2              RRINGn
                                        RRINGn
                                                                                                                                                  VCOM1              VCOM0
Figure-4 Receive Differential Line Interface with Twist-                                                                                         10 µF
                     ed Pair Cable (with transformer)
                                                                                                      Note: 1. Two Rr/2 resistors should be connected to VCOM[1:0] that are
                                                                                                             coupled to ground via a 10 µF capacitor, which provide 60 Ω
                                  1:1         RTIPn                                                          common mode input resistance.
                                                                                                             2. In this mode, lightning protection should be enhanced.
                                                                                                             3. The maximum input dynamic range of RTIP/TRING pin is
         4.74 Vpp                           Rr              IM                                               -0.3 V ~3.6 V (in line monitor mode it is -0.3 V ~ 2 V)
                                            RRINGn
                                                                                              Figure-6 Receive Differential Line Interface with Twist-
                                                                                               ed Pair Cable (transformer-less, non standard compli-
                                                                                                                                        ant)
Figure-5 Receive Differential Line Interface with Coax-
                                                                                              3.2.2     EQUALIZER
                         ial Cable (with transformer)
                                                                                                  The equalizer compensates high frequency attenuation to enhance
                                                                                              receive sensitivity.
 Functional Description                                                                   20                                                                December 17, 2009


 IDT82P20516                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.2.2.1 Line Monitor
                                                                                   DSX cross
    In both E1 short haul applications, the Protected Non-Intrusive Moni-         connect point
toring can be performed between two devices. The monitored channel of                                      RTIPn
one device is in normal operation, and the monitoring channel of the                                              monitor gain
other device taps the monitored one through a high impedance bridging                                                = 0 dB
circuit (refer to Figure-7 and Figure-8).
                                                                                                         RRINGn
    After the high resistance bridging circuit, the signal arriving at RTIPn/                  R                 monitored channel
RRINGn of the monitoring channel is dramatically attenuated. To
                                                                                   R                      RTIPn
compensate this bridge resistive attenuation, Monitor Gain can be used
to boost the signal by 20 dB, 26 dB or 32 dB, as selected by the MG[1:0]                                         monitor gain
                                                                                                          r
bits (b1~0, RCF2,...). For normal operation, the Monitor Gain should be                                         = 20/26/32 dB
set to 0 dB, i.e., the Monitor Gain of the monitored channel should be 0                                 RRINGn
dB.                                                                                                             monitoring channel
    The monitoring channel can be configured to any of the External,                   Figure-7 Receive Path Monitoring
Partially Internal or Fully Internal Impedance Matching mode. Here the
external r or internal IM is used for voltage division, not for impedance
matching. That is, the r (IM) and the two R make up of a resistance                DSX cross
                                                                                  connect point
bridge. The resistive attenuation of this bridge is 20lg(r/(2R+r)) dB.                                      TTIPn
    Note that line monitor is only available in differential line interface.                                        monitor gain
                                                                                                                       = 0 dB
3.2.2.2 Receive Sensitivity
                                                                                                            TRINGn
    The receive sensitivity is the minimum range of receive signal level                         R
                                                                                                                 monitored channel
for which the receiver recovers data error-free with -18 dB interference
signal added.                                                                          R                  RTIPn
                                                                                                                 monitor gain
    For Receive Differential line interface, the receive sensitivity is -15                               r     = 20/26/32 dB
dB.
                                                                                                         RRINGn
    For Receive Single Ended line interface, the receive sensitivity is -12                                     monitoring channel
dB.
                                                                                      Figure-8 Transmit Path Monitoring
 Functional Description                                                       21                                  December 17, 2009


 IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.2.3    SLICER                                                                     If data is output on RDPn and RDNn in NRZ format and the recov-
                                                                               ered clock is output on RCLKn, the receive system interface is in Dual
    The Slicer is used to generate a standard amplitude mark or a space
                                                                               Rail NRZ Format mode. In this mode, the data is un-decoded and
according to the amplitude of the input signals. The input signal is sliced
                                                                               updated on the active edge of RCLKn. RCLKn outputs a 2.048 MHz (in
at 50% of the peak value.
                                                                               E1 mode) clock.
3.2.4    RX CLOCK & DATA RECOVERY
                                                                                    If data is output on RDPn and RDNn in RZ format and the recovered
    The Rx Clock & Data Recovery is used to recover the clock signal           clock is output on RCLKn, the receive system interface is in Dual Rail
from the received data. It is accomplished by an integrated Digital Phase      RZ Format mode. In this mode, the data is un-decoded and updated on
Locked Loop (DPLL). The recovered clock tracks the jitter in the data          the active edge of RCLKn. RCLKn outputs a 2.048 MHz (in E1 mode)
output from the Slicer and keeps the phase relationship between data           clock.
and clock during the absence of the incoming pulse.                                 If data is output on RDPn and RDNn in RZ format directly after
3.2.5    DECODER                                                               passing through the Slicer, the receive system interface is in Dual Rail
                                                                               Sliced mode. In this mode, the data is raw sliced and un-decoded.
    The Decoder is used only when the receive system interface is in
Single Rail NRZ Format mode. When the receive system interface is in                Table-3 summarizes the multiplex pin used in different receive
other modes, the Decoder is bypassed automatically. (Refer to                  system interface.
Section 3.2.6 Receive System Interface for the description of the receive
                                                                               Table-3 Multiplex Pin Used in Receive System Interface
system interface).
    In E1 mode, the received signal is decoded by AMI or HDB3 line                                                 Multiplex Pin Used On Receive System
code rule. The line code rule is selected by the R_CODE bit (b2,                      Receive System                               Interface
                                                                                         Interface
RCF1,...).
                                                                                                               RDn / RDPn            RDNn                RCLKn
3.2.6    RECEIVE SYSTEM INTERFACE
                                                                                 Single Rail NRZ Format            RDn 1                                RCLKn 2
    The received data can be output to the system side in four modes:
Single Rail NRZ Format mode, Dual Rail NRZ Format mode, Dual Rail                 Dual Rail NRZ Format            RDPn 1            RDNn 1              RCLKn 2
RZ Format mode and Dual Rail Sliced mode, as selected by the
                                                                                   Dual Rail RZ Format            RDPn 1            RDNn 1              RCLKn 2
R_MD[1:0] bits (b1~0, RCF1).
    If data is output on RDn in NRZ format and the recovered clock is                 Dual Rail Sliced            RDPn 1            RDNn 1
output on RCLKn, the receive system interface is in Single Rail NRZ              Note:
Format mode. In this mode, the data is decoded and updated on the                1. The active level on RDn, RDPn and RDNn is selected by the RD_INV bit (b3,
active edge of RCLKn. RCLKn outputs a 2.048 MHz (in E1 mode) clock.              RCF1,...).
                                                                                 2. The active edge of RCLKn is selected by the RCK_ES bit (b4, RCF1,...).
 Functional Description                                                     22                                                           December 17, 2009


  IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.2.7     RECEIVER POWER DOWN                                                     3.3       TRANSMIT PATH
    Set the R_OFF bit (b5, RCF0,...) to ‘1’ will power down the corre-            3.3.1     TRANSMIT SYSTEM INTERFACE
sponding receiver.
                                                                                      The data from the system side is input to the device in three modes:
    In this way, the corresponding receive circuit is turned off and the          Single Rail NRZ Format mode, Dual Rail NRZ Format mode and Dual
RTIPn/RRINGn pins are forced to High-Z state. The pins on receive                 Rail RZ Format mode, as selected by the T_MD[1:0] bits (b1~0,
system interface (including RDn/RDPn, RDNn, RCLKn) will be in High-Z              TCF1,...).
state if the RHZ bit (b6, RCF0,...) is ‘1’ or in low level if the RHZ bit (b6,
RCF0,...) is ‘0’.                                                                     If data is input on TDn in NRZ format and a 2.048 MHz (in E1 mode)
                                                                                  clock is input on TCLKn, the transmit system interface is in Single Rail
    After clearing the R_OFF bit (b5, RCF0,...), it will take 1 ms for the        NRZ Format mode. In this mode, the data is encoded and sampled on
receiver to achieve steady state, i.e., to return to the previous configura-      the active edge of TCLKn.
tion and performance.
                                                                                      If data is input on TDPn and TDNn in NRZ format and a 2.048 MHz
                                                                                  (in E1 mode) clock is input on TCLKn, the transmit system interface is in
                                                                                  Dual Rail NRZ Format mode. In this mode, the data is pre-encoded and
                                                                                  sampled on the active edge of TCLKn.
                                                                                      If data is input on TDPn and TDNn in RZ format and no transmit
                                                                                  clock is input, the transmit system interface is in Dual Rail RZ Format
                                                                                  mode. In this mode, the data is pre-encoded.
                                                                                      Table-4 summarizes the multiplex pin used in different transmit
                                                                                  system interface.
 Functional Description                                                        23                                                   December 17, 2009


IDT82P20516                                                                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
Table-4 Multiplex Pin Used in Transmit System Interface                                              3.3.4                     WAVEFORM SHAPER
                                                                                                        The IDT82P20516 provides two ways to manipulate the pulse shape
                                     Multiplex Pin Used On Transmit System
    Transmit System
                                                                                                     before data is transmitted:
                                                    Interface
        Interface                                                                                       • Preset Waveform Template;
                                  TDn / TDPn               TDNn           TCLKn / TDNn                  • User-Programmable Arbitrary Waveform.
                                                                                                     3.3.4.1 Preset Waveform Template
 Single Rail NRZ Format              TDn 1                                    TCLKn 2
                                                                                                        In E1 applications, the waveform template meets G.703, as shown in
  Dual Rail NRZ Format               TDPn 1               TDNn 1              TCLKn 2                Figure-9. It is measured in the near end line side, as shown in Figure-10.
  Dual Rail RZ Format                TDPn 1                                    TDNn 1                   In E1 applications, the PULS[3:0] should be set to ‘0000’ if differential
 Note:
                                                                                                     signals (output from TTIP and TRING) are coupled to a 75 Ω coaxial
 1. The active level on TDn, TDPn and TDNn is selected by the TD_INV bit (b3,                        cable using Internal Impedance matching mode; the PULS[3:0] should
 TCF1,...).                                                                                          be set to ‘0001’ for other E1 interfaces. Refer to Table-5 for details.
 2. The active edge of TCLKn is selected by the TCK_ES bit (b4, TCF1,...). If TCLKn is
 missing, i.e., no transition for more than 64 E1 clock cycles, the TCKLOS_S bit (b3,
 STAT0,...) will be set. A transition from ‘0’ to ‘1’ on the TCKLOS_S bit (b3, STAT0,...) or                                 1.20
 any transition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the TCKLOS_S bit (b3, STAT0,...) will
 set the TCKLOS_IS bit (b3, INTS0,...) to ‘1’, as selected by the TCKLOS_IES bit (b3,                                        1.00
 INTES,...). When the TCKLOS_IS bit (b3, INTS0,...) is ‘1’, an interrupt will be reported
 by INT if not masked by the TCKLOS_IM bit (b3, INTM0,...).
                                                                                                                            0.80
                                                                                                     Normalized Amplitude
3.3.2     TX CLOCK RECOVERY
                                                                                                                             0.60
   The Tx Clock Recovery is used only when the transmit system inter-
face is in Dual Rail RZ Format mode. When the transmit system inter-
face is in other modes, the Tx Clock Recovery is bypassed                                                                    0.40
automatically.
   The Tx Clock Recovery is used to recover the clock signal from the                                                        0.20
data input on TDPn and TDNn.
3.3.3     ENCODER                                                                                                           0.00
   The Encoder is used only when the transmit system interface is in
                                                                                                                            -0.20
Single Rail NRZ Format mode. When the transmit system interface is in                                                               -0.6   -0.4      -0.2       0        0.2       0.4          0.6
other modes, the Encoder is bypassed automatically.                                                                                                   Time in Unit Intervals
    In E1 mode, the data to be transmitted is encoded by AMI or HDB3                                                                   Figure-9 E1 Waveform Template
line code rule. The line code rule is selected by the T_CODE bit (b2,
TCF1,...).
                                                                                                                                                  TTIPn
                                                                                                                              IDT82P20516                                      RLOAD     VOUT
                                                                                                                                                  TRINGn
                                                                                                                            Note: RLOAD = 75 Ω or 120 Ω (+ 5%)
                                                                                                     Figure-10 E1 Waveform Template Measurement Circuit
Functional Description                                                                          24                                                                       December 17, 2009


 IDT82P20516                                                                         16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
Table-5 PULS[3:0] Setting in E1 Mode                                        3.3.4.2 User-Programmable Arbitrary Waveform
                                                                                When the PULS[3:0] bits (b3~0, PULS,...) are set to ‘1XXX’, user-
             Interface Conditions                   PULS[3:0]
                                                                            programmable arbitrary waveform will be used in the corresponding
        E1 75 Ω differential interface,               0000                  channel.
   Internal Impedance matching mode                                                                                           1
                                                                                Each waveform shape can extend up to 1 --- UIs (Unit Interval), and is
               Other E1 interface                     0001                                                                    4
                                                                            divided into 20 sub-phases that are addressed by the SAMP[4:0] bits
                                                                            (b4~0, AWG0,...). The waveform amplitude of each phase is repre-
    After one of the preset waveform templates is selected, the preset
                                                                            sented by a binary byte, within the range from +63 to -63, stored in the
waveform amplitude can be adjusted to get the desired waveform.
                                                                            WDAT[6:0] bits (b6~0, AWG1,...) in signed magnitude form. The
    In E1 mode, the SCAL[5:0] bits (b5~0, SCAL,...) should be set to        maximum number +63 (D) represents the maximum positive amplitude
‘100001’ to get the standard amplitude. The adjusting is made by            of the transmit pulse while the most negative number -63 (D) represents
increasing or decreasing by ‘1’ from the standard value to scale up or      the maximum negative amplitude of the transmit pulse. Therefore, up to
down at a percentage ratio of 3%.                                           20 bytes are used.
    In summary, do the following step by step, the desired waveform will        There are eight standard templates which are stored in a local ROM.
be got based on the preset waveform template:                               One of them can be selected as reference and made some changes to
    • Select one preset waveform template by setting the PULS[3:0] bits     get the desired waveform.
       (b3~0, PULS,...);                                                        To do this, the first step is to choose a set of waveform value from the
    • Write ‘100001 to the SCAL[5:0] bits (b5~0, SCAL,...) if E1 mode is    standard templates. The selected waveform value should be the most
       selected.                                                            similar to the desired waveform shape. Table-6 to Table-7 list the sample
    • Write the scaling value to the SCAL[5:0] bits (b5~0, SCAL,...) to     data of each template.
       scale the amplitude of the selected preset waveform template (-
       this step is optional).                                                  Then modify the sample data to get the desired transmit waveform
                                                                            shape. By increasing or decreasing by ‘1’ from the standard value in the
                                                                            SCAL[5:0] bits (b5~0, SCAL,...), the waveform amplitude will be scaled
                                                                            up or down.
                                                                                In summary, do the following for the write operation:
                                                                                • Modify the sample data in the AWG1 register;
                                                                                • Write the AWG0 register to implement the write operation, includ-
                                                                                   ing:
                                                                                   - Write the sample address to the SAMP[4:0] bits (b4~0,
                                                                                     AWG0,...);
                                                                                   - Write ‘0’ to the RW bit (b5, AWG0,...);
                                                                                   - Write ‘1’ to the DONE bit (b6, AWG0,...).
                                                                                Do the following for the read operation:
                                                                                • Write the AWG0 register, including:
                                                                                   - Write sample address to the SAMP[4:0] bits (b4~0, AWG0,...);
                                                                                   - Write ‘1’ to the RW bit (b5, AWG0,...);
                                                                                   - Write ‘1’ to the DONE bit (b6, AWG0,...);
                                                                                • Read the AWG1 register to get the sample data.
                                                                                When the write operation is completed, write the scaling value to the
                                                                            SCAL[5:0] bits (b5~0, SCAL,...) to scale the amplitude of the selected
                                                                            standard waveform (- this step is optional).
                                                                                When more than one UI is used to compose the waveform template
                                                                            and the waveform amplitude is not set properly, the overlap of the two
                                                                            consecutive waveforms will make the waveform amplitude overflow (i.e.,
                                                                            exceed the maximum limitation). This overflow is captured by the
                                                                            DAC_IS bit (b7, INTS0,...) and will be reported by the INT pin if enabled
                                                                            by the DAC_IM bit (b7, INTM0,...).
 Functional Description                                                  25                                                       December 17, 2009


 IDT82P20516                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
   Refer to application note AN-513 ‘User-Programmable Arbitrary
Waveform for DSX1’ for more details.
Table-6 Transmit Waveform Value for E1 75 ohm
  SAMP[4:0]   1       2    3       4  5     6     7    8      9    10  11    12  13   14  15  16    17   18   19    20
  WDAT[6:0]  00H    00H   00H    0CH 30H   30H   30H  30H    30H  30H 30H   30H 00H  00H 00H 00H   00H  00H  00H   00H
Table-7 Transmit Waveform Value for E1 120 ohm
  SAMP[4:0]   1       2    3       4  5     6     7    8      9    10  11    12  13   14  15  16    17   18   19    20
  WDAT[6:0]  00H    00H   00H    0FH 3CH   3CH   3CH  3CH    3CH  3CH 3CH   3CH 00H  00H 00H 00H   00H  00H 00H    00H
 Functional Description                                          26                                  December 17, 2009


  IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.3.5     LINE DRIVER                                                             3.3.6     TX TERMINATION
    The Line Driver can be set to High-Z for protection or in redundant               The transmit line interface supports Transmit Differential mode and
applications.                                                                     Transmit Single Ended mode, as selected by the T_SING bit (b3,
    The following two ways will set the Line Driver to High-Z:                    TCF0,...). In Transmit Differential mode, both TTIPn and TRINGn are
    • Setting the OE pin to low will globally set all the Line Drivers to         used to transmit signals to the line side. In Transmit Single Ended mode,
       High-Z;                                                                    only TTIPn is used to transmit signal.
    • Setting the OE bit (b6, TCF0,...) to ‘0’ will set the corresponding             The line interface can be connected with E1 120 Ω twisted pair cable
       Line Driver to High-Z.                                                     or E1 75 Ω coaxial cable.
    By these ways, the functionality of the internal circuit is not affected          The transmit impedance matching is realized by using internal
and TTIPn and TRINGn will enter High-Z state immediately.                         impedance matching or external impedance matching for each channel
3.3.5.1 Transmit Over Current Protection                                          in different applications.
    The Line Driver monitors the Transmit Over Current (TOC) on the               3.3.6.1 Transmit Differential Mode
line interface. When TOC is detected, the driver’s output (i.e., output on            In Transmit Differential mode, different applications have different
TTIPn/TRINGn) is determined by the THZ_OC bit (b4, TCF0,...). If the              impedance matching. For E1 applications, both Internal and External
THZ_OC bit (b4, TCF0,...) is ‘0’, the driver’s output current (peak to            Impedance Matching are supported.
peak) is limited to 100 mA; if the THZ_OC bit (b4, TCF0,...) is ‘1’, the
                                                                                      Internal Impedance Matching circuit uses an internal programmable
driver’s output will enter High-Z. TOC is indicated by the TOC_S bit (b4,
                                                                                  resistor (IM) only.
STAT0,...). A transition from ‘0’ to ‘1’ on the TOC_S bit (b4, STAT0,...) or
any transition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the TOC_S bit (b4,             External Impedance Matching circuit uses an external resistor (Rt)
STAT0,...) will set the TOC_IS bit (b4, INTS0,...) to ‘1’, as selected by the     only.
TOC_IES bit (b4, INTES,...). When the TOC_IS bit (b4, INTS0,...) is ‘1’,              A twisted pair cable can be connected with a 1:2 (step up) trans-
an interrupt will be reported by INT if not masked by the TOC_IM bit (b4,         former or without a transformer (transformer-less), while a coaxial cable
INTM0,...).                                                                       must be connected with a 1:2 transformer.
                                                                                      The T_TERM[2:0] bits (b2~0, TCF0,...) should be set according to
                                                                                  different cable conditions, whether a transformer is used, and what kind
                                                                                  of Impedance Matching is selected.
                                                                                      Table-8 lists the recommended impedance matching value in
                                                                                  different applications. Figure-11 to Figure-13 show the connection for
                                                                                  one channel in different applications.
                                                                                      The transformer-less connection will offer a termination option with
                                                                                  reduced cost and board space. However, the waveform amplitude is not
                                                                                  standard compliant, and surge protection and common mode depres-
                                                                                  sion should be enhanced depending on equipment environment..
 Table-8 Impedance Matching Value in Transmit Differential Mode
                                                                  Internal Impedance Matching                        External Impedance Matching
                     Cable Condition
                                                           T_TERM[2:0]          Rt           PULS[3:0]       T_TERM[2:0]             Rt         PULS[3:0]
          E1 120 Ω twisted pair (with transformer)             010                              0001             111               10 Ω           0000
            E1 75 Ω coaxial (with transformer)                 011              0               0000
          E1 120 Ω twisted pair (transformer-less)             110                              0001                         (not supported)
  Functional Description                                                       27                                                     December 17, 2009


IDT82P20516                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                       TTIPn        1:2
                                                                                   TTIPn            1:2
                              Rt                                                           Rt
                    IM                    6.0 Vpp
                              Rt                                             IM                           4.74 Vpp
                                                                                           Rt
                       TRINGn
                                                                                   TRINGn
  Figure-11 Transmit Differential Line Interface with    Figure-12 Transmit Differential Line Interface with Co-
        Twisted Pair Cable (with Transformer)                        axial Cable (with transformer)
                                                                                             TTIPn
                                                                                     IM            3.0Vpp
                                                                                             TRINGn
                                                                      Note: In this mode, port protection
                                                                            should be enhanced.
                                                           Figure-13 Transmit Differential Line Interface with
                                                           Twisted Pair Cable (transformer-less, non standard
                                                                                   compliant)
Functional Description                                28                                                December 17, 2009


  IDT82P20516                                                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.3.7     TRANSMITTER POWER DOWN                                                3.3.8    OUTPUT HIGH-Z ON TTIP AND TRING
    Set the T_OFF bit (b5, TCF0,...) to ‘1’ will power down the corre-             TTIPn and TRINGn can be set to High-Z state globally or on a per-
sponding transmitter.                                                           channel basis.
    In this way, the corresponding transmit circuit is turned off. The pins        The following three conditions will set TTIPn and TRINGn to High-Z
on the transmit line interface (including TTIPn and TRINGn) will be in          state globally:
High-Z state. The input on the transmit system interface (including TDn,           • Connecting the OE pin to low;
TDPn, TDNn and TCLK) is ignored. The output on the transmit system                 • Loss of MCLK (i.e., no transition on MCLK for more than 1 ms);
interface will be in High-Z state.                                                 • Power on reset, hardware reset by pulling RST to low for more
    After clearing the T_OFF bit (b5, TCF0,...), it will take 1 ms for the            than 2 µs or global software reset by writing the RST register.
transmitter to achieve steady state, i.e., return to the previous configura-       The following six conditions will set TTIPn and TRINGn to High-Z
tion and performance.                                                           state on a per-channel basis:
                                                                                   • Writing ‘0’ to the OE bit (b6, TCF0,...);
                                                                                   • Loss of TCLKn in Transmit Single Rail NRZ Format mode or
                                                                                      Transmit Dual Rail NRZ Format mode (i.e., no transition on TCLKn
                                                                                      for more than 64 XCLK1 cycles) except that the channel is in
                                                                                      Remote Loopback or transmit internal pattern with XCLK;
                                                                                   • Transmitter power down;
                                                                                   • Per-channel software reset by writing ‘1’ to the CHRST bit (b1,
                                                                                      CHCF,...);
                                                                                   • Setting the THZ_OC bit (b4, TCF0,...) to ‘1’ when transmit driver
                                                                                      over-current is detected.
                                                                                     1. XCLK is derived from MCLK. It is 2.048 MHz in E1 mode.
 Functional Description                                                      29                                                          December 17, 2009


 IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.4       JITTER ATTENUATOR (RJA & TJA)                                            The DPLL is used to generate a de-jittered clock to clock out the data
                                                                              stored in the FIFO. The DPLL can only attenuate the incoming jitter
    Two Jitter Attenuators are provided for each channel of receiver and
                                                                              whose frequency is above Corner Frequency (CF) by 20 dB per decade
transmitter. Each Jitter Attenuator can be enabled or disabled, as deter-
                                                                              falling off. The jitter whose frequency is lower than the CF passes
mined by the RJA_EN/TJA_EN bit (b3, RJA/TJA,...) respectively.
                                                                              through the DPLL without any attenuation. In E1 applications, the CF of
    Each Jitter Attenuator consists of a FIFO and a DPLL, as shown in         the DPLL is 6.77 Hz or 0.87 Hz. The CF is selected by the RJA_BW/
Figure-14.                                                                    TJA_BW bit (b0, RJA/TJA,...). The lower the CF is, the longer time is
                                                                              needed to achieve synchronization.
                                                                                   If the incoming data moves faster than the outgoing data, the FIFO
  Jittered Data                    FIFO                 De-jittered Data      will overflow. If the incoming data moves slower than the outgoing data,
                                32/64/128                                     the FIFO will underflow. The overflow and underflow are both captured
                                                                              by the RJA_IS/TJA_IS bit (b5/6, INTS0,...). The occurrence of overflow
                    write                         read                        or underflow will be reported by the INT pin if enabled by the RJA_IM/
   Jittered Clock   clock                        clock De-jittered Clock      TJA_IM bit (b5/6, INTM0,...).
                                  DPLL
                                                                                   To avoid overflow or underflow, the JA-Limit function can be enabled
                   Figure-14 Jitter Attenuator                                by setting the RJA_LIMT/TJA_LIMT bit (b4, RJA/TJA,...). When the JA-
                                                                              Limit function is enabled, the speed of the outgoing data will be adjusted
    The FIFO is used as a pool to buffer the jittered input data, then the    automatically if the FIFO is 2-bit close to its full or emptiness. Though
data is clocked out of the FIFO by a de-jittered clock. The depth of the      the JA-Limit function can reduce the possibility of FIFO overflow and
FIFO can be 32 bits, 64 bits or 128 bits, as selected by the RJA_DP[1:0]/     underflow, the quality of jitter attenuation is deteriorated.
TJA_DP[1:0] bits (b2~1, RJA/TJA,...). Accordingly, the typical delay
produced by the Jitter Attenuator is 16 bits, 32 bits or 64 bits. The 128-         The performance of the Jitter Attenuator meets ITUT I.431, G.703,
bit FIFO is used when large jitter tolerance is expected, while the 32-bit    G.736-739, G.823, G.824, ETSI 300011, ETSI TBR12/13, AT&T
FIFO is used in delay sensitive applications.                                 TR62411, TR43802, TR-TSY 009, TR-TSY 253 and TR-TRY 499. Refer
                                                                              to Section 8.10 Jitter Attenuation Characteristics for the jitter perfor-
                                                                              mance.
 Functional Description                                                    30                                                      December 17, 2009


  IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5      DIAGNOSTIC FACILITIES                                                3.5.1.2 Bipolar Violation (BPV) Insertion
    The diagnostic facilities include:                                              The BPV can only be inserted in the transmit path.
    • BPV (Bipolar Violation) / CV (Code Violation) detection and BPV               A BPV will be inserted on the next available mark in the data stream
      insertion;                                                              to be transmitted by writing a ‘1’ to the BPV_INS bit (b6, ERR,...). This
    • EXZ (Excessive Zero) detection;                                         bit will be reset once BPV insertion is done.
    • LOS (Loss Of Signal) detection;
    • AIS (Alarm Indication Signal) detection and generation;                 3.5.2        EXCESSIVE ZEROES (EXZ) DETECTION
    • Pattern generation and detection, including PRBS (Pseudo Ran-                 EXZ is monitored in both the receive path and the transmit path.
      dom Bit Sequence), ARB (Arbitrary Pattern) and IB (Inband Loop-
                                                                                    Different line code has different definition of the EXZ. The
      back).
                                                                              IDT82P20516 provides two standards of EXZ definition for each kind of
    The above defects, alarms or patterns can be counted by an internal       line code rule. The standards are ANSI and FCC, as selected by the
Error Counter, indicated by the respective interrupt bit.                     EXZ_DEF bit (b7, ERR,...). Refer to Table-9 for details.
3.5.1 BIPOLAR VIOLATION (BPV) / CODE VIOLATION (CV)                           Table-9 EXZ Definition
DETECTION AND BPV INSERTION
3.5.1.1 Bipolar Violation (BPV) / Code Violation (CV) Detection                                                                   Definition
                                                                                    Line Code
                                                                                        Rule
    BPV/CV is monitored in both the receive path and the transmit path.                                   ANSI (EXZ_DEF = 0)                  FCC (EXZ_DEF = 1)
BPV is detected when the data is AMI coded and CV is detected when
                                                                                        AMI          An EXZ is detected when             E1 - An EXZ is detected
the data is B8ZS/HDB3 coded. If the transmit system interface is in
                                                                                                     any string of more than 15          when any string of more
Transmit Single Rail NRZ Format mode, the BPV/CV detection is
                                                                                                     consecutive          ‘0’s     are   than 15 consecutive ‘0’s are
disabled in the transmit path automatically.                                                         received.                           received.
    A BPV is detected when two consecutive pulses of the same polarity                 B8ZS          An EXZ is detected when             An EXZ is detected when
are received.                                                                                        any string of more than 7           any string of more than 7
    A CV is detected when two consecutive BPVs of the same polarity                                  consecutive          ‘0’s     are   consecutive      ‘0’s     are
that are not a part of the B8ZS/HDB3 zero substitution are received.                                 received.                           received.
    When BPV/CV is detected in the receive path, the Line Bipolar Viola-               HDB3          An EXZ is detected when             An EXZ is detected when
                                                                                                     any string of more than 3           any string of more than 3
tion LBPV_IS bit (b4, INTS2,...) will be set and an interrupt will be
                                                                                                     consecutive          ‘0’s     are   consecutive      ‘0’s     are
reported by INT if not masked by the LBPV_IM bit (b4, INTM2,...).
                                                                                                     received.                           received.
    When BPV/CV is detected in the transmit path, the System Bipolar            Note:
Violation SBPV_IS bit (b5, INTS2,...) will be set and an interrupt will be      If the transmit system interface is in Transmit Single Rail NRZ Format mode, the EXZ is
reported by INT if not masked by the SBPV_IM bit (b5, INTM2,...).               detected according to the standard of AMI.
                                                                                    When EXZ is detected in the receive path, the LEXZ_IS bit (b2,
                                                                              INTS2,...) will be set and an interrupt will be reported by INT if not
                                                                              masked by the LEXZ_IM bit (b2, INTM2,...).
 Functional Description                                                    31                                                                 December 17, 2009


  IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.3     LOSS OF SIGNAL (LOS) DETECTION                                                 Two pins (LLOS0 and LLOS) are dedicated to LLOS indication.
    The IDT82P20516 detects three kinds of LOS:                                      Whether LLOS is detected in channel 0 or not, LLOS0 is high for a
    • LLOS: Line LOS, detected in the receive path;                                  CLKE1 clock cycle to indicate the start position on LLOS. LLOS indi-
    • SLOS: System LOS, detected in the transmit system side;                        cates LLOS status of all 16 channels in a serial format and repeats every
    • TLOS: Transmit LOS, detected in the transmit line side.                        17 cycles. Refer to Figure-15. LLOS0 and LLOS are updated on the
                                                                                     rising edge of CLKE1. When the clock output on CLKE1 is disabled,
3.5.3.1 Line LOS (LLOS)                                                              LLOS0 and LLOS will be held in High-Z state. The output on CLKE1 is
    The amplitude and density of the data received from the line side are            controlled by the CLKE1_EN bit (b3, CLKG) and the CLKE1 bit (b2,
monitored. When the amplitude of the data is less than Q Vpp for N                   CLKG). Refer to section 8.9 on page 105 for CLKE1 timing characteris-
consecutive pulse intervals, LLOS is declared. When the amplitude of                 tics.
the data is more than P Vpp and the average density of marks is at least                 LLOS may be counted by an internal Error Counte. Refer to
12.5% for M consecutive pulse intervals starting with a mark, LLOS is                Section 3.5.6 Error Counter.
cleared. Here Q is defined by the ALOS[2:0] bits (b6~4, LOS,...). P is the
sum of Q and 250 mVpp. N and M are defined by the LAC bit (b7,                           During LLOS, in Receive Single Rail NRZ Format mode, Receive
LOS,...). Refer to Table-10 for details.                                             Dual Rail NRZ Format mode and Receive Dual Rail RZ Format mode,
                                                                                     RDPn/RDNn output low level. In Receive Dual Rail Sliced mode RDPn/
    In E1 mode, LLOS detection supports G.775 and ETSI 300233/I.431.                 RDNn still output sliced data. RCLKn (if available) outputs high level or
The criteria are selected by the LAC bit (b7, LOS,...).
                                                                                     XCLK1, as selected by the RCKH bit (b7, RCF0,...).
    When LLOS is detected, the LLOS_S bit (b0, STAT0,...) will be set. A
                                                                                         During LLOS, if any of AIS, pattern generation in the receive path or
transition from ‘0’ to ‘1’ on the LLOS_S bit (b0, STAT0,...) or any transi-
                                                                                     Digital Loopback is enabled or automatic digital loopback happens,
tion (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the LLOS_S bit (b0, STAT0,...) will
                                                                                     RDPn/RDNn and RCLKn output corresponding data and clock, and the
set the LLOS_IS bit (b0, INTS0,...) to ‘1’, as selected by the LOS_IES bit
                                                                                     setting of the RCKH bit (b7, RCF0,...) is ignored. Refer to the corre-
(b1, INTES,...). When the LLOS_IS bit (b0, INTS0,...) is ‘1’, an interrupt
                                                                                     sponding chapters for details.
will be reported by INT if not masked by the LLOS_IM bit (b0, INTM0,...).
                                                                                           1. XCLK is derived from MCLK. It is 2.048 MHz in E1 mode.
Table-10 LLOS Criteria
     Operation
                       LAC          Criteria            LLOS Declaring                                             LLOS Clearing
        Mode
                        0            G.775          below Q Vpp, N = 32 bits     above P Vpp, 12.5% mark density with less than 16 consecutive zeros, M = 32 bits
         E1             1        ETSI 300233/      below Q Vpp, N = 2048 bits    above P Vpp, 12.5% mark density with less than 16 consecutive zeros, M = 32 bits
                                      I.431
                             One LLOS Indication Cycle
                   0       1      2       3              14    15     0
   CLKE1
   LLOS0
   LLOS
                 CH0 CH1                               CH14 CH15 CH0
               Figure-15 LLOS Indication on Pins
 Functional Description                                                           32                                                           December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.3.2 System LOS (SLOS)                                                               In E1 mode, SLOS detection supports G.775 and ETSI 300233/
    SLOS can only be detected when the transmit system interface is in              I.431. The criteria are selected by the LAC bit (b7, LOS,...).
Dual Rail NRZ Format mode or in Dual Rail RZ Format mode.                               When SLOS is detected, the SLOS_S bit (b1, STAT0,...) will be set. A
                                                                                    transition from ‘0’ to ‘1’ on the SLOS_S bit (b1, STAT0,...) or any transi-
    The amplitude and density of the data input from the transmit system
                                                                                    tion (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the SLOS_S bit (b1, STAT0,...) will
side are monitored. When the input ‘0’s are equal to or more than N
                                                                                    set the SLOS_IS bit (b1, INTS0,...) to ‘1’, as selected by the LOS_IES bit
consecutive pulse intervals, SLOS is declared. When the average
                                                                                    (b1, INTES,...). When the SLOS_IS bit (b1, INTS0,...) is ‘1’, an interrupt
density of marks is at least 12.5% for M consecutive pulse intervals
                                                                                    will be reported by INT if not masked by the SLOS_IM bit (b1, INTM0,...).
starting with a mark, SLOS is cleared. Here N and M are defined by the
LAC bit (b7, LOS,...). Refer to Table-11 for details.                                   SLOS may be counted by an internal Error Counter. Refer to
                                                                                    Section 3.5.6 Error Counter.
Table-11 SLOS Criteria
     Operation
       Mode
                       LAC             Criteria                    SLOS Declaring 1                                               SLOS Clearing 1
                         0              G.775      no pulse detected for N consecutive pulse intervals,         12.5% mark density with less than 16 consecutive
                                                                       N = 32 bits                                    zeros for M consecutive pulse intervals,
                                                                                                                                     M = 32 bits
         E1
                         1         ETSI 300233/    no pulse detected for N consecutive pulse intervals,         12.5% mark density with less than 16 consecutive
                                        I.431                         N = 2048 bits                                   zeros for M consecutive pulse intervals,
                                                                                                                                     M = 32 bits
 Note:
 1. System input ports are schmitt-trigger inputs)
 Functional Description                                                         33                                                          December 17, 2009


  IDT82P20516                                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.3.3 Transmit LOS (TLOS)                                                                        The middle two columns list the internal operation status. In the right two
     The amplitude and density of the data output on the transmit line side                        columns, the TLOS_S bit (b2, STAT0,...) of the two channels indicates
are monitored. When the amplitude of the data is less than a certain                               the TLOS status in the transmit line side.
voltage for a certain period, TLOS is declared. The voltage is defined by
the TALOS[1:0] bits (b3~2, LOS,...). The period is defined by the                                                                                Channel #1
TDLOS[1:0] bits (b1~0, LOS,...). When a valid pulse is detected, i.e., the
                                                                                                         TTIPn                          Line
amplitude is above the setting in the TALOS[1:0] bits (b3~2, LOS,...),
TLOS is cleared.                                                                                        TRINGn                         Driver
     When TLOS is detected, the TLOS_S bit (b2, STAT0,...) will be set. A
transition from ‘0’ to ‘1’ on the TLOS_S bit (b2, STAT0,...) or any transi-                                                                     TLOS
                                                                                                                                                                    TLOS
tion (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the TLOS_S bit (b2, STAT0,...) will                                                              Detector
set the TLOS_IS bit (b2, INTS0,...) to ‘1’, as selected by the TLOS_IES
bit (b2, INTES,...). When the TLOS_IS bit (b2, INTS0,...) is ‘1’, an inter-
rupt will be reported by INT if not masked by the TLOS_IM bit (b2,
INTM0,...).
                                                                                                                                                 Channel #2
     TLOS may be counted by an internal Error Counter. Refer to
Section 3.5.6 Error Counter.                                                                             TTIPn                          Line
     TLOS can be used to monitor the LOS in the transmit line side                                      TRINGn                         Driver
between two channels. The connection between the two channels is
shown in Figure-16. The two channels can be of the same device or
                                                                                                                                                TLOS
different devices on the premises that the transmit line interfaces are in                                                                                          TLOS
                                                                                                                                              Detector
the same mode and at least the output of one channel is in High-Z state.
Table-12 lists each results in this case. In the left two columns, the OE
bit (b6, TCF0,...) of the two channels controls the output status in the                               Figure-16 TLOS Detection Between Two Channels
transmit line side to ensure that at least one channel is in High-Z state.
Table-12 TLOS Detection Between Two Channels
       Output Status ~ Controlled By the OE Bit                                 Internal Operation Status                     TLOS Status ~ Indicated By the TLOS_S Bit
         Channel #1                    Channel #2                       Channel #1                       Channel #2              Channel #1               Channel #2
         Normal ~ 1                     High-Z ~ 0                         Normal                        (don’t-care)           No TLOS ~ 0               No TLOS ~ 0
         Normal ~ 1                    High-Z ~ 0                          Failure                         Normal            TLOS Detected ~ 1 *       TLOS Detected ~ 1
          High-Z ~ 0                   Normal ~ 1                        (don’t-care)                      Normal               No TLOS ~ 0               No TLOS ~ 0
          High-Z ~ 0                   Normal ~ 1                          Normal                          Failure            TLOS Detected ~ 1       TLOS Detected ~ 1 *
          High-Z ~ 0                   High-Z ~ 0                        (don’t-care)                    (don’t-care)         TLOS Detected ~ 1        TLOS Detected ~ 1
  Note:
  * The TLOS_S bit (b2, STAT0,...) may not be set if there is any catastrophic failure in the channel.
 Functional Description                                                                         34                                                  December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.4 ALARM INDICATION SIGNAL (AIS) DETECTION AND GEN-
ERATION
3.5.4.1 Alarm Indication Signal (AIS) Detection
    AIS is monitored in both the receive path and the transmit path.
    When the mark density in the received data or in the data input from
the transmit system side meets certain criteria, AIS is declared or
cleared. In E1 mode, the criteria are in compliance with ITU G.775 or
ETSI 300233, as selected by the LAC bit (b7, LOS,...). Refer to Table-13
for details.
Table-13 AIS Criteria
                                                       ITU G.775 for E1 (LAC = 0)                                          ETSI 300233 for E1 (LAC = 1)
                                Less than 3 zeros are received in each of two consecutive 512-bit data Less than 3 zeros are received in a 512-bit data
       AIS Declaring
                                streams.                                                                      stream.
                                3 or more zeros are received in each of two consecutive 512-bit data 3 or more zeros are received in a 512-bit data stream.
        AIS Clearing
                                streams.
    When AIS is detected in the receive path, the LAIS_S bit (b6,                  3.5.4.2 (Alarm Indication Signal) AIS Generation
STAT1,...) will be set. A transition from ‘0’ to ‘1’ on the LAIS_S bit (b6,            AIS can be generated automatically in the receive path and the
STAT1,...) or any transition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the LAIS_S    transmit path.
bit (b6, STAT1,...) will set the LAIS_IS bit (b6, INTS1,...) to ‘1’, as
selected by the AIS_IES bit (b6, INTES,...). When the LAIS_IS bit (b6,                 In the receive path, when the ASAIS_LLOS bit (b2, AISG,...) is set,
INTS1,...) is ‘1’, an interrupt will be reported by INT if not masked by the       AIS will be generated automatically once LLOS is detected. When the
LAIS_IM bit (b6, INTM1,...).                                                       ASAIS_SLOS bit (b3, AISG,...) is set, AIS will be generated automati-
                                                                                   cally once SLOS is detected. When AIS is generated, RDPn/RDNn
    When AIS is detected in the transmit path, the SAIS_S bit (b7,                 output all ‘1’s. RCLKn (if available) outputs XCLK.
STAT1,...) will be set. A transition from ‘0’ to ‘1’ on the SAIS_S bit (b7,
STAT1,...) or any transition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the               In the transmit path, when the ALAIS_LLOS bit (b0, AISG,...) is set,
SAIS_S bit (b7, STAT1,...) will set the SAIS_IS bit (b7, INTS1,...) to ‘1’,        AIS will be generated automatically once LLOS is detected. When the
as selected by the AIS_IES bit (b6, INTES,...). When the SAIS_IS bit               ALAIS_SLOS bit (b1, AISG,...) is set, AIS will be generated automati-
(b7, INTS1,...) is ‘1’, an interrupt will be reported by INT if not masked by      cally once SLOS is detected. When AIS is generated, TTIPn/TRINGn
the SAIS_IM bit (b7, INTM1,...).                                                   output all ‘1’s.
    AIS may be counted by an internal Error Counte. Refer to                           In the transmit path, the AIS transmission is controled by the TXAIS
Section 3.5.6 Error Counter.                                                       bit (b4, AISG,...). When the TXAIS bit (b4, AISG,...) is set to ‘1’, all ‘1’s
                                                                                   pattern is transmitted at TTIPn/TRINGn.
                                                                                       AIS generation uses XCLK1 as reference clock.
                                                                                       If pattern (including PRBS, ARB and IB) is generated in the same
                                                                                   direction, the priority of pattern generation is higher. The generated
                                                                                   pattern will overwrite automatic AIS. Refer to Section 3.5.5.1 Pattern
                                                                                   Generation for the output data and clock.
                                                                                         1. XCLK is derived from MCLK. It is 2.048 MHz in E1 mode.
 Functional Description                                                         35                                                           December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.5 PRBS, QRSS, ARB AND IB PATTERN GENERATION AND                                    If PRBS or ARB is selected to be generated, the following two steps
DETECTION                                                                          can be optionally implemented after the pattern is generated:
    The pattern includes: Pseudo Random Bit Sequence (PRBS), Quasi-                    • Insert a single bit error by writing ‘1’ to the ERR_INS bit (b5,
                                                                                          ERR,...);
Random Signal Source (QRSS), Arbitrary Pattern (ARB) and Inband
Loopback (IB).                                                                         • Invert the generated pattern by setting the PAG_INV bit (b2,
                                                                                          PG,...).
3.5.5.1 Pattern Generation
                                                                                       If pattern is generated in the receive path, the generated pattern
    The pattern can be generated in the receive path or the transmit               should be encoded by using AMI or HDB3 (for E1) in Receive Dual Rail
path, as selected by the PG_POS bit (b3, PG,...).                                  NRZ Format mode, Receive Dual Rail RZ Format mode and Receive
    The pattern to be generated is selected by the PG_EN[1:0] bits                 Dual Rail Sliced mode. The encoding rule is selected by the R_CODE
(b5~4, PG,...).                                                                    bit (b2, RCF1,...).
    If PRBS is selected, three kinds of PRBS patterns with maximum                     If pattern is generated in the transmit path, the generated pattern
zero restriction according to ITU-T O.151 and AT&T TR62411 are                     should be encoded by using AMI or HDB3 (for E1). The encoding rule is
provided. They are: (2^20 - 1) QRSS per O.150-4.5, (2^15 - 1) PRBS                 selected by the T_CODE bit (b2, TCF1,...).
per O.152 and (2^11 - 1) PRBS per O.150, as selected by the                            The pattern generation is shown in Figure-17 and Figure-18.
PRBG_SEL[1:0] bits (b1~0, PG,...).
                                                                                                                    PG_EN[1:0]              PG_CK
    If ARB is selected, the content is programmed in the ARB[23:0] bits
(b7~0, ARBH~ARBM~ARBL,...).
                                                                                                                 PRBS/ARB/IB                         XCLK
    If IB is selected, the length of the IB code can be 3 to 8 bits, as deter-                                  pattern generator                     TCLK/RCLK
mined by the IBGL[1:0] bits (b5~4, IBL,...). The content is programmed
in the IBG[7:0] bits (b7~0, IBG,...).
    The selected pattern is transmitted repeatedly until the PG_EN[1:0]                                     PG_POS
bits (b5~4, PG,...) is set to ‘00’.
    When pattern is generated in the receive path, the reference clock is
XCLK or the recovered clock from the received signal, as selected by                   TTIPn/TRINGn                                            TDPn/TDNn/TCLKn
the PG_CK bit (b6, PG,...). The selected reference clock is also output                                        CHn
on RCLKn (if available).                                                               RTIPn/RRINGn                                            RDPn/RDNn/RCLKn
    When pattern is generated in the transmit path, the reference clock is
XCLK1 or the transmit clock, as selected by the PG_CK bit (b6, PG,...).                              Figure-17 Pattern Generation (1)
The transmit clock refers to the clock input on TCLKn (in Transmit Single
Rail NRZ Format mode and in Transmit Dual Rail NRZ Format mode) or                           PRBG_SEL[1:0]
the clock recovered from the data input on TDPn and TDNn (in Transmit
Dual Rail RZ Format mode).                                                                                   PG_EN[1:0]       ERR_INS
                                                                                           PRBS generation                                       PAG_INV
    In summary, do the followings step by step to generate pattern:                            2^11-1
    • Select the generation direction by the PG_POS bit (b3, PG,...);                          2^15-1
    • Select the reference clock by the PG_CK bit (b6, PG,...);                                2^20-1
                                                                                                                           Single bit error
    • Select the PRBS pattern by the PRBG_SEL[1:0] bits (b1~0, PG,...)                                                         insert
                                                                                                                                                   invert
        when PRBS is to be generated; program the ARB pattern in the                         24 bits ARB
        ARB[23:0] bits (b7~0, ARBH~ARBM~ARBL,...) when ARB is to be                           ARB[23:0]
        generated; or set the length and the content of the IB code in the
        IBGL[1:0] bits (b5~4, IBL,...) and in the IBG[7:0] bits (b7~0, IBG,...)                      Figure-18 Pattern Generation (2)
        respectively when IB is to be generated;
                                                                                       The priority of pattern generation is higher than that of AIS genera-
    • Set the PG_EN[1:0] bits (b5~4, PG,...) to generate the pattern.
                                                                                   tion. If they are generated in the same direction, the generated pattern
       1. XCLK is derived from MCLK. It is 2.048 MHz in E1 mode.
                                                                                   will overwrite the generated AIS.
 Functional Description                                                         36                                                          December 17, 2009


 IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.5.2 Pattern Detection                                                           The priority of decoding, data inversion, pattern re-generation, bit
    Data received from the line side or data input from the transmit            programming and pattern comparison is shown in Figure-19.
system side may be extracted for pattern detection. The direction of data
extraction is determined by the PD_POS bit (b3, PD,...). One of PRBS or           from Rx path                         Data
                                                                                                   Decoding                                      Comparison
ARB pattern is selected for detection and IB detection is always active.            or Tx path                      Inversion
    If data is extracted from the receive path, before pattern detection the                                                      PRBS Re-
data should be decoded by using AMI or HDB3 (for E1). The decoding                                                                Generation
rule is selected by the R_CODE bit (b2, RCF1,...).
                                                                                                                                  ARB[23:0]
    If data is extracted from the transmit path, before pattern detection                                                        Programming
the data should be decoded by using AMI or HDB3 (for E1) in Transmit
Dual Rail NRZ Format mode and Transmit Dual Rail RZ Format mode.
The decoding rule is selected by the T_CODE bit (b2, TCF1,...).                                 Figure-19 PRBS / ARB Detection
Pseudo Random Bit Sequence (PRBS) /Arbitrary Pattern (ARB)                          During comparison, if the extracted data coincides with the re-gener-
Detection                                                                       ated PRBS pattern or the programmed ARB pattern for more than 64-bit
                                                                                hopping window, the pattern is synchronized and the PA_S bit (b5,
    The extracted data can be optionally inverted by the PAD_INV bit
                                                                                STAT1,...) will be set.
(b2, PD,...) before PRBS/ARB detection.
                                                                                    In synchronization state, if more than 6 PRBS/ARB errors are
    The extracted data is used to compare with the desired pattern. The
                                                                                detected in a 64-bit hopping window, the pattern is out of synchroniza-
desired pattern is re-generated from the extracted data if the desired
                                                                                tion and the PA_S bit (b5, STAT1,...) will be cleared.
pattern is (2^20 - 1) QRSS per O.150-4.5, (2^15 - 1) PRBS per O.152 or
(2^11 - 1) PRBS per O.150; or the desired pattern is programmed in the              In synchronization state, each mismatched bit will generate a PRBS/
ARB[23:0] bits (b7~0, ARBH~ARBM~ARBL,...) if the desired pattern is             ARB error. When a PRBS/ARB error is detected during the synchroniza-
ARB. The desired pattern is selected by the PAD_SEL[1:0] bits (b1~0,            tion, the ERR_IS bit (b1, INTS2,...) will be set and an interrupt will be
PD,...).                                                                        reported by INT if not masked by the ERR_IM bit (b1, INTM2,...). The
                                                                                PRBS/ARB error may be counted by an internal Error Counter. Refer to
    In summary, do the followings step by step to detect PRBS/ARB:
                                                                                Section 3.5.6 Error Counter.
    • Select the detection direction by the PD_POS bit (b3, PD,...);
    • Set the ARB[23:0] bits (b7~0, ARBH~ARBM~ARBL,...) if the ARB                  A transition from ‘0’ to ‘1’ on the PA_S bit (b5, STAT1,...) or any tran-
       pattern is desired - this step is omitted if the PRBS pattern is         sition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the PA_S bit (b5, STAT1,...) will
       desired;                                                                 set the PA_IS bit (b5, INTS1,...) to ‘1’, as selected by the PA_IES bit (b5,
    • Select the desired PRBS/ARB pattern by the PAD_SEL[1:0] bits              INTES,...). When the PA_IS bit (b5, INTS1,...) is ‘1’, an interrupt will be
       (b1~0, PD,...).                                                          reported by INT if not masked by the PA_IM bit (b5, INTM1,...).
 Functional Description                                                      37                                                        December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
Inband Loopback (IB) Detection                                                   respectively, as selected by the IB_IES bit (b0, INTES,...). When the
    The extracted data is used to compare with the target IB code. The           IBA_IS/IBD_IS bit (b1/b0, INTS1,...) is ‘1’, an interrupt will be reported
length of the target activate/deactivate IB code can be 3 to 8 bits, as          on INT if not masked by the IBA_IM/IBD_IM bit (b1/b0, INTM1,...).
determined by the IBAL[1:0]/IBDL[1:0] bits (b3~2/b1~0, IBL,...). The             3.5.6     ERROR COUNTER
content of the target activate/deactivate IB code is programmed in the
                                                                                     An internal 16-bit Error Counter is used to count one of the following
IBA[7:0]/IBD[7:0] bits (b7~0, IBDA/IBDD,...). Refer to Figure-20.
                                                                                 errors:
                                                                                     • LBPV: BPV/CV detected in the receive path (line side);
          from Rx path                                                               • LEXZ: EXZ detected in the receive path (line side);
                         Decoding                          Comparison
            or Tx path                                                               • LBPV + LEXZ: BPV/CV and EXZ detected in the receive path (line
                                                                                        side);
                                                                                     • SBPV: BPV/CV detected in the transmit path (system side) (dis-
                                          Target code -                                 abled in Transmit Single Rail NRZ Format mode);
                                        length & content                             • SEXZ: EXZ detected in the transmit path (system side);
                                          programming                                • SBPV + SEXZ: BPV/CV and EXZ detected in the transmit path
                       Figure-20 IB Detection                                           (system side) (disabled in Transmit Single Rail NRZ Format
                                                                                        mode);
    During comparison, if the extracted data coincides with the target               • PRBS/ARB error.
activate/deactivate IB code with no more than 10-2 bit error rate for a              The CNT_SEL[2:0] bits (b4~2, ERR,...) select one of the above
certain period, the IB code is detected. The period depends on the               errors to be counted.
setting of the AUTOLP bit (b3, LOOP,...).
                                                                                     The Error Counter is buffered. It is updated automatically or manu-
    If the AUTOLP bit (b3, LOOP,...) is ‘0’, Automatic Digital/Remote            ally, as determined by the CNT_MD bit (b1, ERR,...).
Loopback is disabled. In this case, when the activate IB code is detected
for more than 40 ms, the IBA_S bit (b1, STAT1,...) will be set to indicate           The Error Counter is accessed by reading the ERRCH and ERRCL
the activate IB code detection; when the deactivate IB code is detected          registers.
for more than 40 ms (T1/J1 mode) / 30 ms (E1 mode), the IBD_S bit (b0,           3.5.6.1 Automatic Error Counter Updating
STAT1,...) will be set to indicate the deactivate IB code detection.
                                                                                     When the CNT_MD bit (b1, ERR,...) is ‘1’, the Error Counter is
    If the AUTOLP bit (b3, LOOP,...) is ‘1’, Automatic Digital/Remote            updated every one second automatically.
Loopback is enabled. In this case, when the activate IB code is detected
                                                                                     The one-second timer uses MCLK as clock reference. The expiration
for more than 5.1 seconds, the IBA_S bit (b1, STAT1,...) will be set to
                                                                                 of each one second will set the TMOV_IS bit (b0, INTTM) and induce an
indicate the activate IB code detection. The detection of the activate IB
                                                                                 interrupt reported by INT if not masked by the TMOV_IM bit (b0, GCF).
code in the receive path will activate Remote Loopback or the detection
of the activate IB code in the transmit path will activate Digital Loopback          When each one second expires, the Error Counter transfers the
(refer to Section 3.5.7.2 Remote Loopback & Section 3.5.7.3 Digital              accumulated error numbers to the ERRCH and ERRCL registers and
Loopback). When the deactivate IB code is detected for more than 5.1             the Error Counter will be cleared to start a new round counting. The
seconds, the IBD_S bit (b0, STAT1,...) will be set to indicate the deacti-       ERRCH and ERRCL registers should be read in the next second, other-
vate IB code detection. The detection of the deactivate IB code in the           wise they will be overwritten.
receive path will deactivate Remote Loopback or the detection of the                 When the ERRCH and ERRCL registers are all ‘1’s and there is still
deactivate IB code in the transmit path will deactivate Digital Loopback         error to be accumulated, the registers will be overflowed. The overflow is
(refer to Section 3.5.7.2 Remote Loopback & Section 3.5.7.3 Digital              indicated by the CNTOV_IS bit (b0, INTS2,...) and will induce an inter-
Loopback).                                                                       rupt reported by INT if not masked by the CNTOV_IM (b0, INTM2,...).
    A transition from ‘0’ to ‘1’ on the IBA_S/IBD_S bit (b1/b0, STAT1,...)           The process of automatic Error Counter updating is illustrated in
or any transition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the IBA_S/IBD_S bit    Figure-21.
(b1/b0, STAT1,...) will set the IBA_IS/IBD_IS bit (b1/b0, INTS1,...) to ‘1’
 Functional Description                                                       38                                                   December 17, 2009


IDT82P20516                                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                                                              3.5.6.2 Manual Error Counter Updating
         Automatic Error Counter Updating
                    (CNT_MD = 1)                                  When the CNT_MD bit (b1, ERR,...) is ‘0’, the Error Counter is
                                                              updated manually.
                                                                  When there is a transition from ‘0’ to ‘1’ on the CNT_STOP bit (b0,
                                                              ERR,...), the Error Counter transfers the accumulated error numbers to
                       Counting                               the ERRCH and ERRCL registers and the Error Counter will be cleared
                                                              to start a new round counting. The ERRCH and ERRCL registers should
    No                                                        be read in the next round of error counting, otherwise they will be over-
                                                              written.
                One second expired?
                   (TMOV_IS = 1 ?)                                When the ERRCH and ERRCL registers are all ‘1’s and there is still
                                               repeat the
                                                              error to be accumulated, the registers will be overflowed. The overflow is
                                             same process
                                                              indicated by the CNTOV_IS bit (b0, INTS2,...) and will induce an inter-
                             Yes               in the next
                                                              rupt reported by INT if not masked by the CNTOV_IM (b0, INTM2,...).
                                                 second
         Data in the Error Counter transfers                      The process of manual Error Counter updating is illustrated in
         to the ERRCH & ERRCL registers                       Figure-22.
            The Error Counter is cleared
          TMOV_IS is cleared after a '1' is                                    Manual Error Counter Updating
                      written to it                                                      (CNT_MD = 0)
             Read the ERRCH & ERRCL                                                         Counting
             registers in the next second                                                                             repeat the
                                                                          No                                             same
    Figure-21 Automatic Error Counter Updating                                                                       process in
                                                                                    A transition from '0' to           the next
                                                                                     '1' on CNT_STOP ?                   round
                                                                                                                    (CNT_STOP
                                                                                                  Yes                  must be
                                                                                                                        cleared
                                                                             Data in the Error Counter transfers      before the
                                                                             to the ERRCH & ERRCL registers          next round)
                                                                                The Error Counter is cleared
                                                                                 Read the ERRCH & ERRCL
                                                                                  registers in the next round
                                                                       Figure-22 Manual Error Counter Updating
Functional Description                                     39                                                    December 17, 2009


 IDT82P20516                                                                      16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.7   LOOPBACK                                                              In Analog Loopback mode, the data stream to be transmitted is still
    There are four kinds of loopback:                                     output to the line side, while the data stream received from the line side
    • Analog Loopback                                                     is covered by the Analog Loopback data.
    • Remote Loopback                                                         Anytime when Analog Loopback is set, the other loopbacks (i.e.,
    • Digital Loopback                                                    Digital Loopback and Remote Loopback) are disabled.
    Refer to Figure-1 for loopback location.                                  In Analog Loopback, the priority of the diagnostic facilities in the
3.5.7.1 Analog Loopback                                                   receive path is: pattern generation > looped data. AIS generation is
                                                                          disabled in both the receive path and the transmit path. Refer to Figure-
    Analog Loopback is enabled by the ALP bit (b0, LOOP,...). The data    23.
stream to be transmitted on the TTIPn/TRINGn pins is internally looped
to the RTIPn/RRINGn pins.
                                                                             BPV/CV, EXZ,
                            LLOS detection         AIS generation             AIS, pattern           Pattern generation
                                                                                detection
                                                         X
                                                                                                                                      Rx path
                   Analog
                  Loopback
                                                                                                                                      Tx path
                                                    X
                                                                                                        BPV/CV, EXZ,
                                                 Auto AIS
                                                                       Pattern generation            SLOS, AIS, pattern
                                                generation
                                                                                                           detection
                               Figure-23 Priority Of Diagnostic Facilities During Analog Loopback
 Functional Description                                                40                                                   December 17, 2009


 IDT82P20516                                                                         16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.7.2 Remote Loopback                                                       Remote Loopback. The setting of the PD_POS bit (b3, PD,...) should not
    Remote Loopback can be configured manually or automatically.              be changed during automatic Remote Loopback. The AUTOLP_S bit
Either manual Remote Loopback configuration or automatic Remote               (b7, STAT0,...) indicates the automatic Remote Loopback status.
Loopback configuration will enable Remote Loopback.                              In Remote Loopback mode, the data stream output from the RJA (if
                                                                              enabled) is internally looped to the Waveform Shaper. The data stream
    Manual Remote Loopback is enabled by the RLP bit (b1, LOOP,...).
                                                                              received from the line side is still output to the system side, while the
    Automatic Remote Loopback is enabled when the pattern detection           data stream input from the system side is covered by the Remote Loop-
is assigned in the receive path (i.e., the PD_POS bit (b3, PD,...) is ‘0’)    back data and the status on TCLKn does not affect the Remote Loop-
and the AUTOLP bit (b3, LOOP,...) is ‘1’. The corresponding channel will      back. However, the BPV/CV, EXZ, SLOS, AIS and pattern detection in
enter Remote Loopback when the activate IB code is detected in the            the transmit path still monitors the data stream input from the system
receive path for more than 5.1 sec.; and will return from Remote Loop-        side.
back when the deactivate IB code is detected in the receive path for
more than 5.1 sec. Refer to section Inband Loopback (IB) Detection on            In Remote Loopback mode, the priority of the diagnostic facilities in
page 38 for details. When automatic Remote Loopback is active, setting        the receive path is: pattern generation > AIS generation; the priority of
the AUTOLP bit (b3, LOOP,...) back to ‘0’ will also stop automatic            the diagnostic facilities in the transmit path is: pattern generation >
                                                                              looped data. AIS generation is disabled in the transmit path. Refer to
                                                                              Figure-24.
              LLOS, AIS                                                               BPV/CV, EXZ,
                                                            AIS generation                                  Pattern generation
               detection                                                            pattern detection
                                                                                                                                        Rx path
                                          Remote
                                         Loopback
                                                                                                                                         Tx path
                  X
              Auto AIS                                                                                    BPV/CV, EXZ, SLOS,
                                    Pattern generation
             generation                                                                                   AIS, pattern detection
                         Figure-24 Priority Of Diagnostic Facilities During Manual Remote Loopback
 Functional Description                                                    41                                                   December 17, 2009


 IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.7.3 Digital Loopback                                                        Loopback. The setting of the PD_POS bit (b3, PD,...) should not be
    The Digital Loopback can be configured manually or automatically.           changed during automatic Digital Loopback. The AUTOLP_S bit (b7,
Either manual Digital Loopback configuration or automatic Digital Loop-         STAT0,...) indicates the automatic Digital Loopback status.
back configuration will enable Digital Loopback.                                    In Digital Loopback mode, the data stream output from the TJA (if
                                                                                enabled) is internally looped to the Decoder (if enabled). The data
    Manual Digital Loopback is enabled by the DLP bit (b2, LOOP,...).
                                                                                stream to be transmitted is still output to the line side, while the data
    Automatic Digital Loopback is enabled when the pattern detection is         stream received from the line side is covered by the Digital Loopback
assigned in the transmit path (i.e., the PD_POS bit (b3, PD,...) is ‘1’) and    data. However, LLOS and AIS detection in the receive path still monitors
the AUTOLP bit (b3, LOOP,...) is ‘1’. The corresponding channel will            the data stream received from the line side.
enter Digital Loopback when the activate IB code is detected in the
transmit path for more than 5.1 sec.; and will return from Digital Loop-            In Digital Loopback mode, the priority of the diagnostic facilities in the
back when the deactivate IB code is detected in the transmit path for           receive path is: pattern generation > looped data; the priority of the diag-
more than 5.1 sec. Refer to section Inband Loopback (IB) Detection on           nostic facilities in the transmit path is: pattern generation > looped data >
page 38 for details. When automatic Digital Loopback is active, setting         AIS generation. AIS generation is disabled in the receive path.
the AUTOLP bit (b3, LOOP,...) back to ‘0’ will also stop automatic Digital
                                                                                   BPV/CV, EXZ,
                              LLOS, AIS
                                                       AIS generation                AIS, pattern             Pattern generation
                               detection
                                                                                      detection
                                                             X
                                                                                                                                                 Rx path
                                                                  Digital
                                                               Loopback
                                                                                                                                                  Tx path
                                                                                                                BPV/CV, EXZ,
                                                     Auto AIS
                                                                              Pattern generation              SLOS, AIS, pattern
                                                    generation
                                                                                                                   detection
                               Figure-25 Priority Of Diagnostic Facilities During Digital Loopback
 Functional Description                                                      42                                                       December 17, 2009


  IDT82P20516                                                                          16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.8     CHANNEL 0 MONITORING                                                     Once the G.772 Monitoring is implemented, the receiver of channel 0
    Channel 0 can be used as a monitoring channel when not used as a           switches to External Impedance Matching mode automatically, and the
regular channel. Channel 0 support G.772 Monitoring and Jitter                 setting in the R_TERM[2:0] bits (b2~0, RCF0,...) of channel 0 is ignored.
Measurements.                                                                      During the G.772 Monitoring, channel 0 processes as normal after
3.5.8.1 G.772 Monitoring                                                       data is received from the selected path and the operation of the moni-
                                                                               tored path is not effected.
    Selected by the MON[5:0] bits (b5~0, MON), any receiver or trans-
mitter of the other 15 channels can be monitored by channel 0 (as                  The signal which is monitored goes through the Clock & Data
shown in Figure-26).                                                           Recovery of monitoring channel (channel 0). The monitored clock can
                                                                               output on RCLK0. The monitored data can be observed digitally on the
    When the G.772 Monitoring is implemented (the MON[5:0] bits                output pin of RCLK0, RD0/RDP0 and RDN0. LOS detector is still in use
(b5~0, MON) is not ‘0’), the registers of the receiver of channel 0 should     in channel 0 for the monitored signal.
be the same as those of the selected receiver /transmitter except the
line interface related registers.                                                  In monitoring mode, channel 0 can be configured to Remote Loop-
                                                                               back. The signal which is being monitored will output on TTIP0 and
                                                                               TRING0. The output signal can then be connected to a standard test
                                                                               equipment for non-intrusive monitoring.
                              RTIPn                                                                            RDn/RDPn
                                                                                                               RDNn
                            RRINGn                                                                             RCLKn
                                                                           Any of the
                                                                      Remaining Channels
                               TTIPn                                                                           TCLKn/TDNn
                                                                                                               TDNn
                            TRINGn                                                                             TDn/TDPn
                                        G.772 Monitoring
                              RTIP0                                                                            RD0/RDP0
                                                                                                               RDN0
                            RRING0                                                                             RCLK0
                                                                             CH 0
                               TTIP0                                                                           TCLK0/TDN0
                                                                                                               TDN0
                            TRING0                                                                             TD0/TDP0
                                                           Figure-26 G.772 Monitoring
  Functional Description                                                    43                                                  December 17, 2009


  IDT82P20516                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.5.8.2 Jitter Measurement (JM)
                                                                                            Automatic JM Updating
    The RJA of channel 0 consists of a Jitter Measurement (JM) module.                            (JM_MD = 1)
When the RJA is enabled in channel 0, the JM is used to measure the
positive and negative peak value of the demodulated jitter signal of the
received data stream. The bandwidth of the measured jitter is selected
by the JM_BW bit (b0, JM).                                                                 Peak jitter measurement
                                                                               No
    The greatest positive peak value monitored in a certain period is indi-
cated by the JIT_PH and JIT_PL registers, while the greatest negative                        One second expired?
peak value monitored in the same period is indicated by the JIT_NH and                         (TMOV_IS = 1 ?)                         repeat the
JIT_NL registers. The relationship between the greatest positive /nega-                                                                    same
tive peak value and the indication in the corresponding registers is:                                     Yes                          process in
    Positive Peak = [JIT_PH, JIT_PL] / 16 (UIpp);                                                                                        the next
                                                                                   The greatest peak value in the internal                second
    Negative Peak = [JIT_NH, JIT_NL] / 16 (UIpp).                                buffers transfers to the JIT_PH & JIT_PL /
                                                                                  JIT_NH & JIT_NL registers respectively
    The period is determined by the JM_MD bit (b1, JM).
                                                                                       The internal buffers are cleared
    When the JM_MD bit (b1, JM) is ‘1’, the period is one second auto-          TMOV_IS is cleared after a '1' is written to it
matically. The one-second timer uses MCLK as clock reference. The
expiration of each one second will set the TMOV_IS bit (b0, INTTM) and
induce an interrupt reported by INT if not masked by the TMOV_IM bit
(b0, GCF). The TMOV_IS bit (b0, INTTM) is cleared after a ‘1’ is written            Read the JIT_PH, JIT_PL & JIT_NH,
to this bit. When each one second expires, internal buffers transfer the            JIT_NL registers in the next second
greatest positive/negative peak value accumulated in this one second to
the JIT_PH and JIT_PL / JIT_NH and JIT_NL registers respectively and                   Figure-27 Automatic JM Updating
the internal buffers will be cleared to start a new round measurement.
The registers should be read in the next second, otherwise they will be                      Manual JM Updating
overwritten. Refer to Figure-27 for the process.                                                  (JM_MD = 0)
    When the JM_MD bit (b1, JM) is ‘0’, the period is controlled by the
JM_STOP bit (b2, JM) manually. When there is a transition from ‘0’ to ‘1’
on the JM_STOP bit (b2, JM), the internal buffers transfer the greatest                    Peak jitter measurement
positive/negative peak value accumulated in this period to the JIT_PH            No                                                  repeat the
and JIT_PL / JIT_NH and JIT_NL registers respectively and the internal                                                                  same
buffers will be cleared to start a new round measurement. The registers                      A transition from '0' to                process in
should be read in the next round of jitter measurement, otherwise they                        '1' on JM_STOP ?                        the next
will be overwritten. Refer to Figure-28 for the process.                                                                               round
                                                                                                          Yes                       (JM_STOP
                                                                                                                                      must be
                                                                                   The greatest peak value in the internal            cleared
                                                                                  buffers transfers to the JIT_PH & JIT_PL           before the
                                                                                 / JIT_NH & JIT_NL registers respectively           next round)
                                                                                       The internal buffers are cleared
                                                                                    Read the JIT_PH, JIT_PL & JIT_NH,
                                                                                     JIT_NL registers in the next round
                                                                                         Figure-28 Manual JM Updating
 Functional Description                                                     44                                                 December 17, 2009


 IDT82P20516                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.6      CLOCK INPUTS AND OUTPUTS                                            The outputs on CLKE1 are free running (locking to MCLK). The
                                                                          output of CLKE1 is determined by the CLKE1_EN bit (b3, CLKG) and
    The IDT82P20516 provides two kinds of clock outputs:                  the CLKE1 bit (b2, CLKG). Refer to Table-14.
    • Free running clock outputs on CLKE1
    The following Clock Input is provided:                                Table-14 Clock Output on CLKE1
    • MCLK as programmable reference timing for the IDT82P20516.                       Control Bits
3.6.1    FREE RUNNING CLOCK OUTPUTS ON CLKE1                                                                         Clock Output On CLKE1
                                                                               CLKE1_EN             CLKE1
    An internal clock generator uses MCLK as reference to generate all
the clocks required by internal circuits and CLKE1 outputs. MCLK                   0              (don’t-care)                High-Z
should be a clock with +/-50 ppm (in E1 mode) accuracy. The clock                                      0                      8 KHz
frequency of MCLK is 1.544/2.048 X N MHz (1 ≤ N ≤ 8, N is an integer               1
                                                                                                       1                    2.048 KHz
number), as determined by MCKSEL[3:0]. Refer to Chapter 2 Pin
Description for details.
 Functional Description                                                45                                                December 17, 2009


 IDT82P20516                                                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.6.2     MCLK, MASTER CLOCK INPUT                                             transmit system interface is ignored and the output on the transmit
    MCLK provides a stable reference timing for the IDT82P20516.               system interface will be in High-Z state. Refer to Section 3.2.7 Receiver
MCLK should be a clock with +/-50 ppm (in E1 mode) accuracy. The               Power Down and Section 3.3.7 Transmitter Power Down for details.
clock frequency of MCLK is set by pins MCKSEL[3:0] and can be N x                  If MCLK recovers after loss of MCLK the device will be reset auto-
1.544 MHz or N x 2.048 MHz with 1 ≤ N ≤ 8 (N is an integer number).            matically.
Refer to MCKSEL[3:0] pin description for details.
                                                                               3.6.3    XCLK, INTERNAL REFERENCE CLOCK INPUT
    If there is a loss of MCLK (duty cycle is less than 30% for 10 µs), the
                                                                                   XCLK is derived from MCLK. For the respective channel, it is 2.048
device will enter power down. In this case, both the receive and transmit
                                                                               MHz in E1 mode. XCLK is used as selectable reference clock for
circuits are turned off. The pins on the line interface will be in High-Z
                                                                                   • pattern /AIS generation
state. The pins on receive system interface will be in High-Z state or in
                                                                                   • RCLKn in LLOS
low level, as selected by the RHZ bit (b6, RCF0,...). The input on the
                                                                                   • Loss of TCLKn to determine Transmit Output High-Z.
 Functional Description                                                     46                                                   December 17, 2009


 IDT82P20516                                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
3.7      INTERRUPT SUMMARY                                                              All the interrupt can be masked by the GLB_IM bit (b1, GCF) globally
                                                                                    or by the corresponding interrupt mask bit individually. For all the inter-
    There are altogether 20 kinds of interrupt sources as listed in Table-          rupt sources, if not masked, the occurrence of the interrupt event will
15. Among them, No.1 to No.19 are per-channel interrupt sources, while              trigger an interrupt indicated by the INT pin. For per-channel interrupt
No. 20 is a global interrupt source.                                                sources, if not masked, the occurrence of the interrupt event will also
    For interrupt sources from No.1 to No.10, the occurrence of the event           cause the corresponding INT_CHn bit (INTCH1~3) to be set ‘1’.
will cause the corresponding Status bit to be set to ‘1’. And selected by               An interrupt event is cleared by writing ‘1’ to the corresponding Inter-
the Interrupt Trigger Edges Select bit, either a transition from ‘0’ to ‘1’ or      rupt Status bit. The INT_CHn bit (INTCH1~3) will not be cleared until all
any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ of the Status bit will cause      the interrupts in the corresponding channel are acknowledged. The INT
the Interrupt Status bit to be set to ‘1’, which indicates the occurrence of        pin will be inactive until all the interrupts are acknowledged. Refer to
an interrupt event.                                                                 Figure-29 for interrupt service flow.
    For interrupt sources from No.11 to No.20, the occurrence of the
event will cause the corresponding Interrupt Status Bit to be set to ‘1’.
Table-15 Interrupt Summary
                                                                              Interrupt Trigger Edges
 No.                Interrupt Source                     Status Bit                                            Interrupt Status Bit        Interrupt Mask Bit
                                                                                      Select Bit
  1     TCLKn is missing.                              TCKLOS_S (b3,              TCKLOS_IES (b3,                TCKLOS_IS (b3,             TCKLOS_IM (b3,
                                                         STAT0,...)                   INTES,...)                     INTS0,...)                 INTM0,...)
  2     LLOS is detected.                         LLOS_S (b0, STAT0,...)      LOS_IES (b1, INTES,...)       LLOS_IS (b0, INTS0,...)    LLOS_IM (b0, INTM0,...)
  3     SLOS is detected.                         SLOS_S (b1, STAT0,...)      LOS_IES (b1, INTES,...)       SLOS _IS (b1, INTS0,...)   SLOS_IM (b1, INTM0,...)
  4     TLOS is detected.                         TLOS_S (b2, STAT0,...)     TLOS_IES (b2, INTES,...)       TLOS_IS (b2, INTS0,...)    TLOS_IM (b2, INTM0,...)
  5     LAIS is detected.                          LAIS_S (b6, STAT1,...)      AIS_IES (b6, INTES,...)       LAIS_IS (b6, INTS1,...)    LAIS_IM (b6, INTM1,...)
  6     SAIS is detected.                          SAIS_S (b7, STAT1,...)      AIS_IES (b6, INTES,...)       SAIS_IS (b7, INTS1,...)    SAIS_IM (b7, INTM1,...)
  7     TOC is detected.                           TOC_S (b4, STAT0,...)      TOC_IES (b4, INTES,...)        TOC_IS (b4, INTS0,...)     TOC_IM (b4, INTM0,...)
  8     The PRBS/ARB pattern is detected syn-        PA_S (b5, STAT1,...)      PA_IES (b5, INTES,...)          PA_IS (b5, INTS1,...)      PA_IM (b5, INTM1,...)
        chronized.
  9     Activate IB code is detected.               IBA_S (b1, STAT1,...)       IB_IES (b0, INTES,...)        IBA_IS (b1, INTS1,...)     IBA_IM (b1, INTM1,...)
  10    Deactivate IB code is detected.            IBD_S (b0, STAT1,...)        IB_IES (b0, INTES,...)       IBD_IS (b0, INTS1,...)      IBD_IM (b0, INTM1,...)
  11    The FIFO of the RJA is overflow or                    -                           -                  RJA_IS (b5, INTS0,...)      RJA_IM (b5, INTM0,...)
        underflow.
  12    The FIFO of the TJA is overflow or                    -                           -                  TJA_IS (b6, INTS0,...)      TJA_IM (b6, INTM0,...)
        underflow.
  13    Waveform amplitude is overflow.                       -                           -                  DAC_IS (b7, INTS0,...)     DAC_IM (b7, INTM0,...)
  14    SBPV is detected.                                     -                           -                 SBPV_IS (b5, INTS2,...)    SBPV_IM (b5, INTM2,...)
  15    LBPV is detected.                                     -                           -                 LBPV_IS (b4, INTS2,...)    LBPV_IM (b4, INTM2,...)
  16    SEXZ is detected.                                     -                           -                 SEXZ_IS (b3, INTS2,...)    SEXZ_IM (b3, INTM2,...)
  17    LEXZ is detected.                                     -                           -                 LEXZ_IS (b2, INTS2,...)     LEXZ_IM (b2, INTM2,...)
  18    PRBS/ARB error is detected.                           -                           -                  ERR_IS (b1, INTS2,...)     ERR_IM (b1, INTM2,...)
  19    The ERRCH and ERRCL registers are                     -                           -                CNTOV_IS (b0, INTS2,...)   CNTOV_IM (b0, INTM2,...)
        overflowed.
  20    One second time is over.                              -                           -                  TMOV_IS (b0, INTTM)          TMOV_IM (b0, GCF)
 Functional Description                                                          47                                                      December 17, 2009


IDT82P20516                                                         16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                                                    INT active
                                Read TMOV_IS                        Read INT_CHn
                                TMOV_IS = 1 ?                       INT_CHn = 1 ?
                       No                                                                   No
                                           Yes                                Yes
                              Serve the interrupt.           Read the interrupt status bits
                          Write '1' to clear TMOV_IS.       in the corresponding channel.
                                                             Find the interrupt source and
                                                                        serve it.
                                                                 Write '1' to clear the
                                                         corresponding interrupt status bit.
                                                             INT_CHn is cleared when all
                                                           interrupts in the corresponding
                                                                 channel are cleared.
                                 Figure-29 Interrupt Service Process
Functional Description                                  48                                      December 17, 2009


 IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
4         MISCELLANEOUS
                                                                                        Power-on reset Hardware reset Global software reset
4.1       RESET
     The reset operation resets all registers, state machines as well as I/O
pins to their default value or status.
     The IDT82P20516 provides 4 kinds of reset:                                                                                  Per-channel software reset
     • Power-on reset;
     • Hardware reset;
     • Global software reset;
     • Per-channel software reset.
     The Power-on, Hardware and Global software reset operations reset             clock generator/       microprocessor
all the common blocks (including clock generator/synthesizer and micro-               synthesizer              interface
processor interface) and channel-related parts. The Per-channel soft-
ware reset operation resets the channel-related parts. Figure-30 shows
a general overview of the reset options.                                                                                                  channel
     During reset, all the line interface pins (i.e., TTIPn/TRINGn and
RTIPn/RRINGn) are in High-Z state.                                                                          Figure-30 Reset
     After reset, all the items listed in Table-16 are true.
Table-16 After Reset Effect Summary
         Effect On ...          Power-On Reset, Hardware Reset and Global Software Reset                        Per-Channel Software Reset
 TTIPn/TRINGn & RTIPn/ All TTIPn/TRINGn & RTIPn/RRINGn pins are in High-Z state.            Only TTIPn/TRINGn & RTIPn/RRINGn in the corresponding chan-
 RRINGn                                                                                     nel are in High-Z.
 System interface               All channels are in Dual Rail NRZ Format.                   Only the corresponding channel is in Dual Rail NRZ Format.
 General I/O pins (i.e., As input pins.                                                     (No effect)
 D[7:0] and GPIO[1:0])
 INT                            Open drain output.                                          (No effect)
 CLKE1                          Output enable.                                              (No effect)
 LLOS, LLOS0                    Output enable.                                              (No effect)
 TDO, SDO/ACK/RDY               High-Z.                                                     (No effect)
 state machines                 All state machines are reset.                               The state machines in the corresponding channel are reset.
 Interrupt sources              All interrupt sources are masked.                           The interrupt sources in the corresponding channel are masked.
 Registers                      All registers are reset to their default value.             The registers in the corresponding channel are reset to their
                                                                                            default value except that there is no effect on the E1 bit.
 Miscellaneous                                                                  49                                                      December 17, 2009


 IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
4.1.1     POWER-ON RESET                                                         4.1.4    PER-CHANNEL SOFTWARE RESET
    Power-on reset is initiated during power-up. When all VDD inputs                Writing a ‘1’ to the CHRST bit (b1, CHCF,...) will initiate per-channel
(1.8V and 3.3V) reach approximately 60% of the standard value of VDD,            software reset. Once initiated, per-channel software reset completes in 1
power-on reset begins. If MCLK is applied, power-on reset will complete          µs maximum and the CHRST bit (b1, CHCF,...) is self cleared.
within 1 ms maximum; if MCLK is not applied, the device remains in
                                                                                    This reset is different from other resets, for:
reset state.
                                                                                    • It does not reset the E1 bit (b0, CHCF,...). That is, the operation
4.1.2     HARDWARE RESET                                                               mode of each channel is not changed;
                                                                                    • It does not reset the global registers, state machines and common
    Pulling the RST pin to low will initiate hardware reset. The reset cycle
                                                                                       pins (including the pins of clock generator, microprocessor inter-
should be more than 1 µs. If the RST pin is held low continuously, the
                                                                                       face and JTAG interface);
device remains in reset state.
                                                                                    • It does not reset the other channels.
4.1.3     GLOBAL SOFTWARE RESET
                                                                                 4.2      MICROPROCESSOR INTERFACE
    Writing the RST register will initiate global software reset. Once initi-
ated, global software reset completes in 1 µs maximum.                              The microprocessor interface provides access to read and write the
                                                                                 registers in the device. The interface consists of:
                                                                                    • Serial microprocessor interface;
 Miscellaneous                                                                50                                                     December 17, 2009


 IDT82P20516                                                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
4.3      POWER UP                                                                     Figure-31, Figure-32 and Figure-33 for different protection schemes.
                                                                                      The IDT82P20516 provides an enhanced architecture to support both
   No power up sequencing for the VDD inputs (1.8 V and 3.3 V) has to                 protection schemes.
be provided for the IDT82P20516. A Power-on reset will be initiated
during power up. Refer to Section 4.1 Reset.                                             IDT82P20516 highlights for HPS support:
                                                                                         • Independent programmable receive and transmit high impedance
4.4 HITLESS PROTECTION SWITCHING (HPS) SUM-                                                 for Tip and Ring inputs and outputs to support 1+1 and 1:1 redun-
MARY                                                                                        dancy
                                                                                         • Fully integrated receive termination, required to support 1:1 redun-
   In today’s telecommunication systems, ensuring no traffic loss is                        dancy
becoming increasingly important. To combat these problems, redun-                        • Enhanced internal architecture to guarantee High Impedance for
dancy protection must be built into the systems carrying this traffic.                      Tip and Ring Inputs and Outputs during Power Off or Power Fail-
There are many types of redundancy protection schemes, including 1+1                        ure
and 1:1 hardware protection without the use of external relays. Refer to                 • Asynchronous hardware control (OE, RIM) for fast global high
                                                                                            impedance of receiver and transmitter (hot switching between
                                                                                            working and backup board)
                                                                                                    VDDTn
                                                                                                                                                  1:2
                                                                                Tx                •
                                                                                                     VDDTn
          Hot switch control                          OE
                                                                                                       •
                                                                                                VDDRn
                                                                                                                                                  1:1
                                                                                                  •
                                                                               Rx                    VDDRn
                                                      RIM                                              •
                                                                                                                             120 Ω
                                                               LIU on primary line card
                                                                                                VDDTn
                                                                               Tx                 •
                                                                                                     VDDTn
                                                      OE                                               •
                                                                                                VDDRn
                                                                                                  •
                                                                                Rx                   VDDRn
                                                      RIM
                                                                                                       •
                                                               LIU on backup line card                            backplane                 interface card
       Rx: Partially Internal Impedance Matching mode. A fixed external 120 Ω resistor is placed on the backplane and provides a common termination for
       E1 applications. The R_TERM[2:0] bits (b2~0, RCF0,...) setting is as follows: ‘010’ for E1 120 Ω twisted pair cable and ‘011’ for E1 75 Ω coaxial
       cable.
       Tx: Internal Impedance Matching mode. The T_TERM[2:0] bits (b2~0, TCF0,...) setting is as follows: ‘010’ for E1 120 Ω twisted pair cable and
       ‘011’ for E1 75 Ω coaxial cable.
                        Figure-31 1+1 HPS Scheme, Differential Interface (Shared Common Transformer)
 Miscellaneous                                                                    51                                                         December 17, 2009


IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                                                                                                      VDDTn
                                                                                                               1:2
                                                                                                   •
                                                                                     Tx                VDDTn
             Hot switch control                              OE
                                                                                                         •
                                                                                                 VDDRn
                                                                                                               1:1
                                                                                                   •
                                                                                     Rx               VDDRn
                                                             RIM                                         •
                                                                            primary card
                                                                                                      VDDTn
                                                                                                               1:2
                                                                                                   •
                                                                                     Tx                VDDTn
                                                             OE                                          •
                                                                                                 VDDRn
                                                                                                               1:1
                                                                                                   •
                                                                                     Rx                VDDRn
                                                             RIM
                                                                                                         •
                                                                            backup card
          Rx: Fully Internal Impedance Matching mode. In this mode, there is no external resistor required. The R_TERM[2:0] bits (b2~0, RCF0,...)
          setting is as follows: ‘010’ for E1 120 Ω twisted pair cable and ‘011’ for E1 75 Ω coaxial cable.
          Tx: Internal Impedance Matching mode. The T_TERM[2:0] bits (b2~0, TCF0,...) setting is as follows: ‘010’ for E1 120 Ω twisted pair cable
          and ‘011’ for E1 75 Ω coaxial cable.
                          Figure-32 1:1 HPS Scheme, Differential Interface (Individual Transformer)
Miscellaneous                                                                   52                                                    December 17, 2009


IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                                                                                VDDTn
                                                                                                                                   1:2
                                                                    Tx             •
                                                                                                       4.7 µF
   Hot switch control                            OE
                                                                                VDDRn
                                                                                                        0.47 µF
                                                                                                                                  1:2
                                                                    Rx             •
                                                                                                           19 Ω
                                                 RIM
                                                           primary line card
                                                                    Tx
                                                 OE
                                                                    Rx
                                                 RIM
                                                          backup line card
    Rx: 75 Ω External Impedance Matching mode. In this mode, there is no external resistor required. The RIM pin should be left open and the configuration
    of the R_TERM[2:0] bits (b2~0, RCF0,...) is ignored.
    Tx: 75 Ω Internal Impedance Matching mode. The T_TERM[2:0] bits (b2~0, TCF0,...) should be set to ‘011’.
           Figure-33 1+1 HPS Scheme, E1 75 ohm Single-Ended Interface (Shared Common Transformer)
Miscellaneous                                                               53                                                         December 17, 2009


  IDT82P20516                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
5         PROGRAMMING INFORMATION
5.1       REGISTER MAP
5.1.1     GLOBAL REGISTER
 Address                                                                                                                 Reference
                      Register Name           Bit 7    Bit 6    Bit 5       Bit 4      Bit 3     Bit 2    Bit 1    Bit 0
   (Hex)                                                                                                                   Page
 Common Control
    000      ID - Device ID Register           ID7      ID6      ID5         ID4        ID3       ID2      ID1      ID0    P 58
    040      RST - Global Reset Register      RST7     RST6     RST5        RST4       RST3      RST2     RST1     RST0    P 58
    080      GCF - Global Configuration         -        -        -         COPY     INT_PIN1 INT_PIN0   GLB_IM  TMOV_IM    P 59
             Register
    0C0      MON - G.772 Monitor Configura-     -        -      MON5       MON4        MON3      MON2     MON1     MON0     P 59
             tion Register
    100      GPIO - General Purpose I/O Pin     -        -        -           -       LEVEL1    LEVEL0    DIR1     DIR0    P 60
             Definition Register
 Reference Clock Timing Option
    1C0      CLKG - CLKE1 Generation Con-       -        -        -           -     CLKE1_EN    CLKE1       -        -      P 60
             trol Register
 Interrupt Indication
    2C0      INTCH1 - Interrupt Requisition INT_CH8  INT_CH7  INT_CH6     INT_CH5    INT_CH4   INT_CH3  INT_CH2  INT_CH1    P 61
             Source Register 1
    300      INTCH2 - Interrupt Requisition     -   INT_CH15 INT_CH14    INT_CH13   INT_CH12  INT_CH11 INT_CH10  INT_CH9    P 61
             Source Register 2
    380      INTCH3 - Interrupt Requisition INT_CH0      -        -           -          -         -        -        -      P 61
             Source Register 3
    3C0      INTTM - One Second Timer           -        -        -           -          -         -        -    TMOV_IS    P 62
             Interrupt Status Register
 Programming Information                                              54                                        December 17, 2009


  IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
5.1.2    PER-CHANNEL REGISTER
     Only the address of channel 1 is listed in the ‘Address (Hex)’ column
of the following table. For the addresses of the other channels, refer to
the description of each register.
 Address                                                                                                                            Reference
                    Register Name             Bit 7       Bit 6        Bit 5       Bit 4        Bit 3     Bit 2     Bit 1     Bit 0
   (Hex)                                                                                                                              Page
 Channel Control
    001    CHCF - Channel Configuration         -           -            -           -            -         -     CHRST        E1     P 62
           Register
 JA Configuration
    002    TJA - Transmit Jitter Attenuation    -           -            -      TJA_LIMT      TJA_EN   TJA_DP1   TJA_DP0   TJA_BW     P 63
           Configuration Register
    003    RJA - Receive Jitter Attenuation     -           -            -      RJA_LIMT      RJA_EN   RJA_DP1   RJA_DP0   RJA_BW     P 64
           Configuration Register
 Transmit Path Configuration
    004    TCF0 - Transmit Configuration        -          OE         T_OFF      THZ_OC       T_SING   T_TERM2   T_TERM1   T_TERM0    P 65
           Register 0
    005    TCF1 - Transmit Configuration        -           -            -       TCK_ES       TD_INV   T_CODE     T_MD1      T_MD0    P 66
           Register 1
    006    PULS - Transmit Pulse Configu-       -           -            -           -         PULS3     PULS2     PULS1     PULS0    P 67
           ration Register
    007    SCAL - Amplitude Scaling Con-        -           -         SCAL5       SCAL4        SCAL3     SCAL2     SCAL1     SCAL0    P 67
           trol Register
    008    AWG0 - Arbitrary Waveform            -        DONE          RW        SAMP4        SAMP3     SAMP2     SAMP1     SAMP0     P 68
           Generation Control Register 0
    009    AWG1 - Arbitrary Waveform            -        WDAT6       WDAT5       WDAT4        WDAT3     WDAT2     WDAT1     WDAT0     P 68
           Generation Control Register 1
 Receive Path Configuration
    00A    RCF0 - Receive Configuration      RCKH         RHZ        R_OFF        R120IN      R_SING   R_TERM2   R_TERM1  R_TERM0     P 69
           Register 0
    00B    RCF1 - Receive Configuration         -           -            -       RCK_ES       RD_INV   R_CODE     R_MD1     R_MD0     P 70
           Register 1
    00C    RCF2 - Receive Configuration         -           -            -           -            -         -       MG1       MG0     P 70
           Register 2
 Diagnostics
    00D    LOS - LOS Configuration Regis-     LAC        ALOS2        ALOS1       ALOS0       TALOS1    TALOS0    TDLOS1    TDLOS0    P 71
           ter
    00E    ERR - Error Detection & Inser- EXZ_DEF       BPV_INS     ERR_INS    CNT_SEL2 CNT_SEL1 CNT_SEL0        CNT_MD   CNT_STOP    P 72
           tion Control Register
    00F    AISG - AIS Generation Control        -           -            -        TXAIS      ASAIS_SL ASAIS_LLO ALAIS_SLO ALAIS_LLO   P 73
           Register                                                                              OS        S         S         S
    010    PG - Pattern Generation Control      -        PG_CK       PG_EN1      PG_EN0      PG_POS    PAG_INV  PRBG_SEL PRBG_SEL     P 74
           Register                                                                                                  1         0
 Programming Information                                                     55                                           December 17, 2009


 IDT82P20516                                                                      16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
Address                                                                                                                     Reference
                    Register Name               Bit 7   Bit 6   Bit 5       Bit 4        Bit 3    Bit 2     Bit 1     Bit 0
  (Hex)                                                                                                                       Page
   011     PD - Pattern Detection Control         -       -       -           -        PD_POS  PAD_INV  PAD_SEL1 PAD_SEL0     P 75
           Register
   012     ARBL - Arbitrary Pattern Gener-     ARB7    ARB6     ARB5       ARB4         ARB3     ARB2      ARB1       ARB0    P 76
           ation / Detection Low-Byte Reg-
           ister
   013     ARBM - Arbitrary Pattern Gen-       ARB15   ARB14   ARB13      ARB12         ARB11    ARB10     ARB9       ARB8    P 76
           eration / Detection Middle-Byte
           Register
   014     ARBH - Arbitrary Pattern Gener-     ARB23   ARB22   ARB21      ARB20         ARB19    ARB18    ARB17     ARB16     P 76
           ation / Detection High-Byte Reg-
           ister
   015     IBL - Inband Loopback Control          -       -    IBGL1       IBGL0        IBAL1    IBAL0     IBDL1     IBDL0    P 77
           Register
   016     IBG - Inband Loopback Genera-        IBG7    IBG6    IBG5        IBG4         IBG3     IBG2      IBG1      IBG0    P 77
           tion Code Definition Register
   017     IBDA - Inband Loopback Detec-        IBA7    IBA6    IBA5        IBA4         IBA3     IBA2      IBA1      IBA0    P 78
           tion Target Activate Code Defini-
           tion Register
   018     IBDD - Inband Loopback Detec-        IBD7    IBD6    IBD5        IBD4         IBD3     IBD2      IBD1      IBD0    P 78
           tion Target Deactivate Code
           Definition Register
   019     LOOP - Loopback Control Reg-           -       -       -           -        AUTOLP      DLP       RLP       ALP    P 79
           ister
Interrupt Edge Selection
   01A     INTES - Interrupt Trigger Edges        -   AIS_IES  PA_IES    TOC_IES      TCKLOS_I TLOS_IES  LOS_IES    IB_IES    P 80
           Select Register                                                                ES
Interrupt Mask
   01B     INTM0 - Interrupt Mask Register    DAC_IM  TJA_IM   RJA_IM    TOC_IM       TCKLOS_I TLOS_IM   SLOS_IM   LLOS_IM    P 81
           0                                                                               M
   01C     INTM1 - Interrupt Mask Register    SAIS_IM LAIS_IM  PA_IM          -            -        -     IBA_IM    IBD_IM    P 82
           1
   01D     INTM2 - Interrupt Mask Register        -       -   SBPV_IM    LBPV_IM       SEXZ_IM LEXZ_IM   ERR_IM   CNTOV_IM    P 83
           2
Status Indication
   01E     STAT0 - Status Register 0         AUTOLP_S     -       -       TOC_S       TCKLOS_S  TLOS_S   SLOS_S    LLOS_S     P 84
   01F     STAT1 - Status Register 1          SAIS_S  LAIS_S    PA_S          -            -        -      IBA_S     IBD_S    P 85
Interrupt Status Indication
   020     INTS0 - Interrupt Status Regis-    DAC_IS  TJA_IS   RJA_IS     TOC_IS      TCKLOS_I  TLOS_IS  SLOS_IS   LLOS_IS    P 86
           ter 0                                                                           S
   021     INTS1 - Interrupt Status Regis-    SAIS_IS LAIS_IS   PA_IS         -            -        -     IBA_IS    IBD_IS    P 87
           ter 1
   022     INTS2 - Interrupt Status Regis-        -       -   SBPV_IS    LBPV_IS       SEXZ_IS  LEXZ_IS   ERR_IS  CNTOV_IS    P 88
           ter 2
 Programming Information                                              56                                          December 17, 2009


 IDT82P20516                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
Address                                                                                                           Reference
                   Register Name            Bit 7   Bit 6   Bit 5      Bit 4       Bit 3    Bit 2  Bit 1    Bit 0
  (Hex)                                                                                                             Page
Counter
    023   ERRCL - Error Counter Low-      ERRC7   ERRC6   ERRC5      ERRC4        ERRC3   ERRC2   ERRC1    ERRC0    P 89
          Byte Register
    024   ERRCH - Error Counter High-     ERRC15  ERRC14  ERRC13     ERRC12      ERRC11   ERRC10  ERRC9    ERRC8    P 89
          Byte Register
Jitter Measurement (channel 0 Only)
   7E5    JM - Jitter Measurement Config-     -       -       -          -           -   JM_STOP  JM_MD    JM_BW    P 90
          uration For Channel 0 Register
   7E6    JIT_PL - Positive Peak Jitter    JIT_P7  JIT_P6  JIT_P5     JIT_P4      JIT_P3   JIT_P2 JIT_P1   JIT_P0   P 90
          Measurement Low-Byte Regis-
          ter
   7E7    JIT_PH - Positive Peak Jitter       -       -       -          -       JIT_P11  JIT_P10 JIT_P9   JIT_P8   P 90
          Measurement High-Byte Regis-
          ter
   7E8    JIT_NL - Negative Peak Jitter    JIT_N7  JIT_N6  JIT_N5     JIT_N4      JIT_N3   JIT_N2 JIT_N1   JIT_N0   P 91
          Measurement Low-Byte Regis-
          ter
   7E9    JIT_NH - Negative Peak Jitter       -       -       -          -       JIT_N11  JIT_N10 JIT_N9   JIT_N8   P 91
          Measurement High-Byte Regis-
          ter
Programming Information                                           57                                     December 17, 2009


 IDT82P20516                                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
5.2      REGISTER DESCRIPTION
5.2.1     GLOBAL REGISTER
ID - Device ID Register
 Address: 000H
 Type: Read
 Default Value: 7xH
            7                 6                  5                       4                   3                   2                 1                      0
           ID7               ID6                ID5                     ID4                 ID3                 ID2               ID1                    ID0
       Bit           Name                                                                        Description
       7-0           ID[7:0]     The ID[7:0] bits are pre-set, where the ID[3:0] bits ‘x’ represent the current version number (‘0000’ is for the first version).
RST - Global Reset Register
 Address: 040H
 Type: Write
 Default Value: 00H
            7                 6                  5                       4                   3                   2                 1                       0
          RST7             RST6                RST5                   RST4                 RST3                RST2              RST1                    RST0
       Bit           Name                                                                        Description
       7-0          RST[7:0]     Writing this register will initiate global software reset. This reset completes in 1 µs maximum.
 Programming Information                                                           58                                                       December 17, 2009


 IDT82P20516                                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
GCF - Global Configuration Register
Address: 080H
Type: Read / Write
Default Value: 03H
           7                  6                   5                   4                    3                  2                 1                    0
            -                 -                   -                COPY                INT_PIN1           INT_PIN0          GLB_IM             TMOV_IM
      Bit             Name                                                                    Description
      7-5               -       Reserved.
        4             COPY      When the per-channel register of one channel is written, this bit determines whether the written value is copied to the same reg-
                                ister of the other channels simultaneously.
                                0: Disable. (default)
                                1: Enable.
      3-2          INT_PIN[1:0] These two bits control the output on the INT pin.
                                X0: Open drain, active low. (default)
                                01: Push-pull, active low.
                                11: Push-pull, active high.
        1            GLB_IM     This bit is a global configuration interrupt mask bit.
                                0: The per-channel interrupt will be generated when the per-channel interrupt mask bit is ‘0’ and the corresponding interrupt sta-
                                tus bit is ‘1’.
                                1: Mask all the per-channel interrupts. None per-channel interrupts can be generated. (default)
        0           TMOV_IM     This bit controls whether the interrupt is generated when one second time is over. This one second timer is locked to MCLK.
                                0: Enable.
                                1: Mask. (default)
MON - G.772 Monitor Configuration Register
Address: 0C0H
Type: Read / Write
Default Value: 00H
           7                 6                   5                    4                    3                  2                 1                    0
           -                  -                 MON5               MON4                  MON3               MON2              MON1                MON0
      Bit             Name                                                                    Description
      7-6               -       Reserved.
      5-0            MON[5:0]   These bits determine whether the G.772 Monitor is implemented. When the G.772 Monitor is implemented, these bits select one
                                transmitter or receiver to be monitored by channel 0.
                                000000: No transmitter or receiver is monitored. (default)
                                000001: The receiver of channel 1 is monitored.
                                000010: The receiver of channel 2 is monitored.
                                ......
                                001111: The receiver of channel 15 is monitored.
                                010000: The receiver of channel 16 is monitored.
                                010001 ~ 011111: Reserved.
                                100000: No transmitter or receiver is monitored.
                                100001: The transmitter of channel 1 is monitored.
                                100010: The transmitter of channel 2 is monitored.
                                ......
                                101111: The transmitter of channel 15 is monitored.
                                110000 ~ 111111: Reserved.
Programming Information                                                         59                                                      December 17, 2009


 IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
GPIO - General Purpose I/O Pin Definition Register
 Address: 100H
 Type: Read / Write
 Default Value: 0FH
            7               6                   5                 4                   3                    2                    1                   0
            -               -                   -                 -                LEVEL1              LEVEL0                 DIR1                DIR0
       Bit            Name                                                                Description
       7-4              -      Reserved.
         3           LEVEL1    When the GPIO1 pin is defined as output, this bit determines the output level on GPIO1 and can be read and written.
                               0: Output low level.
                               1: Output high level. (default)
                               When the GPIO1 pin is defined as input, this bit indicates the input level on GPIO1 and can only be read.
                               0: Input low level.
                               1: Input high level. (default)
         2           LEVEL0    When the GPIO0 pin is defined as output, this bit determines the output level on GPIO0 and can be read and written.
                               0: Output low level.
                               1: Output high level.
                               When the GPIO0 pin is defined as input, this bit indicates the input level on GPIO0 and can only be read.
                               0: Input low level.
                               1: Input high level. (default)
         1            DIR1     This bit determines whether the GPIO1 pin is used as output or input.
                               0: Output.
                               1: Input. (default)
         0            DIR0     This bit determines whether the GPIO0 pin is used as output or input.
                               0: Output.
                               1: Input. (default)
CLKG - CLKE1 Generation Control Register
 Address: 1C0H
 Type: Read / Write
 Default Value: 0FH
            7               6                    5                 4                   3                    2                   1                  0
             -               -                   -                  -             CLKE1_EN               CLKE1                  -                  -
       Bit            Name                                                                Description
       7-4              -      Reserved.
         3          CLKE1_EN   This bit controls whether the output on the CLKE1 pin is enabled.
                               0: The output is disabled. CLKE1 is in High-Z state.
                               1: The output is enabled. The frequency of CLKE1 is determined by the CLKE1 bit (b2, CLKG). (default)
         2           CLKE1     This bit is valid only when the CLKE1_EN bit (b3, CLKG) is ‘1’. This bit selects the clock frequency output on the CLKE1 pin.
                               0: 8 KHz.
                               1: 2.048 MHz. (default)
         1              -      Reserved.
         0              -      Reserved.
 Programming Information                                                     60                                                         December 17, 2009


 IDT82P20516                                                                                      16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTCH1 - Interrupt Requisition Source Register 1
 Address: 2C0H
 Type: Read
 Default Value: 00H
            7                    6                   5                     4                    3                   2                  1              0
        INT_CH8               INT_CH7             INT_CH6             INT_CH5               INT_CH4              INT_CH3            INT_CH2      INT_CH1
       Bit               Name                                                                      Description
       7-0           INT_CH[8:1]     These bits indicate whether there is an interrupt generated in the corresponding channel. The INT_CH[8:1] bits correspond to
                                     channel 8 to 1 respectively.
                                     0: No interrupt is generated or all the interrupts are cleared in the corresponding channel. (default)
                                     1: At least one interrupt is generated in the corresponding channel.
INTCH2 - Interrupt Requisition Source Register 2
 Address: 300H
 Type: Read
 Default Value: 00H
            7                    6                    5                    4                    3                   2                  1              0
             -               INT_CH15            INT_CH14            INT_CH13              INT_CH12             INT_CH11           INT_CH10      INT_CH9
       Bit               Name                                                                      Description
         7                 -         Reserved.
       6-0          INT_CH[15:9]     These bits indicate whether there is an interrupt generated in the corresponding channel. The INT_CH[16:9] bits correspond to
                                     channel 16 to 9 respectively.
                                     0: No interrupt is generated or all the interrupts are cleared in the corresponding channel. (default)
                                     1: At least one interrupt is generated in the corresponding channel.
INTCH3 - Interrupt Requisition Source Register 3
 Address: 380H
 Type: Read
 Default Value: 00H
            7                    6                    5                    4                    3                   2                  1              0
        INT_CH0                   -                   -                    -                    -                    -                  -             -
       Bit               Name                                                                      Description
         7             INT_CH0       This bit indicates whether there is an interrupt generated in channel 0.
                                     0: No interrupt is generated or all the interrupts are cleared in channel 0. (default)
                                     1: At least one interrupt is generated in channel 0.
       6-0                 -         Reserved.
 Programming Information                                                              61                                                    December 17, 2009


 IDT82P20516                                                                                      16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTTM - One Second Timer Interrupt Status Register
 Address: 3C0H
 Type: Read / Write
 Default Value: 00H
            7                 6                     5                       4                   3                    2                  1                   0
            -                 -                     -                        -                  -                    -                   -             TMOV_IS
       Bit             Name                                                                        Description
       7-1                -       Reserved.
         0           TMOV_IS      This bit is valid only when the TMOV_IM bit (b0, GCF) is ‘0’. This bit indicates the interrupt status of one second time over.
                                  0: No one second time over interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: One second time over interrupt is generated and is reported by the INT pin.
5.2.2     PER-CHANNEL REGISTER
CHCF - Channel Configuration Register
 Address: 001H, 041H, 081H, 0C1H, 101H, 141H, 181H, 1C1H, (CH1~CH8)
           201H, 241H, 281H, 2C1H, 301H, 341H, 381H, (CH9~CH15)
           7C1H (CH0)
 Type: Read / Write
 Default Value: 00H
            7                 6                    5                       4                  3                    2                   1                  0
             -                -                    -                       -                  -                    -               CHRST                 E1
       Bit             Name                                                                        Description
       7-2                -       Reserved.
         1            CHRST       Writing a ‘1’ to this bit will initiate per-channel software reset. Once initiated, per-channel software reset completes in 1 µs maxi-
                                  mum.
                                  This bit is self cleared.
         0               E1       This bit is valid only when the TEHWE pin is low. This bit selects E1 operation mode.
                                  1: E1.
                                  This bit can not be reset by per-channel software reset.
 Programming Information                                                             62                                                        December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
TJA - Transmit Jitter Attenuation Configuration Register
Address: 002H, 042H, 082H, 0C2H, 102H, 142H, 182H, 1C2H, (CH1~CH8)
          202H, 242H, 282H, 2C2H, 302H, 342H, 382H, (CH9~CH15)
          7C2H (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                   5                   4                  3                  2                     1                      0
            -                -                    -             TJA_LIMT             TJA_EN             TJA_DP1              TJA_DP0               TJA_BW
      Bit             Name                                                                 Description
      7-5               -        Reserved.
        4           TJA_LIMT     This bit determines whether the JA-Limit function is enabled in the TJA.
                                 0: Disable. (default)
                                 1: Enable. The speed of the TJA outgoing data will be adjusted automatically if the FIFO in the TJA is 2-bit close to its full or emp-
                                 tiness.
        3            TJA_EN      This bit controls whether the TJA is enabled to use.
                                 0: Disable. (default)
                                 1: Enable.
      2-1          TJA_DP[1:0]   These bits select the depth of the TJA FIFO.
                                 00: 128-bit. (default)
                                 01: 64-bit.
                                 1X: 32-bit.
        0            TJA_BW      This bit selects the Corner Frequency for the TJA.
                                 0: 6.77 Hz (in E1 mode). (default)
                                 1: 0.87 Hz (in E1 mode).
 Programming Information                                                       63                                                         December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
RJA - Receive Jitter Attenuation Configuration Register
Address: 003H, 043H, 083H, 0C3H, 103H, 143H, 183H, 1C3H, (CH1~CH8)
          203H, 243H, 283H, 2C3H, 303H, 343H, 383H, (CH9~CH15)
          7C3H (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                   5                   4                  3                  2                  1                   0
            -                -                    -             RJA_LIMT             RJA_EN             RJA_DP1          RJA_DP0              RJA_BW
      Bit             Name                                                                 Description
      7-5               -        Reserved.
        4           RJA_LIMT     This bit determines whether the JA-Limit function is enabled in the RJA.
                                 0: Disable. (default)
                                 1: Enable. The speed of the RJA outgoing data will be adjusted automatically if the FIFO in the RJA is 2-bit close to its full or
                                 emptiness.
        3            RJA_EN      This bit controls whether the RJA is enabled to use.
                                 0: Disable. (default)
                                 1: Enable.
      2-1          RJA_DP[1:0]   These bits select the depth of the RJA FIFO.
                                 00: 128-bit. (default)
                                 01: 64-bit.
                                 1X: 32-bit.
        0           RJA_BW       This bit selects the Corner Frequency for the RJA.
                                 0: 6.77 Hz (in E1 mode). (default)
                                 1: 0.87 Hz (in E1 mode).
 Programming Information                                                       64                                                    December 17, 2009


 IDT82P20516                                                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
TCF0 - Transmit Configuration Register 0
Address: 004H, 044H, 084H, 0C4H, 104H, 144H, 184H, 1C4H, (CH1~CH8)
          204H, 244H, 284H, 2C4H, 304H, 344H, 384H, (CH9~CH15)
          7C4H (CH0)
Type: Read / Write
Default Value: 00H
           7                  6                  5                     4                    3                   2                 1                     0
            -                OE               T_OFF                THZ_OC               T_SING              T_TERM2           T_TERM1              T_TERM0
      Bit             Name                                                                     Description
        7               -        Reserved.
        6              OE        This bit determines the output of the Line Driver, i.e., the output on the TTIPn and TRINGn pins.
                                 0: High-Z. (default)
                                 1: Normal operation.
        5             T_OFF      This bit determines whether the transmitter is powered down.
                                 0: Normal operation. (default)
                                 1: Power down.
        4            THZ_OC      This bit determines the output of the Line Driver, i.e., the output on the TTIPn and TRINGn pins when TOC is detected.
                                 0: The output current is limited to 100 mAp-p. (default)
                                 1: The output current is limited to 100 mAp-p within the first 1 ms after the TOC is detected and then the output is in High-Z state
                                 when the TOC is detected for more than 1 ms.
        3            T_SING      This bit determines the transmit line interface.
                                 0: Transmit Differential line interface. Both TTIPn and TRINGn are used to transmit signal to the line side. (default)
                                 1: Transmit Single Ended line interface. Only TTIPn is used to transmit signal. TRINGn should be left open.
      2-0          T_TERM[2:0]   These bits select the impedance matching mode of the transmit path to match the cable impedance.
                                 010: The 120 Ω internal impedance matching is selected for E1 120 Ω twisted pair cable (with transformer).
                                 011: The 75 Ω internal impedance matching is selected for E1 75 Ω coaxial cable (with transformer).
                                 110: The 120 Ω internal impedance matching is selected for E1 120 Ω twisted pair cable (transformer-less).
                                 111: The external impedance matching is selected for E1 120 Ω twisted pair cable or E1 75 Ω coaxial cable (with transformer).
 Programming Information                                                         65                                                        December 17, 2009


 IDT82P20516                                                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
TCF1 - Transmit Configuration Register 1
Address: 005H, 045H, 085H, 0C5H, 105H, 145H, 185H, 1C5H, (CH1~CH8)
          205H, 245H, 285H, 2C5H, 305H, 345H, 385H, (CH9~CH15)
          7C5H (CH0)
Type: Read / Write
Default Value: 01H
           7                 6                   5                     4                    3                 2             1                  0
           -                 -                    -               TCK_ES                TD_INV             T_CODE         T_MD1            T_MD0
      Bit             Name                                                                     Description
      7-5               -        Reserved.
        4            TCK_ES      This bit selects the active edge of the TCLKn pin.
                                 0: Falling edge. (default)
                                 1: Rising edge.
        3            TD_INV      This bit determines the active level on the TDn, TDPn and TDNn pins.
                                 0: Active high. (default)
                                 1: Active low.
        2           T_CODE       This bit selects the line code rule for the transmit path.
                                 0: HDB3 (in E1 mode). (default)
                                 1: AMI.
      1-0           T_MD[1:0]    These bits determines the transmit system interface.
                                 00: Transmit Single Rail NRZ Format system interface. The data is input on TDn in NRZ format and a 2.048 MHz (in E1 mode)
                                 clock is input on TCLKn.
                                 01: Transmit Dual Rail NRZ Format system interface. The data is input on TDPn and TDNn in NRZ format and a 2.048 MHz (in
                                 E1 mode) clock is input on TCLKn. (default)
                                 10: Transmit Dual Rail RZ Format system interface. The data is input on TDPn and TDNn in RZ format.
                                 11: Reserved.
 Programming Information                                                          66                                                December 17, 2009


 IDT82P20516                                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
PULS - Transmit Pulse Configuration Register
Address: 006H, 046H, 086H, 0C6H, 106H, 146H, 186H, 1C6H, (CH1~CH8)
          206H, 246H, 286H, 2C6H, 306H, 346H, 386H, (CH9~CH15)
          7C6H (CH0)
Type: Read / Write
Default Value: 02H
            7                 6                  5                    4                    3                   2                  1                    0
            -                  -                 -                     -                PULS3               PULS2               PULS1               PULS0
       Bit             Name                                                                   Description
      7-4                -        Reserved.
      3-0            PULS[3:0]    These bits select one of the eight preset waveform templates for short haul application or enable user-programmable arbitrary
                                  waveform.
                                                         Operation         Transmit
                                      PULS[3:0]                                                    Cable Impedance               Cable Range       Cable Loss
                                                           Mode              Clock
                                         0000                 E1          2.048 MHz                      E1 75 Ω                        -           0 ~ 12 dB
                                         0001                 E1          2.048 MHz                     E1 120 Ω                        -           0 ~ 12 dB
                                     0010 (default)        DSX1           1.544 MHz                       100 Ω                     0 ~ 133 ft      0 ~ 0.6 dB
                                         0011              DSX1           1.544 MHz                       100 Ω                   133 ~ 266 ft     0.6 ~ 1.2 dB
                                         0100              DSX1           1.544 MHz                       100 Ω                   266 ~ 399 ft     1.2 ~ 1.8 dB
                                         0101              DSX1           1.544 MHz                       100 Ω                   399 ~ 533 ft     1.8 ~ 2.4 dB
                                         0110              DSX1           1.544 MHz                       100 Ω                   533 ~ 655 ft     2.4 ~ 3.0 dB
                                         0111                 J1          1.544 MHz                       110 Ω                         -           0 ~ 12 dB
                                         1XXX                                            User-programmable arbitrary waveform
SCAL - Amplitude Scaling Control Register
 Address: 007H, 047H, 087H, 0C7H, 107H, 147H, 187H, 1C7H, (CH1~CH8)
           207H, 247H, 287H, 2C7H, 307H, 347H, 387H, (CH9~CH15)
           7C7H (CH0)
 Type: Read / Write
 Default Value: 36H
            7                 6                  5                    4                    3                   2                  1                    0
             -                 -              SCAL5                SCAL4                SCAL3               SCAL2               SCAL1               SCAL0
       Bit             Name                                                                   Description
       7-6               -        Reserved.
       5-0           SCAL[5:0]    These bits specify a scaling factor to be applied to the amplitude of the waveform to be transmitted.
                                  In E1 mode, the standard value is ‘100001’ for the waveform amplitude. If necessary, increasing or decreasing by ‘1’ from the
                                  standard value will result in 3% scaling up or down against the waveform amplitude. The scale range is from +100% to -100%.
                                  Note: Therefore, if E1 mode is used, ‘100001’ should be written to these bits to indicate the E1 standard value.
 Programming Information                                                         67                                                       December 17, 2009


 IDT82P20516                                                                               16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
AWG0 - Arbitrary Waveform Generation Control Register 0
Address: 008H, 048H, 088H, 0C8H, 108H, 148H, 188H, 1C8H, (CH1~CH8)
          208H, 248H, 288H, 2C8H, 308H, 348H, 388H, (CH9~CH15)
          7C8H (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                    5                   4                  3                    2                 1                   0
            -             DONE                   RW                SAMP4               SAMP3              SAMP2               SAMP1               SAMP0
      Bit             Name                                                                  Description
        7               -        Reserved.
        6             DONE       This bit is valid only when the user-programmable arbitrary waveform is enabled (i.e., the PULS[3:0] bits (b3~0, PULS,...) are set
                                 to ‘1XXX’). This bit determines whether to enable the data writing/reading from RAM.
                                 0: Disable. (default)
                                 1: Enable.
        5              RW        This bit is valid only when the user-programmable arbitrary waveform is enabled (i.e., the PULS[3:0] bits (b3~0, PULS,...) are set
                                 to ‘1XXX’). This bit determines read/write direction.
                                 0: Write data to RAM. (default)
                                 1: Read data from RAM.
      4-0           SAMP[4:0]    These bits are valid only when the user-programmable arbitrary waveform is enabled (i.e., the PULS[3:0] bits (b3~0, PULS,...)
                                 are set to ‘1XXX’). These bits specify the RAM sample address.
                                 00000: The RAM sample address is 0. (default)
                                 00001: The RAM sample address is 1.
                                 00010: The RAM sample address is 2.
                                 ......
                                 10001: The RAM sample address is 17.
                                 10010: The RAM sample address is 18.
                                 10011 ~ 11111: The RAM sample address is 19.
AWG1 - Arbitrary Waveform Generation Control Register 1
Address: 009H, 049H, 089H, 0C9H, 109H, 149H, 189H, 1C9H, (CH1~CH8)
          209H, 249H, 289H, 2C9H, 309H, 349H, 389H, (CH9~CH15)
          7C9H (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                    5                   4                  3                   2                  1                   0
           -              WDAT6               WDAT5               WDAT4                WDAT3              WDAT2              WDAT1                WDAT0
      Bit             Name                                                                  Description
        7               -        Reserved.
      6-0          WDAT[6:0]     These bits are valid only when the user-programmable arbitrary waveform is enabled (i.e., the PULS[3:0] bits (b3~0, PULS,...)
                                 are set to ‘1XXX’).
                                 These bits contain the template sample data to be stored in RAM which address is specified by the SAMP[4:0] bits (b4~0,
                                 AWG0,...). They are not updated until new template sample data is written.
 Programming Information                                                        68                                                       December 17, 2009


 IDT82P20516                                                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
RCF0 - Receive Configuration Register 0
Address: 00AH, 04AH, 08AH, 0CAH, 10AH, 14AH, 18AH, 1CAH, (CH1~CH8)
          20AH, 24AH, 28AH, 2CAH, 30AH, 34AH, 38AH, (CH9~CH15)
          7CAH (CH0)
Type: Read / Write
Default Value: 47H
           7                 6                   5                    4                     3                   2                 1                   0
         RCKH              RHZ                R_OFF                R120IN              R_SING              R_TERM2            R_TERM1              R_TERM0
      Bit             Name                                                                     Description
        7             RCKH      This bit determines the output on RCLKn when LLOS is detected. This bit is valid only when LLOS is detected and the AIS and
                                pattern generation is disabled in the receive path.
                                0: XCLK. (default)
                                1: High level.
        6              RHZ      This bit determines the output of all receive system interfaced pins (including RDPn, RDNn and RCLKn) when the corresponding
                                receiver is powered down.
                                0: Low level.
                                1: High-Z. (default)
        5            R_OFF      This bit determines whether the receiver is powered down.
                                0: Normal operation. (default)
                                1: Power down.
        4            R120IN     This bit is valid only when the receive line interface is in Receive Differential mode and per-channel internal impedance matching
                                configuration is enabled. This bit selects the internal impedance matching mode.
                                0: Partially Internal Impedance Matching mode. An internal programmable resistor (IM) and a value-fixed external resistor (Rr)
                                are used. (default)
                                1: Fully Internal Impedance Matching mode. Only an internal programmable resistor (IM) is used.
        3            R_SING     This bit determines the receive line interface.
                                0: Receive Differential line interface. Both RTIPn and RRINGn are used to receive signal from the line side. (default)
      2-0          R_TERM[2:0]  These bits are valid only when impedance matching is configured on a per-channel basis. These bits select the impedance
                                matching mode of the receive path to match the cable impedance.
                                In Receive Differential mode:
                                010: The 120 Ω internal impedance matching is selected for E1 120 Ω twisted pair cable.
                                011: The 75 Ω internal impedance matching is selected for E1 75 Ω coaxial cable.
                                1XX: External impedance matching is selected for E1 120 Ω twisted pair cable and E1 75 Ω coaxial cable.
                                In Receive Single Ended mode, only External Impedance Matching is supported and the setting of these bits is a don’t-care.
                                (default)
 Programming Information                                                         69                                                        December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
RCF1 - Receive Configuration Register 1
Address: 00BH, 04BH, 08BH, 0CBH, 10BH, 14BH, 18BH, 1CBH, (CH1~CH8)
          20BH, 24BH, 28BH, 2CBH, 30BH, 34BH, 38BH, (CH9~CH15)
          7CBH (CH0)
Type: Read / Write
Default Value: 01H
            7                6                  5                     4                   3                 2               1                    0
            -                 -                  -               RCK_ES                RD_INV            R_CODE         R_MD1                 R_MD0
       Bit            Name                                                                   Description
      7-5                -      Reserved.
        4            RCK_ES     This bit selects the active edge of the RCLKn pin.
                                0: Rising edge. (default)
                                1: Falling edge.
        3            RD_INV     This bit determines the active level on the RDPn and RDNn pins.
                                0: Active high. (default)
                                1: Active low.
        2           R_CODE      This bit selects the line code rule for the receive path.
                                0: HDB3 (in E1 mode). (default)
                                1: AMI.
      1-0           R_MD[1:0]   These bits determines the receive system interface.
                                01: Receive Dual Rail NRZ Format system interface. The data is output on RDPn and RDNn in NRZ format and a 2.048 MHz (in
                                E1 mode) recovered clock is output on RCLKn. (default)
                                10: Receive Dual Rail RZ Format system interface. The data is output on RDPn and RDNn in RZ format and a 2.048 MHz (in E1
                                mode) recovered clock is output on RCLKn.
                                11: Receive Dual Rail Sliced system interface. The data is output on RDPn and RDNn in RZ format directly after passing through
                                the Slicer.
RCF2 - Receive Configuration Register 2
 Address: 00CH, 04CH, 08CH, 0CCH, 10CH, 14CH, 18CH, 1CCH, (CH1~CH8)
           20CH, 24CH, 28CH, 2CCH, 30CH, 34CH, 38CH, (CH9~CH15)
           7CCH (CH0)
 Type: Read / Write
 Default Value: 00H
            7                6                  5                     4                   3                 2               1                    0
             -                -                  -                    -                   -                 -             MG1                   MG0
       Bit            Name                                                                   Description
       7-2               -       Reserved.
       1-0           MG[1:0]     These bits select the Monitor Gain.
                                 00: 0 dB. (default)
                                 01: 20 dB.
                                 10: 26 dB.
                                 11: 32 dB.
 Programming Information                                                         70                                                 December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
LOS - LOS Configuration Register
 Address: 00DH, 04DH, 08DH, 0CDH, 10DH, 14DH, 18DH, 1CDH, (CH1~CH8)
           20DH, 24DH, 28DH, 2CDH, 30DH, 34DH, 38DH, (CH9~CH15)
           7CDH (CH0)
 Type: Read / Write
 Default Value: 15H
            7                6                   5                    4                 3                   2                     1                   0
           LAC            ALOS2               ALOS1                 ALOS0           TALOS1              TALOS0                TDLOS1               TDLOS0
       Bit            Name                                                                 Description
         7             LAC       This bit selects the LLOS, SLOS and AIS criteria.
                                 0: G.775 (in E1 mode). (default)
                                 1: ETSI 300233 & I.431 (in E1 mode).
       6-4          ALOS[2:0]    These bits select the amplitude threshold (Q). When the amplitude of the data is less than Q Vpp for N consecutive pulse inter-
                                 vals, LLOS is declared. The consecutive pulse intervals (N) are determined by the LAC bit (b7, LOS,...).
                                 The ALOS[2:0] settings for Normal Receive mode and Line Monitor mode are different. Refer to below tables.
                                                       ALOS[2:0] Setting in Normal Receive Mode
                                                             ALOS[2:0]           Q (Vpp)           vs. 6.0 Vpp (dB)       vs. 4.74 Vpp (dB)
                                                                000                0.5                   21.58                  19.54
                                                            001 (default)          0.7                   18.66                  16.61
                                                                010                0.9                   16.48                  14.43
                                                                 011               1.2                   13.98                   11.93
                                                                100                1.4                   12.64                  10.59
                                                                101                1.6                   11.48                    9.43
                                                                 110               1.8                   10.46                    8.41
                                                                 111               2.0                    9.54                    7.49
                                                       ALOS[2:0] Setting in Line Monitor Mode
                                                             ALOS[2:0]           Q (Vpp)           vs. 6.0 Vpp (dB)       vs. 4.74 Vpp (dB)
                                                                000                1.0                   15.56                  13.52
                                                            001 (default)          1.4                   12.64                  10.59
                                                                010                1.8                   10.46                    8.41
                                                                 011               2.2                    8.71                    6.67
                                                                 1xx                                   reserved.
       3-2          TALOS[1:0]   These bits select the amplitude threshold. When the amplitude of the data is less than the threshold for a certain period, TLOS is
                                 declared. The period is determined by the TDLOS bits (b1~0, LOS,...). When the amplitude of a pulse is above the threshold,
                                 TLOS is cleared.
                                 For Differential line interface:
                                 00: 1.2 Vp.
                                 01: 0.9 Vp. (default)
                                 10: 0.6 Vp.
                                 11: 0.4 Vp.
                                 For Single Ended line interface:
                                 00: 0.61 Vp.
                                 01: 0.48 Vp. (default)
                                 10: 0.32 Vp.
                                 11: 0.24 Vp.
 Programming Information                                                      71                                                          December 17, 2009


 IDT82P20516                                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
      1-0           TDLOS[1:0]  These bits select the period. When the amplitude of the data is less than a certain voltage for the period, TLOS is declared. The
                                voltage is determined by the TALOS bits (b3~2, LOS,...).
                                00: 16-pulse.
                                01: 32-pulse. (default)
                                1X: 64-pulse.
ERR - Error Detection & Insertion Control Register
Address: 00EH, 04EH, 08EH, 0CEH, 10EH, 14EH, 18EH, 1CEH, (CH1~CH8)
          20EH, 24EH, 28EH, 2CEH, 30EH, 34EH, 38EH, (CH9~CH15)
          7CEH (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                   5                      4                      3                    2                1              0
       EXZ_DEF           BPV_INS             ERR_INS                CNT_SEL2             CNT_SEL1               CNT_SEL0         CNT_MD        CNT_STOP
      Bit             Name                                                                         Description
        7            EXZ_DEF    This bit selects the EXZ definition standard.
                                0: ANSI. (default)
                                1: FCC.
        6            BPV_INS    This bit controls whether to insert a bipolar violation (BPV) to the transmit path.
                                Writing ‘1’ to this bit will insert a BPV on the next available mark in the data stream to be transmitted.
                                This bit is cleared once the BPV insertion is completed.
        5            ERR_INS    This bit controls whether to insert a single bit error to the generated PRBS/ARB pattern.
                                A transition from ‘0’ to ‘1’ on this bit will insert a single bit error to the generated PRBS/ARB pattern.
                                This bit is cleared once the single bit error insertion is completed.
      4-2          CNT_SEL[2:0] These bits select what kind of error to be counted by the internal Error Counter.
                                000: Disable. (default)
                                001: LBPV.
                                010: LEXZ.
                                011: LBPV + LEXZ.
                                100: SBPV.
                                101: SEXZ.
                                110: SBPV + SEXZ.
                                111: PRBS/ARB error.
        1            CNT_MD     This bit determines whether the ERRCH & ERRCL registers are updated automatically or manually.
                                0: Manually by setting the CNT_STOP bit (b0, ERR,...). (default)
                                1: Every-one second automatically.
        0           CNT_STOP This bit is valid only when the CNT_MD bit (b1, ERR,...) is ‘0’.
                                A transition from ‘0’ to ‘1’ on this bit updates the ERRCH & ERRCL registers.
                                This bit must be cleared before the next round.
 Programming Information                                                             72                                                    December 17, 2009


 IDT82P20516                                                                               16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
AISG - AIS Generation Control Register
Address: 00FH, 04FH, 08FH, 0CFH, 10FH, 14FH, 18FH, 1CFH, (CH1~CH8)
          20FH, 24FH, 28FH, 2CFH, 30FH, 34FH, 38FH, (CH9~CH15)
          7CFH (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                  5                    4                   3                 2          1             0
            -                -                   -                 TXAIS           ASAIS_SLOS         ASAIS_LLOS ALAIS_SLOS    ALAIS_LLOS
      Bit             Name                                                                  Description
      7-5               -       Reserved.
        4             TXAIS     This bit controls the transmission of AIS in the transmit path.
                                0: Disable. (default)
                                1: Transmit all ones pattern at TTIPn/TRINGn.
                                In remote loopback, this bit is ignored.
        3          ASAIS_SLOS   This bit controls the AIS generation in the receive path once SLOS is detected.
                                0: Disable. (default)
                                1: Enable.
        2          ASAIS_LLOS   This bit controls the AIS generation in the receive path once LLOS is detected.
                                0: Disable. (default)
                                1: Enable.
        1          ALAIS_SLOS   This bit controls the AIS generation in the transmit path once SLOS is detected.
                                0: Disable. (default)
                                1: Enable.
        0          ALAIS_LLOS   This bit controls the AIS generation in the transmit path once LLOS is detected.
                                0: Disable. (default)
                                1: Enable.
 Programming Information                                                        73                                          December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
PG - Pattern Generation Control Register
Address: 010H, 050H, 090H, 0D0H, 110H, 150H, 190H, 1D0H, (CH1~CH8)
          210H, 250H, 290H, 2D0H, 310H, 350H, 390H, (CH9~CH15)
          7D0H (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                   5                     4                  3                  2                  1                 0
           -              PG_CK              PG_EN1                PG_EN0             PG_POS             PAG_INV         PRBG_SEL1          PRBG_SEL0
      Bit             Name                                                                   Description
        7               -        Reserved.
        6            PG_CK       This bit selects the reference clock when the pattern (including PRBS, ARB & IB) is generated.
                                 When the pattern is generated in the receive path:
                                 0: XCLK. (default)
                                 1: Recovered clock from the received signal.
                                 When the pattern is generated in the transmit path:
                                 0: XCLK. (default)
                                 1: Transmit clock, i.e., the clock input on TCLKn (in Transmit Single Rail NRZ Format mode and in Transmit Dual Rail NRZ For-
                                 mat mode) or the clock recovered from the data input on TDPn and TDNn (in Transmit Dual Rail RZ Format mode)
      5-4          PG_EN[1:0] These bits select the pattern to be generated.
                                 00: Disable. (default)
                                 01: PRBS.
                                 10: ARB.
                                 11: IB.
        3           PG_POS       This bit selects the pattern (including PRBS, ARB & IB) generation direction.
                                 0: Transmit path. (default)
                                 1: Receive path.
        2           PAG_INV      This bit controls whether to invert the generated PRBS/ARB pattern.
                                 0: Normal. (default)
                                 1: Invert.
      1-0        PRBG_SEL[1:0] These bits are valid only when the PRBS pattern is generated. They select the PRBS pattern.
                                 00: 220 - 1 QRSS. (default)
                                 01: 215 - 1 PRBS.
                                 1X: 211 - 1 PRBS.
 Programming Information                                                        74                                                    December 17, 2009


 IDT82P20516                                                                               16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
PD - Pattern Detection Control Register
Address: 011H, 051H, 091H, 0D1H, 111H, 151H, 191H, 1D1H, (CH1~CH8)
          211H, 251H, 291H, 2D1H, 311H, 351H, 391H, (CH9~CH15)
          7D1H (CH0)
Type: Read / Write
Default Value: 03H
           7                 6                   5                     4                 3                    2     1            0
            -                -                    -                    -              PD_POS             PAD_INV PAD_SEL1     PAD_SEL0
      Bit             Name                                                                  Description
      7-4               -        Reserved.
        3            PD_POS      This bit selects the pattern (including PRBS, ARB & IB) detection direction.
                                 0: Receive path. (default)
                                 1: Transmit path.
        2            PAD_INV     This bit controls whether to invert the data before PRBS/ARB detection.
                                 0: Normal. (default)
                                 1: Invert.
      1-0          PAD_SEL[1:0] These bits select the desired PRBS/ARB pattern to be detected.
                                 00: 220 - 1 QRSS.
                                 01: 215 - 1 PRBS.
                                 10: 211 - 1 PRBS.
                                 11: ARB. (default)
 Programming Information                                                        75                                        December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
ARBL - Arbitrary Pattern Generation / Detection Low-Byte Register
Address: 012H, 052H, 092H, 0D2H, 112H, 152H, 192H, 1D2H, (CH1~CH8)
          212H, 252H, 292H, 2D2H, 312H, 352H, 392H, (CH9~CH15)
          7D2H (CH0)
Type: Read / Write
Default Value: 55H
           7                 6                   5                    4                   3                  2                  1                   0
         ARB7              ARB6               ARB5                  ARB4                ARB3               ARB2               ARB1                ARB0
      Bit             Name                                                                   Description
      7-0           ARB[7:0]     These bits, together with the ARB[23:8] bits, define the ARB pattern to be generated or detected. The ARB23 bit is the first bit to
                                 be generated or detected and the ARB0 bit is the last bit to be generated or detected.
ARBM - Arbitrary Pattern Generation / Detection Middle-Byte Register
Address: 013H, 053H, 093H, 0D3H, 113H, 153H, 193H, 1D3H, (CH1~CH8)
          213H, 253H, 293H, 2D3H, 313H, 353H, 393H, (CH9~CH15)
          7D3H (CH0)
Type: Read / Write
Default Value: 55H
           7                 6                  5                    4                   3                   2                  1                   0
        ARB15             ARB14               ARB13                ARB12               ARB11              ARB10               ARB9               ARB8
      Bit             Name                                                                   Description
      7-0           ARB[15:8]    (Refer to the description of the ARBL register.)
ARBH - Arbitrary Pattern Generation / Detection High-Byte Register
Address: 014H, 054H, 094H, 0D4H, 114H, 154H, 194H, 1D4H, (CH1~CH8)
          214H, 254H, 294H, 2D4H, 314H, 354H, 394H, (CH9~CH15)
          7D4H (CH0)
Type: Read / Write
Default Value: 55H
           7                 6                   5                    4                  3                   2                  1                   0
        ARB23             ARB22               ARB21                ARB20               ARB19              ARB18              ARB17              ARB16
      Bit             Name                                                                   Description
      7-0          ARB[23:16]    (Refer to the description of the ARBL register.)
 Programming Information                                                        76                                                      December 17, 2009


 IDT82P20516                                                                                    16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
IBL - Inband Loopback Control Register
 Address: 015H, 055H, 095H, 0D5H, 115H, 155H, 195H, 1D5H, (CH1~CH8)
           215H, 255H, 295H, 2D5H, 315H, 355H, 395H, (CH9~CH15)
           7D5H (CH0)
 Type: Read / Write
 Default Value: 01H
            7                  6                   5                     4                    3                  2                  1                   0
            -                  -                IBGL1                 IBGL0                IBAL1              IBAL0              IBDL1               IBDL0
       Bit             Name                                                                       Description
       7-6               -        Reserved.
       5-4           IBGL[1:0]    These bits define the length of the valid IB generation code programmed in the IBG[7:0] bits (b7~0, IBG,...).
                                  00: 5-bit long in the IBG[4:0] bits (b4~0, IBG,...). (default)
                                  01: 6-bit long in the IBG[5:0] bits (b5~0, IBG,...).
                                  10: 7-bit long in the IBG[6:0] bits (b6~0, IBG,...).
                                  11: 8-bit long in the IBG[7:0] bits (b7~0, IBG,...).
       3-2           IBAL[1:0]    These bits define the length of the valid target activate IB detection code programmed in the IBA[7:0] bits (b7~0, IBDA,...).
                                  00: 5-bit long in the IBA[4:0] bits (b4~0, IBDA,...). (default)
                                  01: 6-bit long in the IBA[5:0] bits (b5~0, IBDA,...).
                                  10: 7-bit long in the IBA[6:0] bits (b6~0, IBDA,...).
                                  11: 8-bit long in the IBA[7:0] bits (b7~0, IBDA,...).
       1-0           IBDL[1:0]    These bits define the length of the valid target deactivate IB detection code programmed in the IBD[7:0] bits (b7~0, IBDD,...).
                                  00: 5-bit long in the IBD[4:0] bits (b4~0, IBDD,...).
                                  01: 6-bit long in the IBD[5:0] bits (b5~0, IBDD,...). (default)
                                  10: 7-bit long in the IBD[6:0] bits (b6~0, IBDD,...).
                                  11: 8-bit long in the IBD[7:0] bits (b7~0, IBDD,...).
IBG - Inband Loopback Generation Code Definition Register
 Address: 016H, 056H, 096H, 0D6H, 116H, 156H, 196H, 1D6H, (CH1~CH8)
           216H, 256H, 296H, 2D6H, 316H, 356H, 396H, (CH9~CH15)
           7D6H (CH0)
 Type: Read / Write
 Default Value: 01H
            7                  6                   5                     4                    3                  2                  1                   0
          IBG7               IBG6                IBG5                  IBG4                 IBG3               IBG2               IBG1                IBG0
       Bit             Name                                                                       Description
       7-0            IBG[7:0]    The IBG[X:0] bits define the content of the IB generation code. The ‘X’ is determined by the IBGL[1:0] bits (b5~4, IBL,...). The
                                  IBG0 bit is the last bit to be generated. The code is generated repeatedly until the IB generation is stopped.
 Programming Information                                                           77                                                       December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
IBDA - Inband Loopback Detection Target Activate Code Definition Register
 Address: 017H, 057H, 097H, 0D7H, 117H, 157H, 197H, 1D7H, (CH1~CH8)
          217H, 257H, 297H, 2D7H, 317H, 357H, 397H, (CH9~CH15)
          7D7H (CH0)
 Type: Read / Write
 Default Value: 01H
            7                 6                   5                      4                3                   2                    1                  0
          IBA7              IBA6                IBA5                  IBA4              IBA3                IBA2                 IBA1               IBA0
       Bit            Name                                                                   Description
       7-0           IBA[7:0]    The IBA[X:0] bits define the content of the target activate IB detection code. The ‘X’ is determined by the IBAL[1:0] bits (b3~2,
                                 IBL,...). The IBA0 bit is the last bit to be detected.
IBDD - Inband Loopback Detection Target Deactivate Code Definition Register
 Address: 018H, 058H, 098H, 0D8H, 118H, 158H, 198H, 1D8H, (CH1~CH8)
          218H, 258H, 298H, 2D8H, 318H, 358H, 398H, (CH9~CH15)
          7D8H (CH0)
 Type: Read / Write
 Default Value: 09H
            7                 6                   5                      4                3                   2                    1                  0
          IBD7              IBD6                IBD5                  IBD4              IBD3                IBD2                 IBD1               IBD0
       Bit            Name                                                                   Description
       7-0           IBD[7:0]    The IBD[X:0] bits define the content of the target deactivate IB detection code. The ‘X’ is determined by the IBDL[1:0] bits (b1~0,
                                 IBL,...). The IBD0 bit is the last bit to be detected.
 Programming Information                                                           78                                                     December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
LOOP - Loopback Control Register
Address: 019H, 059H, 099H, 0D9H, 119H, 159H, 199H, 1D9H, (CH1~CH8)
          219H, 259H, 299H, 2D9H, 319H, 359H, 399H, (CH9~CH15)
          7D9H (CH0)
Type: Read / Write
Default Value: 00H
           7                 6                   5                   4                    3                  2                    1                  0
            -                -                    -                   -               AUTOLP                DLP                  RLP                ALP
      Bit             Name                                                                   Description
      7-4               -        Reserved.
        3           AUTOLP       This bit determines whether automatic Digital/Remote Loopback is enabled.
                                 0: Automatic Digital/Remote Loopback is disabled. (default)
                                 1: Automatic Digital/Remote Loopback is enabled. The corresponding channel will enter Digital/Remote Loopback when the acti-
                                 vate IB code is detected in the transmit/receive path for more than 5.1 sec.; and will return from Digital/Remote Loopback when
                                 the deactivate IB code is detected in the transmit/receive path for more than 5.1 sec.
        2              DLP       This bit controls whether Digital Loopback is enabled.
                                 0: Disable. (default)
                                 1: Enable.
        1              RLP       This bit controls whether Remote Loopback is enabled.
                                 0: Disable. (default)
                                 1: Enable.
        0              ALP       This bit controls whether Analog Loopback is enabled.
                                 0: Disable. (default)
                                 1: Enable.
 Programming Information                                                        79                                                         December 17, 2009


 IDT82P20516                                                                                       16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTES - Interrupt Trigger Edges Select Register
 Address: 01AH, 05AH, 09AH, 0DAH, 11AH, 15AH, 19AH, 1DAH, (CH1~CH8)
           21AH, 25AH, 29AH, 2DAH, 31AH, 35AH, 39AH, (CH9~CH15)
           7DAH (CH0)
 Type: Read / Write
 Default Value: 00H
            7                  6                     5                      4                    3                   2                     1                      0
            -               AIS_IES              PA_IES                TOC_IES             TCKLOS_IES            TLOS_IES              LOS_IES                IB_IES
       Bit              Name                                                                        Description
         7                -         Reserved.
         6            AIS_IES       This bit selects the transition edge of the LAIS_S bit (b6, STAT1,...) and the SAIS_S bit (b7, STAT1,...).
                                    0: A transition from ‘0’ to ‘1’ on the LAIS_S bit (b6, STAT1,...) / the SAIS_S bit (b7, STAT1,...) will set the LAIS_IS bit (b6,
                                    INTS1,...) / the SAIS_IS bit (b7, INTS1,...) to ‘1’ respectively. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the LAIS_S bit (b6, STAT1,...) / the SAIS_S bit (b7, STAT1,...) will set the
                                    LAIS_IS bit (b6, INTS1,...) / the SAIS_IS bit (b7, INTS1,...) to ‘1’ respectively.
         5             PA_IES       This bit selects the transition edge of the PA_S bit (b5, STAT1,...).
                                    0: A transition from ‘0’ to ‘1’ on the PA_S bit (b5, STAT1,...) will set the PA_IS bit (b5, INTS1,...) to ‘1’. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the PA_S bit (b5, STAT1,...) will set the PA_IS bit (b5, INTS1,...) to ‘1’.
         4           TOC_IES        This bit selects the transition edge of the TOC_S bit (b4, STAT0,...).
                                    0: A transition from ‘0’ to ‘1’ on the TOC_S bit (b4, STAT0,...) will set the TOC_IS bit (b4, INTS0,...) to ‘1’. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the TOC_S bit (b4, STAT0,...) will set the TOC_IS bit (b4, INTS0,...) to ‘1’.
         3          TCKLOS_IES      This bit selects the transition edge of the TCKLOS_S bit (b3, STAT0,...).
                                    0: A transition from ‘0’ to ‘1’ on the TCKLOS_S bit (b3, STAT0,...) will set the TCKLOS_IS bit (b3, INTS0,...) to ‘1’. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the TCKLOS_S bit (b3, STAT0,...) will set the TCKLOS_IS bit (b3, INTS0,...) to
                                    ‘1’.
         2           TLOS_IES       This bit selects the transition edge of the TLOS_S bit (b2, STAT0,...).
                                    0: A transition from ‘0’ to ‘1’ on the TLOS_S bit (b2, STAT0,...) will set the TLOS_IS bit (b2, INTS0,...) to ‘1’. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the TLOS_S bit (b2, STAT0,...) will set the TLOS_IS bit (b2, INTS0,...) to ‘1’.
         1            LOS_IES       This bit selects the transition edge of the LLOS_S bit (b0, STAT0,...) and the SLOS_S bit (b1, STAT0,...).
                                    0: A transition from ‘0’ to ‘1’ on the LLOS_S bit (b0, STAT0,...) / the SLOS_S bit (b1, STAT0,...) will set the LLOS_IS bit (b0,
                                    INTS0,...) / the SLOS_IS bit (b1, INTS0,...) to ‘1’ respectively. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the LLOS_S bit (b0, STAT0,...) / the SLOS_S bit (b1, STAT0,...) will set the
                                    LLOS_IS bit (b0, INTS0,...) / the SLOS_IS bit (b1, INTS0,...) to ‘1’ respectively.
         0             IB_IES       This bit selects the transition edge of the IBA_S bit (b1, STAT1,...) and the IBD_S bit (b0, STAT1,...).
                                    0: A transition from ‘0’ to ‘1’ on the IBA_S bit (b1, STAT1,...) / the IBD_S bit (b0, STAT1,...) will set the IBA_IS bit (b1, INTS1,...) /
                                    the IBD_IS bit (b0, INTS1,...) to ‘1’ respectively. (default)
                                    1: Any transition from ‘0’ to ‘1’ or from ‘1’ to ‘0’ on the IBA_S bit (b1, STAT1,...) / the IBD_S bit (b0, STAT1,...) will set the IBA_IS
                                    bit (b1, INTS1,...) / the IBD_IS bit (b0, INTS1,...) to ‘1’ respectively.
 Programming Information                                                               80                                                            December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTM0 - Interrupt Mask Register 0
 Address: 01BH, 05BH, 09BH, 0DBH, 11BH, 15BH, 19BH, 1DBH, (CH1~CH8)
           21BH, 25BH, 29BH, 2DBH, 31BH, 35BH, 39BH, (CH9~CH15)
           7DBH (CH0)
 Type: Read / Write
 Default Value: FFH
            7                6                    5                  4                  3                 2       1            0
        DAC_IM            TJA_IM               RJA_IM             TOC_IM           TCKLOS_IM           TLOS_IM SLOS_IM      LLOS_IM
       Bit             Name                                                                Description
         7           DAC_IM      This bit is the waveform amplitude overflow interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         6            TJA_IM     This bit is the TJA FIFO overflow and underflow interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         5            RJA_IM     This bit is the RJA FIFO overflow and underflow interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         4           TOC_IM      This bit is the Line Driver TOC interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         3          TCKLOS_IM    This bit is the TCLKn missing interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         2           TLOS_IM     This bit is the TLOS interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         1           SLOS_IM     This bit is the SLOS interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         0           LLOS_IM     This bit is the LLOS interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
 Programming Information                                                       81                                      December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTM1 - Interrupt Mask Register 1
 Address: 01CH, 05CH, 09CH, 0DCH, 11CH, 15CH, 19CH, 1DCH, (CH1~CH8)
           21CH, 25CH, 29CH, 2DCH, 31CH, 35CH, 39CH, (CH9~CH15)
           7DCH (CH0)
 Type: Read / Write
 Default Value: EFH
            7                 6                     5                    4               3               2         1             0
        SAIS_IM            LAIS_IM               PA_IM                   -                -              -      IBA_IM        IBD_IM
       Bit             Name                                                                  Description
         7           SAIS_IM       This bit is the SAIS interrupt mask.
                                   0: Interrupt is enabled.
                                   1: Interrupt is masked. (default)
         6           LAIS_IM       This bit is the LAIS interrupt mask.
                                   0: Interrupt is enabled.
                                   1: Interrupt is masked. (default)
         5             PA_IM       This bit is the PRBS/ARB pattern synchronization interrupt mask.
                                   0: Interrupt is enabled.
                                   1: Interrupt is masked. (default)
       4-2               -         Reserved.
         1            IBA_IM       This bit is the activate IB code interrupt mask.
                                   0: Interrupt is enabled.
                                   1: Interrupt is masked. (default)
         0            IBD_IM       This bit is the deactivate IB code interrupt mask.
                                   0: Interrupt is enabled.
                                   1: Interrupt is masked. (default)
 Programming Information                                                           82                                   December 17, 2009


 IDT82P20516                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTM2 - Interrupt Mask Register 2
 Address: 01DH, 05DH, 09DH, 0DDH, 11DH, 15DH, 19DH, 1DDH, (CH1~CH8)
           21DH, 25DH, 29DH, 2DDH, 31DH, 35DH, 39DH, (CH9~CH15)
           7DDH (CH0)
 Type: Read / Write
 Default Value: 3FH
            7                6                    5                  4                3                 2      1            0
            -                -                SBPV_IM            LBPV_IM         SEXZ_IM             LEXZ_IM ERR_IM      CNTOV_IM
       Bit            Name                                                               Description
       7-6               -       Reserved.
         5           SBPV_IM     This bit is the SBPV interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         4           LBPV_IM     This bit is the LBPV interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         3           SEXZ_IM     This bit is the SEXZ interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         2           LEXZ_IM     This bit is the LEXZ interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         1           ERR_IM      This bit is the PRBS/ARB error interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
         0          CNTOV_IM     This bit is the ERRCH and ERRCL registers overflow interrupt mask.
                                 0: Interrupt is enabled.
                                 1: Interrupt is masked. (default)
 Programming Information                                                      83                                    December 17, 2009


 IDT82P20516                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
STAT0 - Status Register 0
Address: 01EH, 05EH, 09EH, 0DEH, 11EH, 15EH, 19EH, 1DEH, (CH1~CH8)
          21EH, 25EH, 29EH, 2DEH, 31EH, 35EH, 39EH, (CH9~CH15)
          7DEH (CH0)
Type: Read
Default Value: 00H
           7                 6                   5                  4                  3                 2      1             0
     AUTOLP_S                -                   -               TOC_S            TCKLOS_S            TLOS_S SLOS_S        LLOS_S
      Bit             Name                                                                Description
        7          AUTOLP_S     This bit indicates the automatic Digital/Remote Loopback status.
                                0: Out of automatic Digital/Remote Loopback. (default)
                                1: In automatic Digital/Remote Loopback.
      6-5               -       Reserved.
        4            TOC_S      This bit indicates the TOC status.
                                0: No TOC is detected. (default)
                                1: TOC is detected.
        3          TCKLOS_S     This bit indicates the TCLKn missing status.
                                0: TCLKn is not missing. (default)
                                1: TCLKn is missing.
        2           TLOS_S      This bit indicates the TLOS status.
                                0: No TLOS is detected. (default)
                                1: TLOS is detected.
        1           SLOS_S      This bit indicates the SLOS status.
                                0: No SLOS is detected. (default)
                                1: SLOS is detected.
        0           LLOS_S      This bit indicates the LLOS status.
                                0: No LLOS is detected. (default)
                                1: LLOS is detected.
 Programming Information                                                      84                                     December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
STAT1 - Status Register 1
Address: 01FH, 05FH, 09FH, 0DFH, 11FH, 15FH, 19FH, 1DFH, (CH1~CH8)
          21FH, 25FH, 29FH, 2DFH, 31FH, 35FH, 39FH, (CH9~CH15)
          7DFH (CH0)
Type: Read
Default Value: 00H
           7                  6                   5                    4                3                  2                     1                    0
       SAIS_S              LAIS_S               PA_S                   -                -                  -                 IBA_S                 IBD_S
      Bit             Name                                                                 Description
        7            SAIS_S       This bit indicates the SAIS status.
                                  0: No SAIS is detected. (default)
                                  1: SAIS is detected.
        6            LAIS_S       This bit indicates the LAIS status.
                                  0: No LAIS is detected. (default)
                                  1: LAIS is detected.
        5              PA_S       This bit indicates the PRBS/ARB pattern synchronization status.
                                  0: The PRBS/ARB pattern is out of synchronization. (default)
                                  1: The PRBS/ARB pattern is in synchronization.
      4-2                -        Reserved.
        1             IBA_S       This bit indicates the activate IB code status.
                                  0: No activate IB code is detected. (default)
                                  1: Activate IB code is detected for more than 40 ms when the AUTOLP bit (b3, LOOP,...) is ‘0’ or activate IB code is detected for
                                  more than 5.1 sec. when the AUTOLP bit (b3, LOOP,...) is ‘1’.
        0             IBD_S       This bit indicates the deactivate IB code status.
                                  0: No deactivate IB code is detected. (default)
                                  1: Deactivate IB code is detected for more than 30 ms (in E1 mode) when the AUTOLP bit (b3, LOOP,...) is ‘0’ or deactivate IB
                                  code is detected for more than 5.1 sec. when the AUTOLP bit (b3, LOOP,...) is ‘1’.
 Programming Information                                                          85                                                     December 17, 2009


 IDT82P20516                                                                                    16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTS0 - Interrupt Status Register 0
 Address: 020H, 060H, 0A0H, 0E0H, 120H, 160H, 1A0H, 1E0H, (CH1~CH8)
           220H, 260H, 2A0H, 2E0H, 320H, 360H, 3A0H, (CH9~CH15)
           7E0H (CH0)
 Type: Read / Write
 Default Value: 00H
            7                 6                     5                      4                  3                     2                     1                  0
        DAC_IS             TJA_IS              RJA_IS                  TOC_IS            TCKLOS_IS               TLOS_IS               SLOS_IS          LLOS_IS
       Bit             Name                                                                      Description
         7            DAC_IS      This bit indicates the interrupt status of the waveform amplitude overflow.
                                  0: No waveform amplitude overflow interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: Waveform amplitude overflow interrupt is generated and is reported by the INT pin.
         6            TJA_IS      This bit indicates the interrupt status of the TJA FIFO overflow or underflow.
                                  0: No TJA FIFO overflow or underflow interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: TJA FIFO overflow or underflow interrupt is generated and is reported by the INT pin.
         5            RJA_IS      This bit indicates the interrupt status of the RJA FIFO overflow or underflow.
                                  0: No RJA FIFO overflow or underflow interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: RJA FIFO overflow or underflow interrupt is generated and is reported by the INT pin.
         4            TOC_IS      This bit indicates the interrupt status of the Line Driver TOC.
                                  0: No TOC interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: TOC interrupt is generated and is reported by the INT pin. When the TOC_IES bit (b4, INTES,...) is ‘0’, a transition from ‘0’ to
                                  ‘1’ on the TOC_S bit (b4, STAT0,...) set this bit to ‘1’; when the TOC_IES bit (b4, INTES,...) is ‘1’, any transition (from ‘0’ to ‘1’ or
                                  from ‘1’ to ‘0’) on the TOC_S bit (b4, STAT0,...) set this bit to ‘1’.
         3          TCKLOS_IS     This bit indicates the interrupt status of the TCLKn missing.
                                  0: No TCLKn missing interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: TCLKn missing interrupt is generated and is reported by the INT pin. When the TCKLOS_IES bit (b3, INTES,...) is ‘0’, a transi-
                                  tion from ‘0’ to ‘1’ on the TCKLOS_S bit (b3, STAT0,...) set this bit to ‘1’; when the TCKLOS_IES bit (b3, INTES,...) is ‘1’, any tran-
                                  sition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the TCKLOS_S bit (b3, STAT0,...) set this bit to ‘1’.
         2           TLOS_IS      This bit indicates the interrupt status of TLOS.
                                  0: No TLOS interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: TLOS interrupt is generated and is reported by the INT pin. When the TLOS_IES bit (b2, INTES,...) is ‘0’, a transition from ‘0’
                                  to ‘1’ on the TLOS_S bit (b2, STAT0,...) set this bit to ‘1’; when the TLOS_IES bit (b2, INTES,...) is ‘1’, any transition (from ‘0’ to
                                  ‘1’ or from ‘1’ to ‘0’) on the TLOS_S bit (b2, STAT0,...) set this bit to ‘1’.
         1           SLOS_IS      This bit indicates the interrupt status of the SLOS.
                                  0: No SLOS interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: SLOS interrupt is generated and is reported by the INT pin. When the LOS_IES bit (b1, INTES,...) is ‘0’, a transition from ‘0’ to
                                  ‘1’ on the SLOS_S bit (b1, STAT0,...) set this bit to ‘1’; when the LOS_IES bit (b1, INTES,...) is ‘1’, any transition (from ‘0’ to ‘1’ or
                                  from ‘1’ to ‘0’) on the SLOS_S bit (b1, STAT0,...) set this bit to ‘1’.
         0           LLOS_IS      This bit indicates the interrupt status of the LLOS.
                                  0: No LLOS interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: LLOS interrupt is generated and is reported by the INT pin. When the LOS_IES bit (b1, INTES,...) is ‘0’, a transition from ‘0’ to
                                  ‘1’ on the LLOS_S bit (b0, STAT0,...) set this bit to ‘1’; when the LOS_IES bit (b1, INTES,...) is ‘1’, any transition (from ‘0’ to ‘1’ or
                                  from ‘1’ to ‘0’) on the LLOS_S bit (b0, STAT0,...) set this bit to ‘1’.
 Programming Information                                                              86                                                       December 17, 2009


 IDT82P20516                                                                                        16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTS1 - Interrupt Status Register 1
 Address: 021H, 061H, 0A1H, 0E1H, 121H, 161H, 1A1H, 1E1H, (CH1~CH8)
           221H, 261H, 2A1H, 2E1H, 321H, 361H, 3A1H, (CH9~CH15)
           7E1H (CH0)
 Type: Read / Write
 Default Value: 00H
            7                  6                      5                      4                   3                     2                   1                       0
        SAIS_IS             LAIS_IS                 PA_IS                    -                    -                     -                IBA_IS                IBD_IS
       Bit              Name                                                                         Description
         7            SAIS_IS       This bit indicates the interrupt status of the SAIS.
                                    0: No SAIS interrupt is generated; or a ‘1’ is written to this bit. (default)
                                    1: SAIS interrupt is generated and is reported by the INT pin. When the AIS_IES bit (b6, INTES,...) is ‘0’, a transition from ‘0’ to ‘1’
                                    on the SAIS_S bit (b7, STAT1,...) set this bit to ‘1’; when the AIS_IES bit (b6, INTES,...) is ‘1’, any transition (from ‘0’ to ‘1’ or from
                                    ‘1’ to ‘0’) on the SAIS_S bit (b7, STAT1,...) set this bit to ‘1’.
         6            LAIS_IS       This bit indicates the interrupt status of the LAIS.
                                    0: No LAIS interrupt is generated; or a ‘1’ is written to this bit. (default)
                                    1: LAIS interrupt is generated and is reported by the INT pin. When the AIS_IES bit (b6, INTES,...) is ‘0’, a transition from ‘0’ to ‘1’
                                    on the LAIS_S bit (b6, STAT1,...) set this bit to ‘1’; when the AIS_IES bit (b6, INTES,...) is ‘1’, any transition (from ‘0’ to ‘1’ or from
                                    ‘1’ to ‘0’) on the LAIS_S bit (b6, STAT1,...) set this bit to ‘1’.
         5              PA_IS       This bit indicates the interrupt status of the PRBS/ARB pattern synchronization.
                                    0: No PRBS/ARB pattern synchronization interrupt is generated; or a ‘1’ is written to this bit. (default)
                                    1: PRBS/ARB pattern synchronization interrupt is generated and is reported by the INT pin. When the PA_IES bit (b5, INTES,...)
                                    is ‘0’, a transition from ‘0’ to ‘1’ on the PA_S bit (b5, STAT1,...) set this bit to ‘1’; when the PA_IES bit (b5, INTES,...) is ‘1’, any
                                    transition (from ‘0’ to ‘1’ or from ‘1’ to ‘0’) on the PA_S bit (b5, STAT1,...) set this bit to ‘1’.
       4-2                -         Reserved.
         1             IBA_IS       This bit indicates the interrupt status of the activate IB code.
                                    0: No activate IB code interrupt is generated; or a ‘1’ is written to this bit. (default)
                                    1: Activate IB code interrupt is generated and is reported by the INT pin. When the IB_IES bit (b0, INTES,...) is ‘0’, a transition
                                    from ‘0’ to ‘1’ on the IBA_S bit (b1, STAT1,...) set this bit to ‘1’; when the IB_IES bit (b0, INTES,...) is ‘1’, any transition (from ‘0’ to
                                    ‘1’ or from ‘1’ to ‘0’) on the IBA_S bit (b1, STAT1,...) set this bit to ‘1’.
         0             IBD_IS       This bit indicates the interrupt status of the deactivate IB code.
                                    0: No deactivate IB code interrupt is generated; or a ‘1’ is written to this bit. (default)
                                    1: Deactivate IB code interrupt is generated and is reported by the INT pin. When the IB_IES bit (b0, INTES,...) is ‘0’, a transition
                                    from ‘0’ to ‘1’ on the IBD_S bit (b0, STAT1,...) set this bit to ‘1’; when the IB_IES bit (b0, INTES,...) is ‘1’, any transition (from ‘0’ to
                                    ‘1’ or from ‘1’ to ‘0’) on the IBD_S bit (b0, STAT1,...) set this bit to ‘1’.
 Programming Information                                                                 87                                                          December 17, 2009


 IDT82P20516                                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
INTS2 - Interrupt Status Register 2
 Address: 022H, 062H, 0A2H, 0E2H, 122H, 162H, 1A2H, 1E2H, (CH1~CH8)
           222H, 262H, 2A2H, 2E2H, 322H, 362H, 3A2H, (CH9~CH15)
           7E2H (CH0)
 Type: Read / Write
 Default Value: 00H
            7                 6                   5                     4                    3                     2                1              0
             -                -               SBPV_IS               LBPV_IS             SEXZ_IS                 LEXZ_IS         ERR_IS          CNTOV_IS
       Bit             Name                                                                     Description
       7-6               -        Reserved.
         5           SBPV_IS      This bit indicates the interrupt status of the SBPV.
                                  0: No SBPV interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: SBPV interrupt is generated and is reported by the INT pin.
         4           LBPV_IS      This bit indicates the interrupt status of the LBPV.
                                  0: No LBPV interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: LBPV interrupt is generated and is reported by the INT pin.
         3           SEXZ_IS      This bit indicates the interrupt status of the SEXZ.
                                  0: No SEXZ interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: SEXZ interrupt is generated and is reported by the INT pin.
         2           LEXZ_IS      This bit indicates the interrupt status of the LEXZ.
                                  0: No LEXZ interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: LEXZ interrupt is generated and is reported by the INT pin.
         1            ERR_IS      This bit indicates the interrupt status of the PRBS/ARB error.
                                  0: No PRBS/ARB error interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: PRBS/ARB error interrupt is generated and is reported by the INT pin.
         0          CNTOV_IS      This bit indicates the interrupt status of the ERRCH and ERRCL registers overflow.
                                  0: No ERRCH or ERRCL register overflow interrupt is generated; or a ‘1’ is written to this bit. (default)
                                  1: ERRCH and ERRCL registers overflow interrupt is generated and is reported by the INT pin.
 Programming Information                                                           88                                                       December 17, 2009


 IDT82P20516                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
ERRCL - Error Counter Low-Byte Register
Address: 023H, 063H, 0A3H, 0E3H, 123H, 163H, 1A3H, 1E3H, (CH1~CH8)
          223H, 263H, 2A3H, 2E3H, 323H, 363H, 3A3H, (CH9~CH15)
          7E3H (CH0)
Type: Read
Default Value: 00H
            7                6                   5                    4                 3                2                  1                   0
         ERRC7            ERRC6              ERRC5                ERRC4               ERRC3            ERRC2             ERRC1               ERRC0
       Bit            Name                                                                 Description
      7-0           ERRC[7:0]    These bits, together with the ERRC[15:8] bits, reflect the accumulated error number in the internal Error Counter. They are
                                 updated automatically or manually, as determined by the CNT_MD bit (b1, ERR,...). They should be read in the next round of
                                 error counting; otherwise, they will be overwritten.
ERRCH - Error Counter High-Byte Register
 Address: 024H, 064H, 0A4H, 0E4H, 124H, 164H, 1A4H, 1E4H, (CH1~CH8)
          224H, 264H, 2A4H, 2E4H, 324H, 364H, 3A4H, (CH9~CH15)
          7E4H (CH0)
 Type: Read
 Default Value: 00H
            7                6                   5                    4                 3                2                  1                   0
        ERRC15           ERRC14              ERRC13               ERRC12              ERRC11           ERRC10            ERRC9               ERRC8
       Bit            Name                                                                 Description
       7-0          ERRC[15:8]   (Refer to the description of the ERRCL register.)
 Programming Information                                                        89                                                  December 17, 2009


 IDT82P20516                                                                                     16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
JM - Jitter Measurement Configuration For Channel 0 Register
 Address: 7E5H
 Type: Read / Write
 Default Value: 00H
            7                 6                   5                     4                    3                    2                1                   0
            -                 -                    -                    -                    -              JM_STOP            JM_MD               JM_BW
       Bit             Name                                                                       Description
       7-3               -        Reserved.
         2           JM_STOP      This bit is valid only when the JM_MD bit (b1, JM) is ‘0’.
                                  A transition from ‘0’ to ‘1’ on this bit updates the JIT_PH, JIT_PL and JIT_NH, JIT_NL registers.
                                  This bit must be cleared before the next round.
         1            JM_MD       This bit selects the jitter measurement period.
                                  0: The period is determined manually by setting the JM_STOP bit (b2, JM). (default)
                                  1: The period is one second automatically.
         0            JM_BW       This bit selects the bandwidth of the measured jitter.
                                  0: 20 Hz ~ 100 KHz (in E1 mode). (default)
                                  1: 18 KHz ~ 100 KHz (in E1 mode).
JIT_PL - Positive Peak Jitter Measurement Low-Byte Register
 Address: 7E6H
 Type: Read
 Default Value: 00H
            7                 6                     5                     4                    3                   2                1                   0
         JIT_P7            JIT_P6              JIT_P5                 JIT_P4               JIT_P3               JIT_P2           JIT_P1             JIT_P0
       Bit             Name                                                                       Description
       7-0          JIT_P[7:0]    These bits, together with the JIT_P[11:8] bits, reflect the greatest positive peak value of the demodulated jitter signal which is
                                  measured by channel 0. They are updated automatically or manually, as determined by the JM_MD bit (b1, JM). They should be
                                  read in the next round of jitter measurement; otherwise, they will be overwritten.
                                  The relationship between the greatest positive peak value and the indication in these bits is:
                                  Positive Peak = [JIT_PH, JIT_PL] / 16 (UIpp)
JIT_PH - Positive Peak Jitter Measurement High-Byte Register
 Address: 7E7H
 Type: Read
 Default Value: 00H
            7                 6                    5                    4                    3                    2                1                   0
            -                 -                    -                    -                JIT_P11              JIT_P10          JIT_P9              JIT_P8
       Bit             Name                                                                       Description
       7-4               -        Reserved.
       3-0          JIT_P[11:8]   (Refer to the description of the JIT_PL register.)
 Programming Information                                                            90                                                   December 17, 2009


 IDT82P20516                                                                                 16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
JIT_NL - Negative Peak Jitter Measurement Low-Byte Register
 Address: 7E8H
 Type: Read
 Default Value: 00H
            7                 6                  5                    4                   3                   2                   1                    0
         JIT_N7            JIT_N6             JIT_N5               JIT_N4              JIT_N3              JIT_N2              JIT_N1               JIT_N0
       Bit             Name                                                                   Description
       7-0           JIT_N[7:0]   These bits, together with the JIT_N[11:8] bits, reflect the greatest negative peak value of the demodulated jitter signal which is
                                  measured by channel 0. They are updated automatically or manually, as determined by the JM_MD bit (b1, JM). They should be
                                  read in the next round of jitter measurement; otherwise, they will be overwritten.
                                  The relationship between the greatest negative peak value and the indication in these bits is:
                                  Negative Peak = [JIT_NH, JIT_NL] / 16 (UIpp)
JIT_NH - Negative Peak Jitter Measurement High-Byte Register
 Address: 7E9H
 Type: Read
 Default Value: 00H
            7                 6                  5                    4                   3                   2                   1                    0
            -                 -                  -                    -               JIT_N11             JIT_N10              JIT_N9              JIT_N8
       Bit             Name                                                                   Description
       7-4               -        Reserved.
       3-0          JIT_N[11:8]   (Refer to the description of the JIT_NL register.)
 Programming Information                                                         91                                                      December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
6       JTAG                                                                        Data Input (TDI) pin, and shifted out of the registers via the Test Data
                                                                                    Output (TDO) pin. Both TDI and TDO are clocked at a rate determined
   The IDT82P20516 supports the digital Boundary Scan Specification                 by TCK.
as described in the IEEE 1149.1 standards.
                                                                                       The JTAG boundary scan registers include BSR (Boundary Scan
    The boundary scan architecture consists of data and instruction                 Register), DIR (Device Identification Register), BR (Bypass Register)
registers plus a Test Access Port (TAP) controller. The control of the TAP          and IR (Instruction Register). These will be described in the following
is achieved through signals applied to the Test Mode Select (TMS) and               pages. Refer to Figure-34 for architecture.
Test Clock (TCK) input pins. Data is shifted into the registers via the Test
                                                   BSR (Boundary Scan Register)
                                                DIR (Device Identification Register)                  MUX
                    TDI
                                                        BR (Bypass Register)
                                                                                                                        MUX                  TDO
                                                      IR (Instruction Register)
                                                                    Control
                   TMS
                                                TAP                                              Select
                  TRST                     (Test Access
                                          Port) Controller                                    Output Enable
                   TCK
                                                          Figure-34 JTAG Architecture
6.1     JTAG INSTRUCTION REGISTER (IR)                                              6.2.3   BOUNDARY SCAN REGISTER (BSR)
   The IR with instruction decode block is used to select the test to be               The bidirectional ports interface to 2 boundary scan cells:
executed or the data register to be accessed or both.                                    - In cell: The input cell is observable only.
                                                                                         - Out cell: The output cell is controllable and observable.
  The instructions include: EXTEST, SAMPLE/PRELOAD, IDCODE,
BYPASS, CLAMP and HIGHZ.                                                            6.3     TEST ACCESS PORT (TAP) CONTROLLER
6.2     JTAG DATA REGISTER                                                             The TAP controller is a 16-state synchronous state machine. The
                                                                                    states include: Test Logic Reset, Run-Test/Idle, Select-DR-Scan,
6.2.1   DEVICE IDENTIFICATION REGISTER (IDR)                                        Capture-DR, Shift-DR, Exit1-DR, Pause-DR, Exit2-DR, Update-DR,
  The IDR can be set to define the Version, the Part Number, the                    Select-IR-Scan, Capture-IR, Shift-IR, Exit1-IR, Pause-IR, Exit2-IR and
Manufacturer Identity and a fixed bit.                                              Update-IR.
6.2.2   BYPASS REGISTER (BYP)                                                          Figure-35 shows the state diagram. Note that the figure contains two
                                                                                    main branches to access either the data or instruction registers. The
   The BYP consists of a single bit. It can provide a serial path between           value shown next to each state transition in this figure states the value
the TDI input and the TDO output. Bypassing the BYR will reduce test                present at TMS at each rising edge of TCK.
access times.
JTAG                                                                           92                                                    December 17, 2009


IDT82P20516                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
            1
              Test-logic Reset
                        0
            0                  1                        1                          1
               Run Test/Idle              Select-DR                   Select-IR
                                                  0                           0
                                   1                           1
                                         Capture-DR                  Capture-IR
                                                  0                           0
                                                        0                         0
                                           Shift-DR                    Shift-IR
                                                 1                           1
                                                        1                         1
                                          Exit1-DR                    Exit1-IR
                                                 0                           0
                                                        0                          0
                                          Pause-DR                    Pause-IR
                                                 1                           1
                                   0                           0
                                          Exit2-DR                    Exit2-IR
                                                  1                          1
                                         Update-DR                   Update-IR
                                            1         0                 1       0
                                 Figure-35 JTAG State Diagram
JTAG                                               93                                December 17, 2009


  IDT82P20516                                                                               16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
7           THERMAL MANAGEMENT                                                      7.2 EXAMPLE OF JUNCTION TEMPERATURE CAL-
     The device is designed to operate over the industry temperature
                                                                                    CULATION
range -40°C ~ +85°C. To ensure the functionality and reliability of the                 Assume:
device, the maximum junction temperature, Tjmax, should not exceed                           TA = 85 °C
125°C. In some applications, the device will consume more power and a                        θJA = 23.7 °C/W (airflow: 0 m/s)
thermal solution should be provided to ensure the junction temperature                       P = 1.46 W (E1 120 Ω, 100% ones, External Impedance matching)
Tj does not exceed Tjmax. Below is a table listing thermal data for the
                                                                                        The junction temperature Tj can be calculated as follows:
IDT82P20516.
                                                                                             Tj = TA + P * θJA = 85 °C + 1.46 W X 23.7 °C/W = 119.6 °C
     Package        θJC (°C/W) 1    θJB (°C/W) 2   θJA (°C/W) 3    Airflow (m/s)        The junction temperature of 119.6 °C is below the maximum junction
                                                        23.7             0          temperature of 125 °C, so no extra heat enhancement is required.
                                                        18.7             1              In some operation environments, the calculated junction temperature
                                                                                    might exceed the maximum junction temperature of 125 °C and an
   484-pin BF                                           17.0             2          external thermal solution such as a heatsink is required.
                         4.2              5.3
                                                        16.1             3
                                                                                    7.3       HEATSINK EVALUATION
                                                        15.5             4
                                                                                        A heatsink is expanding the surface area of the device to which it is
                                                        15.0             5          attached. θJA is now a combination of device case and heatsink thermal
  Note:                                                                             resistance, as the heat flowing from the die junction to ambient goes
  1. Junction-to-Case Thermal Resistance                                            through the package and the heatsink. θJA can be calculated as follows:
  2. Junction-to-Board Thermal Resistance
  3. Junction-to-Ambient Thermal Resistance                                                  Equation 2:        θJA = θJC + θHA
                                                                                        Where:
7.1         JUNCTION TEMPERATURE                                                             θJC = Junction-to-Case (heatsink) Thermal Resistance
                                                                                             θHA = Heatsink-to-Ambient Thermal Resistance
     Junction temperature Tj is the temperature of package typically at the
geographical center of the chip where the device's electrical circuits are.             For the IDT82P20516, θJC is 4.2 °C/W.
It can be calculated as follows:
                                                                                        θHA determines which heatsink can be selected to ensure the junc-
           Equation 1:       Tj = TA + P * θJA
                                                                                    tion temperature does not exceed Tjmax. According to Equation 1 and 2,
     Where:                                                                         the heatsink-to-ambient thermal resistance θHA can be calculated as
           θJA = Junction-to-Ambient Thermal Resistance of the package              follows:
           Tj = Junction Temperature                                                         Equation 3:        θHA = (Tj - TA) / P - θJC
           TA = Ambient Temperature
                                                                                        Assume:
           P = Device Power Consumption                                                      Tj = 125 °C (Tjmax)
     For the IDT82P20516, the above values are:                                              TA = 85 °C
           θJA = 23.7 °C/W (when airflow rate is 0 m/s. See the above table )                P = 2.72 W (E1 75 Ω, 100% ones, Fully Internal Impedance matching)
           Tjmax = 125 °C                                                                    θJC = 4.2 °C/W
           TA = - 40 °C ~ 85 °C                                                         The Heatsink-to-Ambient thermal resistance θHA can be calculated
           P = Refer to Section 8.3 Device Power Consumption and Dissipation        as follows:
           (Typical) 1
                                                                                             θHA = (125 °C - 85 °C ) / 2.72 W - 4.2 °C/W = 10.51°C/W
                                                                                        That is, if a heatsink whose heatsink-to-ambient thermal resistance
                                                                                    θHA is below or equal to 10.51 °C/W is used in such operation environ-
                                                                                    ment, the junction temperature will not exceed the maximum junction
                                                                                    temperature.
 Thermal Management                                                              94                                                       December 17, 2009


 IDT82P20516                                                                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8          PHYSICAL AND ELECTRICAL SPECIFICATIONS
8.1        ABSOLUTE MAXIMUM RATINGS
              Symbol                                         Parameter                                        Min                      Max                       Unit
               VDDD                    Digital Core Power Supply                                              -0.5                      2.2                        V
               VDDA                    Analog Core Power Supply                                               -0.5                      4.6                        V
              VDDIO                    I/O Power Supply                                                       -0.5                      4.6                        V
            VDDT0~15                   Power Supply for Transmitter Driver                                    -0.5                      4.6                        V
            VDDR0~15                   Power Supply for Receiver                                              -0.5                      4.6                        V
                                       Input Voltage, Any Digital Pin                                       GND - 0.5                    6                         V
                Vin                    Input Voltage, Any RTIP and RRING pin 1                              GND - 0.5             VDDR + 0.5                       V
                                       ESD Voltage, Any Pin 2                                                 2000                                                 V
                                       Transient Latch-up Current, Any Pin                                                             100                        mA
                Iin                    Input Current, Any Digital Pin 3                                        -10                      10                        mA
                                       DC Input Current, Any Analog Pin 3                                                             ±100                        mA
                Pd                     Maximum Power Dissipation in Package                                                           1.68 4                       W
                 Tj                    Junction Temperature                                                                            125                        °C
                Ts                     Storage Temperature                                                     -65                    +150                        °C
 Note:
 1. Reference to ground.
 2. Human body model.
 3. Constant input current.
 4. If device power consumption exceeds this value, a heatsink or a fan must be used. Refer to Chapter 7 Thermal Management.
 Caution:
 Exceeding the above values may cause permanent damage. Functional operation under these conditions is not implied. Exposure to absolute maximum rating conditions for extended
 period may affect device reliability.
 Physical And Electrical Specifications                                                    95                                                      December 17, 2009


 IDT82P20516                                                                                          16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.2       RECOMMENDED OPERATING CONDITIONS
              Symbol                                   Parameter                              Min                      Typ.                  Max          Unit
                 Top                   Operating Temperature Range                            -40                                            85 1          °C
              VDDIO                    Digital I/O Power Supply                              3.13                       3.3                  3.47           V
               VDDA                    Analog Core Power Supply                              3.13                       3.3                  3.47           V
               VDDD                    Digital Core Power Supply                             1.71                       1.8                  1.89           V
               VDDT                    Power Supply for Transmitter Driver                   3.13                       3.3                  3.47           V
               VDDR                    Power Supply for Receiver                             3.13                       3.3                  3.47           V
                  VIL                  Input Low Voltage                                      -0.5                                            0.8           V
                 VIH                   Input High Voltage                                      2.0                                      VDDIO+0.5           V
 Note:
 1. An external thermal solution such as heatsink may be required depending on the mode of operation. Refer to Chapter 7 Thermal Management.
 Physical And Electrical Specifications                                                  96                                                       December 17, 2009


 IDT82P20516                                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.3       DEVICE POWER CONSUMPTION AND DISSIPATION (TYPICAL) 1
                                                                                             Total Device Power Dissipation                              Per-Channel
                                               Total Consumption (W)
                                                                                             (for Thermal Consideration, W)                     Power Down Saving (mW) 2
     Mode           Parameter                                                               Fully         Partially                          Fully          Partially
                                         1.8 V           3.3 V           Total            Internal        Internal      External 5         Internal         Internal          External 5
                                                                                       R120IN=1 3        R120IN=0 4                      R120IN=1 3       R120IN=0 4
   E1/120 Ω            PRBS               0.18            1.73            1.91              1.91            1.48           1.20                80              60                   40
                   100% ones              0.18            2.31            2.49              2.49            1.87           1.46               130              90                   70
    E1/75 Ω            PRBS               0.18            1.86            2.04              2.04            1.77           0.98                90              60                   50
                   100% ones              0.18            2.54            2.72              2.72            2.33           1.32               150             120                   80
 Note:
 1. Test conditions: VDDx (typical) at 25 °C operating temperature (ambient).
 2. The R_OFF bit (b5, RCF0,...) and T_OFF bit (b5, TCF0,...) are set to ‘1’ to enable per-channel power down.
 3. The transmitter is in Internal Impedance Matching mode and the receiver is in Fully Internal Impedance Matching mode. That is, the R120IN bit (b4, RCF0,...) is set to ‘1’. And the
 T_TERM[2:0] bits (b2~0, TCF0,...) and R_TERM[2:0] bits (b2~0, RCF0,...) are set according to different cable conditions.
 4. The transmitter is in Internal Impedance Matching mode and the receiver is in Partially Internal Impedance Matching mode. That is, the R120IN bit (b4, RCF0,...) is set to ‘0’. And the
 T_TERM[2:0] bits (b2~0, TCF0,...) and R_TERM[2:0] bits (b2~0, RCF0,...) are set according to different cable conditions.
 5. For E1 mode, both the transmitter and the receiver are in External Impedance Matching mode. That is, the T_TERM[2:0] bits (b2~0, TCF0,...) are set to ‘111’ and the R_TERM[2:0]
 bits (b2~0, RCF0,...) are set to ‘1xx’.
 Physical And Electrical Specifications                                                       97                                                             December 17, 2009


 IDT82P20516                                                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.4       DEVICE POWER CONSUMPTION AND DISSIPATION (MAXIMUM) 1
                                                                                                                                    Total Device Power Dissipation
                                                                   Total Consumption (W)
                                                                                                                                    (for Thermal Consideration, W)
         Mode                  Parameter
                                                                                                                        Fully Internal       Partially Internal
                                                      1.89 V                3.47 V                     Total                                                              External 4
                                                                                                                         R120IN=1 2            R120IN=0 3
       E1/120 Ω                  PRBS                  0.22                   1.82                      2.04                 2.04                   1.68                      1.40
                               100% ones               0.22                   2.43                      2.65                 2.65                   2.08                      1.67
       E1/75 Ω                   PRBS                  0.22                   1.95                      2.17                 2.17                   1.98                      0.98
                               100% ones               0.22                   2.67                      2.89                 2.89                   2.53                      1.37
 Note:
 1. Test conditions: VDDx (maximum) at 85 °C operating temperature (ambient).
 2. The transmitter is in Internal Impedance Matching mode and the receiver is in Fully Internal Impedance Matching mode. That is, the R120IN bit (b4, RCF0,...) is set to ‘1’. And the
 T_TERM[2:0] bits (b2~0, TCF0,...) and R_TERM[2:0] bits (b2~0, RCF0,...) are set according to different cable conditions.
 3. The transmitter is in Internal Impedance Matching mode and the receiver is in Partially Internal Impedance Matching mode. That is, the R120IN bit (b4, RCF0,...) is set to ‘0’. And the
 T_TERM[2:0] bits (b2~0, TCF0,...) and R_TERM[2:0] bits (b2~0, RCF0,...) are set according to different cable conditions.
 4. For E1 mode, both the transmitter and the receiver are in External Impedance Matching mode. That is, the T_TERM[2:0] bits (b2~0, TCF0,...) are set to ‘111’ and the R_TERM[2:0]
 bits (b2~0, RCF0,...) are set to ‘1xx’.
 Physical And Electrical Specifications                                                       98                                                            December 17, 2009


 IDT82P20516                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.5       D.C. CHARACTERISTICS
   @ TA = -40 to +85 °C, VDDIO = 3.3 V ± 5%, VDDD = 1.8 V ± 5%
    Symbol                              Parameter                Min    Typ.    Max    Unit          Test Conditions
     VOL        Output Low Voltage                                              0.40     V   VDDIO = 3.13 V, IOL = 4 mA, 8 mA
     VOH        Output High Voltage                               2.4          VDDIO     V   VDDIO = 3.13 V, IOH = 4 mA, 8 mA
      VT+       Schmitt Trigger Input Low to High Threshold      1.47                    V
      VT-       Schmitt Trigger Input High to Low Threshold                     0.89     V
      Rpu       Internal Pull-up /Pull-down Resistor              50     70     115     KΩ
       IIL      Input Low Current                                 -1      0      +1     µA   VIL = GNDD
      IIH       Input High Current                                -1     0       +1     µA   VIH = VDDIO
      Cin       Input Digital Pin Capacitance                                    10     pF
     Cout       Output Load Capacitance                                          50     pF
     Cout       Output Load Capacitance (bus pins)                              100     pF
      IZL       Leakage Current of Digital Output in High-Z mode -10             10     µA   GNDIO < VO < VDDIO
     ZOH        Output High-Z on TTIPn, TRINGn pins               10                    KΩ
 Physical And Electrical Specifications                              99                                December 17, 2009


 IDT82P20516                                                         16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.6       E1 RECEIVER ELECTRICAL CHARACTERISTICS
                  Parameter                    Min       Typ.   Max       Unit                    Test Conditions
 Receiver Sensitivity of Receive Differen-                15               dB
 tial mode with Cable Loss @ 1024 KHz                                           with Nominal Pulse Amplitude of 3.0 V for 120 Ω
                                                                                and 2.37 V for 75 Ω termination, adding -18 dB
 Receiver Sensitivity of Receive Single                   12               dB
                                                                                interference signal.
 Ended mode with Cable Loss @ 1024
 kHz
 Signal to Noise Interference Margin           -16                         dB   @cable loss 0-6 dB
 Analog LOS Level         ALOS[2:0]
 (Normal Mode)            000                             0.5             Vpp   In Differential mode, measured between RTIP and
                          001 (default)                   0.7                   RRING pins.
                          010                             0.9                   In Singled Ended mode, measured between RTIP
                          011                             1.2                   and GNDA pins
                          100                             1.4                   Refer to Table-10 for LLOS Criteria Declare and
                          101                             1.6                   Clear.
                          110                             1.8
                          111                             2.0
                          LOS hysteresis                 0.25
 Analog LOS Level         ALOS[2:0]
 (Line Monitor Mode) 000                                  1.0             Vpp   Measured on the line with the monitor gain set by
                          001 (default)                   1.4                   the MG[1:0] bits (b1~0, RCF2,...) equal to the
                          010                             1.8                   resistive attenuation. Refer to Table-10 for LLOS
                          011                             2.2                   Criteria Declare and Clear.
                          1xx (reserved)
                          LOS hysteresis                 0.41
 Allowable Consecutive Zeros before LOS:
    G.775                                                 32
    I.431 / ETSI300233                                   2048
 LOS Reset                                    12.5                       % ones G.775, ETSI 300233
 Receive Intrinsic Jitter                                       0.05      U.I.  JA disabled; wide band
 Input Jitter Tolerance:
    1 Hz ~ 20 Hz                                80                        U.I.  G.823, with 6 dB Cable Attenuation
    20 Hz ~ 2.4 KHz                             10                        U.I.
    18 KHz ~ 100 KHz                           0.6                        U.I.
                                           Refer to Fig-
                                             ure-39
 Receiver Differential Input Impedance                    2.6             KΩ
                                                                                @1024 KHz; Rx port is high-Z
 Receiver Common Mode Input Imped-                        1.6             KΩ
 ance to GND
 Physical And Electrical Specifications                       100                                           December 17, 2009


IDT82P20516                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
               Parameter               Min Typ.   Max      Unit                 Test Conditions
Receiver Single Ended mode Input            3.1            KΩ    The RRINGn pins are open.
Impedance to GND
Receive Return Loss:
   51 KHz ~ 102 KHz                    12                  dB    G.703
  102 KHz ~ 2.048 MHz                  18                  dB
  2.048 MHz ~ 3.072 MHz                14                  dB
Receive Path Delay:
  Single Rail                                     6.6      U.I.  JA Disabled
  Dual Rail NRZ                                   1.8      U.I.
  Dual Rail RZ                                    1.5      U.I.
Physical And Electrical Specifications          101                                      December 17, 2009


 IDT82P20516                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.7       E1 TRANSMITTER ELECTRICAL CHARACTERISTICS
                               Parameter                           Min       Typ.         Max       Unit        Test Conditions
 Output Pulse Amplitude:                                                                                     Differential Line Inter-
    E1, 75 Ω load                                                  2.14      2.37        2.60        V       face mode
    E1, 120 Ω load                                                  2.7       3.0         3.3        V
 Zero (Space) Level:                                                                                         Differential Line Inter-
    E1, 75 Ω load                                                 -0.237                +0.237       V       face mode
    E1, 120 Ω load                                                 -0.3                   0.3        V
 Transmit Amplitude Variation with Supply                           -1                    +1         %
 Output Pulse Width at 50% of Nominal Amplitude                    232       244          256        ns
 Ratio of the Amplitudes of Positive and Negative Pulses at the    0.95                  1.05
 Center of the Pulse Interval (G.703)
 Ratio of the Width of Positive and Negative Pulses at the Center  0.95                  1.05
 of the Pulse Interval (G.703)
 Transmit Analog LOS Level (TALOS)         TALOS[1:0]
 (Differential line interface)             00                                 1.2                    Vp      Measured on the TTIP
                                           01 (default)                       0.9                            and TRING pins.
                                           10                                 0.6
                                           11                                 0.4
                                           TALOS hysteresis                  0.08
 Transmit Analog LOS Level (TALOS)         TALOS[1:0]
 (Single Ended line interface)             00                                0.61                    Vp      Measured on the TTIP
                                           01 (default)                      0.48                            pin.
                                           10                                0.32
                                           11                                0.24
                                           TALOS hysteresis                  0.04
 Transmit Return Loss (G.703):                                                                               Internal Impedance
    51 KHz ~ 102 KHz                                                 8                              dB       Matching
    102 KHz ~ 2.048 MHz                                             14                              dB
    2.048 MHz ~ 3.072 MHz                                           10                              dB
 Intrinsic Transmit Jitter                                                                                   TCLK is jitter free
    20 Hz ~ 100 KHz                                                                      0.050      U.I.
 Transmit Path Delay:
    Single Rail                                                               8.5                   U.I.     JA is disabled
    Dual Rail NRZ                                                             4.5                   U.I.
    Dual Rail RZ                                                              4.4                   U.I.
 Line Short Circuit Current                                                  100                   mAp       Measured on pin
 Physical And Electrical Specifications                                  102                               December 17, 2009


 IDT82P20516                                                                                             16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.8         TRANSMITTER AND RECEIVER TIMING CHARACTERISTICS
          Symbol                                     Parameter                                        Min                 Typ.                 Max                     Unit
                                MCLK Frequency:
                                   E1                                                                                  2.048 X n                                       MHz
                                                                                                                      (n = 1 ~ 8)
                                MCLK Tolerance                                                        -100                                     100                     ppm
                                MCLK Duty Cycle                                                         30                                      70                        %
  Transmit Path
                                TCLK Frequency:
                                   E1                                                                                    2.048                                         MHz
                                TCLK Tolerance                                                         -50                                     +50                     ppm
                                TCLK Duty Cycle                                                         10                                      90                        %
               t1               Transmit Data Setup Time                                                40                                                               ns
               t2               Transmit Data Hold Time                                                 40                                                               ns
                                Delay Time of OE low to Driver High-Z                                                                            1                       µs
  Receive Path
                                Clock Recovery Capture Range 1:
                                   E1                                                                                  +80 / -80                                       ppm
                                RCLK Duty Cycle 2                                                       40                 50                   60                        %
               t4               RCLK Pulse Width 2:
                                   E1                                                                  457                488                  519                       ns
               t5               RCLK Pulse Width Low Time:
                                   E1                                                                  203                244                  285                       ns
               t6               RCLK Pulse Width High Time:
                                   E1                                                                  203                244                  285                       ns
                                Rise/Fall Time 3                                                        20                                                               ns
               t7               Receive Data Setup Time:
                                   E1                                                                  200                244                                            ns
               t8               Receive Data Hold Time:
                                   E1                                                                  200                244                                            ns
  Note:
  1. Relative to nominal frequency, MCLK = +100 or -100 ppm.
  2. RCLK duty cycle width will vary depending on extent of the received pulse jitter displacement. Maximum and minimum RCLK duty cycles are for worst case jitter conditions (0.2 UI
  displacement for E1 per ITU G.823).
  3. For all digital outputs. Cload = 15 pF.
 Physical And Electrical Specifications                                                      103                                                       December 17, 2009


IDT82P20516                                                       16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
            TCLKn
                                                     t1                    t2
           TDn/TDPn
              TDNn
                                       Figure-36 Transmit Clock Timing Diagram
                                                        t4
           RCLK                                t6                  t5
                                               t7                  t8
           RDn/RDPn
           (RCK_ES = 0)
           RDNn
                                                                   t7                 t8
           RDn/RDPn
           (RCK_ES = 1)
           RDNn
                                       Figure-37 Receive Clock Timing Diagram
Physical And Electrical Specifications                     104                                December 17, 2009


 IDT82P20516                                                               16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.9     CLKE1 TIMING CHARACTERISTICS
       Symbol                               Parameter                    Min          Typ.         Max          Unit
  CLKE1 outputs 2.048 MHz clock
          t1            CLKE1 Pulse Width                                             488                        ns
          t2            CLKE1 Pulse Width High Time                      232          244          256           ns
          t3            CLKE1 Pulse Width Low Time                       232          244          256           ns
          t4            LLOS Data Setup Time                             217          244          271           ns
          t5            LLOS Data Hold Time                              217          244          271           ns
  CLKE1 outputs 8kHz clock
          t1            CLKE1 Pulse Width                                             125                        µs
          t2            CLKE1 Pulse Width High Time                      62.4         62.5         62.6          µs
          t3            CLKE1 Pulse Width Low Time                       62.4         62.5         62.6          µs
          t4            LLOS Data Setup Time                            62.38         62.5        62.62          µs
          t5            LLOS Data Hold Time                             62.38         62.5        62.62          µs
                                                                t1
                     CLKE1                              t2                     t3
                                                        t4                    t5
                     LLOS
                                                 Figure-38 CLKE1 Clock Timing Diagram
 Physical And Electrical Specifications                            105                                  December 17, 2009


 IDT82P20516                                                                   16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.10 JITTER ATTENUATION CHARACTERISTICS
                                      Parameter                                 Min         Typ.       Max          Unit
 Jitter Transfer Function Corner (-3 dB) Frequency:
    E1, 32/64/128-bit FIFO                           JA_BW = 0                              6.63                     Hz
                                                     JA_BW = 1                              0.87                     Hz
 Jitter Attenuator:
    E1 (G.736)                                       @ 3 Hz                     -0.5                                 dB
                                                     @ 40 Hz                    -0.5                                 dB
                                                     @ 400 Hz                  +19.5                                 dB
                                                     @ 100 KHz                 +19.5                                 dB
 Jitter Attenuator Latency Delay:
    32-bit FIFO                                                                              16                     U.I.
    64-bit FIFO                                                                              32                     U.I.
    128-bit FIFO                                                                             64                     U.I.
 Input Jitter Tolerance before FIFO Overflow or
 Underflow:                                                                                  28                     U.I.
    32-bit FIFO                                                                              56                     U.I.
    64-bit FIFO                                                                             120                     U.I.
    128-bit FIFO
                                                   Figure-39 E1 Jitter Tolerance Performance
 Physical And Electrical Specifications                                106                                 December 17, 2009


IDT82P20516                                                        16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
                                       Figure-40 E1 Jitter Transfer Performance
Physical And Electrical Specifications                     107                                 December 17, 2009


 IDT82P20516                                                                                16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.11 MICROPROCESSOR INTERFACE TIMING                                                write operation. Following the instruction, an 11-bit address is clocked in
                                                                                    on SDI to specify the register. If the device is in a read operation, the
8.11.1 SERIAL MICROPROCESSOR INTERFACE                                              data read from the specified register is output on SDO on the falling
    A falling transition on CS indicates the start of a read/write operation,       edge of SCLK (refer to Figure-41). If the device is in a write operation,
and a rising transition indicates the end of the operation. After CS is set         the data written to the specified register is input on SDI following the
to low, a 5-bit instruction on SDI is input to the device on the rising edge        address byte (refer to Figure-42).
of SCLK. If the MSB is ‘1’, it is a read operation. If the MSB is ‘0’, it is a
   CS
                       0   1     2     3   4     5    6     7   8    9     10   11    12   13   14   15   16   17    18   19    20  21    22   23
 SCLK
                            Instruction                           Register Address
  SDI              R/W        Don't Care      A10 A9 A8        A7   A6 A5 A4 A3 A2             A1 A0                     Don't-Care
                                                    High-Z
  SDO                                                                                                    D7 D6 D5 D4 D3 D2 D1 D0
                                       Figure-41 Read Operation in Serial Microprocessor Interface
    CS
                        0   1     2     3   4     5     6    7    8    9    10   11    12   13   14   15   16   17    18   19    20  21    22   23
   SCLK
                             Instruction                          Register Address                                       Data Byte
    SDI              R/W       Don't Care      A10 A9      A8 A7 A6       A5 A4 A3         A2 A1 A0 D7 D6 D5 D4 D3 D2 D1 D0
                                                     High-Z
   SDO
                                       Figure-42 Write Operation in Serial Microprocessor Interface
 Physical And Electrical Specifications                                        108                                                    December 17, 2009


IDT82P20516                                                                  16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
       Symbol                                  Description                             Min.      Max.                Units
          fOP          SCLK Frequency                                                             2.0                MHz
         tCSH          Minimum CS High Time                                            100                            ns
         tCSS          CS Setup Time                                                    50                            ns
         tCSD          CS Hold Time                                                    100                            ns
         tCLD          Clock Disable Time                                               50                            ns
         tCLH          Clock High Time                                                 205                            ns
         tCLL          Clock Low Time                                                  205                            ns
          tDIS         Data Setup Time                                                  50                            ns
          tDIH         Data Hold Time                                                  150                            ns
          tPD          Output Delay                                                              150                  ns
           tDF         Output Disable Time                                                        50                  ns
                                                                                                      t
                                                                                                        CSH
                CS
                                                                                                         tCLD
                                       tCSS              tCLH        tCLL               tCSD
               SCLK
                                            tDIS     tDIH
                SDI                          Valid Input
                                                                 tPD                              t
                                                                                                    DF
                                     High-Z                                                                   High-Z
               SDO                                                        Valid Output
                                                       Figure-43 Timing Diagram
Physical And Electrical Specifications                              109                                       December 17, 2009


 IDT82P20516                                                              16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
8.12 JTAG TIMING CHARACTERISTICS
      Symbol                       Parameter                       Min           Typ.         Max            Unit
         t1        TCK Period                                      100                                        ns
         t2        TMS to TCK Setup Time; TDI to TCK Setup Time     25                                        ns
         t3        TCK to TMS Hold Time; TCK to TDI Hold Time       25                                        ns
         t4        TCK to TDO Delay Time                                                       50             ns
                                                                   t1
       TCK
                                           t2          t3
       TMS
       TDI
                                                                       t4
       TDO
                                                       Figure-44 JTAG Timing
 Physical And Electrical Specifications                          110                                  December 17, 2009


                                            Glossary
 AIS     — Alarm Indication Signal
 AMI     — Alternate Mark Inversion
 ARB     — Arbitrary Pattern
 B8ZS    — Binary 8 Zero Substitution
 BPV     — Bipolar Violation
 CF      — Corner Frequency
 CV      — Code Violation
 DPLL    — Digital Phase Locked Loop
 EXZ     — Excessive Zeroes
 FIFO    — First In First Out
 HDB3    — High Density Bipolar 3
 HPS     — Hitless Protection Switching
 IB      — Inband Loopback
 LAIS    — Line Alarm Indication Signal
 LBPV    — Line Bipolar Violation
 LEXZ    — Line Excessive Zeroes
 LLOS    — Line Loss of Signal
 LOS     — Loss Of Signal
 NRZ     — Non-Return to Zero
 PBX     — Private Branch Exchange
 PRBS    — Pseudo Random Bit Sequence
 QRSS    — Quasi-Random Signal Source
 RJA     — Receive Jitter Attenuator
 RZ      — Return to Zero
 SAIS    — System Alarm Indication Signal
 SBPV    — System Bipolar Violation
 SDH     — Synchronous Digital Hierarchy
Glossary                                111  December 17, 2009


IDT82P20516                                           16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
 SEXZ       — System Excessive Zeroes
 SLOS       — System LOS
 SONET      — Synchronous Optical Network
 TEPBGA     — Thermally Enhanced Plastic Ball Grid Array
 TJA        — Transmit Jitter Attenuator
 TLOS       — Transmit Loss of Signal
 TOC        — Transmit Over Current
Glossary                                  112                                     December 17, 2009


                                                                                                                                                                                                 Index
A                                                                                                             I
Alarm Indication Signal (AIS) ............................................................. 35                impedance matching
                                                                                                                    receive
B                                                                                                                         External Impedance Matching ................................................ 19
                                                                                                                          Fully Internal Impedance Matching .......................................... 19
Bipolar Violation (BPV) ....................................................................... 31                        Partially Internal Impedance Matching ..................................... 19
                                                                                                                    transmit
C                                                                                                                         External Impedance Matching ................................................ 27
                                                                                                                          Internal Impedance Matching ................................................. 27
cable
      coaxial cable ........................................................................ 19, 27           Interrupt .............................................................................................. 47
      twisted pair cable ................................................................. 19, 27
clock input                                                                                                   J
      MCLK ......................................................................................... 46       JA-Limit .............................................................................................. 30
      XCLK .......................................................................................... 46      Jitter Measurement (JM) .................................................................... 44
clock output                                                                                                  JTAG ............................................................................................17, 92
      CLKT1/CLKE1 ............................................................................ 45
Code Violation (CV) ............................................................................ 31           L
common control .................................................................................. 16          line interface .......................................................................... 12, 19, 27
Corner Frequency (CF) ...................................................................... 30                     receive
                                                                                                                          Differential ............................................................................ 19
D                                                                                                                   transmit
                                                                                                                          Differential ............................................................................ 27
decoder .............................................................................................. 22
                                                                                                              line monitor ........................................................................................ 21
                                                                                                              loopback
E
                                                                                                                    Analog Loopback ....................................................................... 40
encoder .............................................................................................. 24           Digital Loopback ........................................................................ 42
error counter ....................................................................................... 38            Remote Loopback ...................................................................... 41
Excessive Zeroes (EXZ) ..................................................................... 31               Loss of Signal (LOS) .......................................................................... 32
                                                                                                                    Line LOS (LLOS) ....................................................................... 32
F                                                                                                                   System LOS (SLOS) .................................................................. 33
                                                                                                                    Transmit LOS (TLOS) ................................................................ 34
free running ........................................................................................ 45
                                                                                                              M
G
                                                                                                              microprocessor interface ..............................................................17, 50
G.772 Monitoring ................................................................................ 43
                                                                                                              monitoring
                                                                                                                    G.772 monitoring ....................................................................... 43
H                                                                                                                   line monitor ................................................................................ 21
heatsink .............................................................................................. 94
high impedance ........................................................12, 19, 23, 27, 29                     P
Hitless Protection Switch (HPS) ......................................................... 19                  pattern
hitless switch ...................................................................................... 19            ARB ......................................................................................36, 37
hot-swap ............................................................................................. 19           Inband Loopback (IB) ...........................................................36, 38
                                                                                                                    PRBS ...................................................................................36, 37
hot-switchover .................................................................................... 19
 Index                                                                                                     113                                                                        December 17, 2009


 IDT82P20516                                                                                                            16-CHANNEL SHORT HAUL E1 LINE INTERFACE UNIT
power down ................................................................................. 23, 29              system interface .................................................................... 13, 22, 23
      receiver ....................................................................................... 23             receive
      transmitter ................................................................................... 29                    Dual Rail NRZ Format ........................................................... 22
                                                                                                                            Dual Rail RZ Format .............................................................. 22
Protected Non-Intrusive Monitoring .................................................... 21
                                                                                                                            Dual Rail Sliced .................................................................... 22
                                                                                                                            Single Rail NRZ Format ......................................................... 22
R                                                                                                                     transmit
receive sensitivity ............................................................................... 21                      Dual Rail NRZ Format ........................................................... 23
                                                                                                                            Dual Rail RZ Format .............................................................. 23
reset                                                                                                                       Single Rail NRZ Format ......................................................... 23
      global software reset .................................................................. 50
      hardware reset ............................................................................ 50
      power-on reset ............................................................................ 50             T
Rx clock & data recovery .................................................................... 22                 T1 / E1 / J1 mode selection ............................................................... 19
                                                                                                                 Transmit Over Current (TOC) ............................................................ 27
S
slicer ................................................................................................... 22    W
                                                                                                                 waveform template ............................................................................. 24
 Index                                                                                                        114                                                                  December 17, 2009


IDT82P20516                                                              16-CHANNEL      SHORT HAUL
                                                                                 HIGH-DENSITY               E1 LINE INTERFACE UNIT
                                                                                                     T1/E1/J1
ORDERING INFORMATION
          XXXXXXX      XX                      X
         Device Type Package      Process/Temperature Range
                                                                    BLANK          Industrial (-40 °C to +85 °C)
                                                                    BF             Fine Pitch Ball Grid Array
                                                                                   (484-pin Fine Pitch BGA, BF484)
                                                                    BFG            Green Fine Pitch Ball Grid Array
                                                                                   (484-pin Fine Pitch BGA, BFG484)
                                                                    82P20516       16 High-Density E1 Line Interface Unit
                                                                    82P20516D      16 High-Density E1 Line Interface Unit
                                                                                   (Gold Bond Wire)
                        CORPORATE HEADQUARTERS                    for SALES:                               for Tech Support:
                        6024 Silver Creek Valley Road             1-800-345-7015 or 408-284-8200           408-360-1552
                        San Jose, CA 95138                        fax: 408-284-2775                        email:wireline@idt.com
                                                                  www.idt.com
                          IDT and the IDT logo are trademarks of Integrated Device Technology, Inc.
                                                              115


 IMPORTANT NOTICE AND DISCLAIMER
 RENESAS ELECTRONICS CORPORATION AND ITS SUBSIDIARIES (“RENESAS”) PROVIDES TECHNICAL
 SPECIFICATIONS AND RELIABILITY DATA (INCLUDING DATASHEETS), DESIGN RESOURCES (INCLUDING
 REFERENCE DESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND
 OTHER RESOURCES “AS IS” AND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED,
 INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 PARTICULAR PURPOSE, OR NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS.
 These resources are intended for developers skilled in the art designing with Renesas products. You are solely responsible
 for (1) selecting the appropriate products for your application, (2) designing, validating, and testing your application, and (3)
 ensuring your application meets applicable standards, and any other safety, security, or other requirements. These
 resources are subject to change without notice. Renesas grants you permission to use these resources only for
 development of an application that uses Renesas products. Other reproduction or use of these resources is strictly
 prohibited. No license is granted to any other Renesas intellectual property or to any third party intellectual property.
 Renesas disclaims responsibility for, and you will fully indemnify Renesas and its representatives against, any claims,
 damages, costs, losses, or liabilities arising out of your use of these resources. Renesas' products are provided only subject
 to Renesas' Terms and Conditions of Sale or other applicable terms agreed to in writing. No use of any Renesas resources
 expands or otherwise alters any applicable warranties or warranty disclaimers for these products.
                                                                                                               (Rev.1.0 Mar 2020)
Corporate Headquarters                                                  Contact Information
TOYOSU FORESIA, 3-2-24 Toyosu,                                          For further information on a product, technology, the most
Koto-ku, Tokyo 135-0061, Japan                                          up-to-date version of a document, or your nearest sales
www.renesas.com                                                         office, please visit:
                                                                        www.renesas.com/contact/
Trademarks
Renesas and the Renesas logo are trademarks of Renesas
Electronics Corporation. All trademarks and registered
trademarks are the property of their respective owners.
                                                                      © 2020 Renesas Electronics Corporation. All rights reserved.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Renesas Electronics:
 82P20516DBFG
