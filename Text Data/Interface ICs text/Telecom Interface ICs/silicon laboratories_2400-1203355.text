                                                                                                                                                             Si2400
V. 22 B I S I S O M O D E M ® W I T H I N T E G R A T E D G L O B A L D A A
Features
   Data Modem Formats                                                            Integrated DAA                                                   i240
                                                                                                                                                    S   0
    z   2400 bps: V.22bis                                                          z   Capacitive Isolation
    z   1200 bps: V.22, V.23, Bell 212A                                            z   Parallel Phone Detect
    z   300 bps: V.21, Bell 103                                                    z   Globally Compliant Line Interface
    z   Fast Connect and V.23 Reversing                                            z   Overcurrent Detection                                                                15
                                                                                                                                                                          i3 0
    z   SIA and other security protocols                                          AT Command Set Support                                                            S
 Caller ID Detection and Decode                                                  Integrated Voice Codec
 DTMF Tone Gen./Detection                                                        PCM Data Pass-Through Mode
                                                                                                                                               Ordering Information
 3.3 V or 5.0 V Power                                                            HDLC Framing in Hardware
 UART with Flow Control                                                          Call Progress Support                                                See page 90.
                                                                                  Pb-Free/RoHS-Compliant
                                                                                   Packages Available
                                                                                                                                                    Pin Assignments
Applications
                                                                                                                                                            Si2400
 Set Top Boxes                             Security Systems                                                      Medical Monitoring      XTALI       1            16      EOFR/GPIO1
 Power Meters                              ATM Terminals                                                         Point-of-Sale          XTALO        2            15      CD/AIN/GPIO2
                                                                                                                                          CLKOUT        3            14      ESC/GPIO3
                                                                                                                                               VD                            ISOB
Description                                                                                                                                             4            13
                                                                                                                                             RXD*       5            12      GND
The Si2400 ISOmodem® is a complete modem chipset with integrated                                                                             TXD*       6            11      C1A
direct access arrangement (DAA) that provides a programmable line                                                                            CTS        7            10      ALERT/GPIO4
                                                                                                                                           RESET        8             9      AOUT
interface to meet global telephone line requirements. Available in two 16-
pin small outline (SOIC) packages, it eliminates the need for a separate
DSP data pump, modem controller, analog front end (AFE), isolation                                                                                          Si3015
transformer, relays, opto-isolators, 2- to 4-wire hybrid, and voice codec.
                                                                                                                                             QE2        1            16      FILT2
The Si2400 is ideal for embedded modem applications due to its small                                                                         DCT                             FILT
                                                                                                                                                        2            15
board space, low power consumption, and global compliance.                                                                                   IGND       3                    RX
                                                                                                                                                                     14
                                                                                                                                             C1B        4            13      REXT
Functional Block Diagram                                                                                                                    RNG1        5            12      REXT2
                                                                                                                                            RNG2        6            11      REF
                                          Si2400                                                                  Si3015                      QB        7            10      VREG2
                                                                                                                                              QE        8             9      VREG
                RXD                                                                                                             RX
                                  UART
                TXD
                        MUX
                                              μ Controller
                                             (AT Decoder                                                                        FILT
                                            Call Progress)                                                          Hybrid
                                                                                                                     and
                                                                                                                                FILT2
                                                                                                                                REF
                                                                                                                                         Patents pending
                                                             Isolation Interface            Isolation Interface
              RESET                                                                                                   DC        DCT
                                                                                                                  Termination   VREG
        EO FR/G PIO 1                                                                                                           VREG2
    CD/AIN/G PIO 2                              DSP                                                                             REXT
                                            (Data Pump)                                                                         REXT2
         ESC/G PIO 3       Control
    ALERT/G PIO 4         Interface
                                                                                                                                RNG 1
                CTS                                                                                                             RNG 2
                                                                                                                  Ring Detect
                                                                                                                                QB
                                               Audio                                                               O ff-Hook
                                                                                                                                QE
            CLKOUT                             Codec                                                                            QE2
                                Clock
               XTALI
                              Interface
              XTALO
                                               AOUT
Rev. 1.3 8/06                                                Copyright © 2006 by Silicon Laboratories                                                                                Si2400


Si2400
2      Rev. 1.3


                                                                                                                        Si2400
TA B L E O F C O N T E N TS
Section                                                                                                                           Page
1. Electrical Specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .4
2. Typical Application Schematic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
3. Bill of Materials . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
4. Analog Input/Output . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
5. Functional Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
     5.1. Digital Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
     5.2. Configurations and Data Rates . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
     5.3. Low Power Modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
     5.4. Global DAA Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
     5.5. Parallel Phone Detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
     5.6. Loop Current Detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
     5.7. Carrier Detect/Loss . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
     5.8. Overcurrent Detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
     5.9. Caller ID Decoding Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .22
     5.10. Tone Generation and Tone Detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .23
     5.11. PCM Data Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
     5.12. Analog Codec . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
     5.13. V.23 Operation/V.23 Reversing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
     5.14. V.42 HDLC Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
     5.15. Fast Connect . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
     5.16. Clock Generation Subsystem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
6. AT Command Set . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .29
     6.1. Command Line Execution . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
     6.2. < CR > End Of Line Character . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
     6.3. AT Command Set Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .30
     6.4. S-Register Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
     6.5. Alarm Industry AT Commands . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
     6.6. Modem Result Codes and Call Progress . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
7. Low Level DSP Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .40
     7.1. DSP Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
     7.2. Call Progress Filters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
8. S Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
Appendix A—DAA Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
Appendix B—Typical Modem Applications Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . .84
Appendix C—UL1950 3rd Edition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
9. Pin Descriptions: Si2400 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .86
10. Pin Descriptions: Si3015 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .88
11. Ordering Guide . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
12. Package Outline: 16-Pin SOIC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
Document Change List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .92
Contact Information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .94
                                                            Rev. 1.3                                                                      3


Si2400
1. Electrical Specifications
Table 1. Recommended Operating Conditions
 Parameter1                                     Symbol           Test Condition              Min2      Typ      Max2       Unit
 Ambient Temperature                               TA                K-Grade                   0        25        70        °C
 Ambient Temperature                               TA                B-Grade                  –40       25        85        °C
 Si2400 Supply Voltage, Digital3                   VD                                         3.0     3.3/5.0    5.25        V
 Notes:
    1. The Si2400 specifications are guaranteed when the typical application circuit (including component tolerance) and any
        Si2400 and any Si3015 are used. See Figure 3 on page 10 for a typical application circuit.
    2. All minimum and maximum specifications are guaranteed and apply across the recommended operating conditions. Typical
        values apply at nominal supply voltages and an operating temperature of 25 °C unless otherwise stated.
    3. The digital supply, VD, can operate from either 3.3 V or 5.0 V. The Si2400 interface supports 3.3 V logic when operating
        from 3.3 V. The 3.3 V operation applies to both the serial port and the digital signals CTS, CLKOUT, GPIO1–4, and RESET.
4                                                             Rev. 1.3


                                                                                                            Si2400
Table 2. Loop Characteristics
(VD = 3.0 to 5.25 V, TA = 0 to 70°C for K-Grade and –40 to 85°C for B-Grade, See Figure 1)
 Parameter                                  Symbol           Test Condition          Min       Typ        Max        Unit
                                                                           1
 DC Termination Voltage                       VTR       IL = 20 mA, ACT = 1b         —          —         7.5         V
                                                          DCT = 11b (CTR21)
 DC Termination Voltage                       VTR        IL = 42 mA, ACT = 1b        —          —         14.5        V
                                                          DCT = 11b (CTR21)
 DC Termination Voltage                       VTR        IL = 50 mA, ACT = 1b        —          —          40         V
                                                          DCT = 11b (CTR21)
 DC Termination Voltage                       VTR        IL = 60 mA, ACT = 1b        40         —          —          V
                                                          DCT = 11b (CTR21)
 DC Termination Voltage                       VTR        IL = 20 mA, ACT = 0b        —          —          6.0        V
                                                           DCT = 01b (Japan)
 DC Termination Voltage                       VTR      IL = 100 mA, ACT = 0b          9         —          —          V
                                                           DCT = 01b (Japan)
 DC Termination Voltage                       VTR        IL = 20 mA, ACT = 0b        —          —          7.5        V
                                                           DCT = 10b (FCC)
 DC Termination Voltage                       VTR      IL = 100 mA, ACT = 0b          9         —          —          V
                                                           DCT = 10b (FCC)
 DC Termination Voltage                       VTR        IL = 15 mA, ACT = 0b        —          —          5.2        V
                                                                DCT = 00b
                                                              (Low Voltage)
 On Hook Leakage Current2                      ILK             VTR = –48V            —          —           7        µA
 Operating Loop Current                        ILP         FCC/Japan Modes           13         —         120        mA
 Operating Loop Current                        ILP            CTR21 Mode             13         —          60        mA
 DC Ring   Current2                                        DC current flowing        —          —           7        µA
                                                        through ring detection
                                                                 circuitry
 Ring Detect Voltage3                         VRD                RT = 0b             11         —          22       VRMS
 Ring Detect   Voltage3                       VRD                RT = 1b             17         —          33       VRMS
 Ring Frequency4                               FR                                    15         —          68         Hz
 Ringer Equivalence     Number5               REN                                    —          —         0.2
 Notes:
    1. SF[4] (ACT); SF5[3:2] (DCT); SF5[0] (RT).
    2. R25 and R26 installed.
    3. The ring signal is guaranteed to not be detected below the minimum. The ring signal is guaranteed to be detected
        above the maximum.
    4. The Si2400 ring detector can be programmed to detect rings between this range.
    5. C15, R14, Z2, and Z3 not installed. SF5[1] (RZ) = 0b. See "Ringer Impedance" on page 80.
                                                            Rev. 1.3                                                      5


Si2400
Table 3. DC Characteristics1
(VD = 4.75 to 5.25 V, TA = 0 to 70°C for K-Grade, TA = –40 to 85°C for B-Grade)
 Parameter                                          Symbol       Test Condition      Min      Typ     Max       Unit
 High Level Input Voltage                              VIH                            2.1      —        —         V
 Low Level Input Voltage                               VIL                            —        —       0.8        V
 High Level Output Voltage                            VOH           IO = –2 mA        2.4      —        —         V
 Low Level Output Voltage                             VOL            IO = 2 mA        —        —       0.4        V
 Low Level Output Voltage, GPIO1–4                    VOL           IO = 20 mA        —        —       0.6        V
 Input Leakage Current                                  IL                           –10       —       10        µA
 CTS Leakage to     Ground2                            ICL                            —        10       —        µA
 Power Supply Current, Digital3                         ID             VD pin         —        28      32        mA
 Power Supply Current, DSP Power Down3                  ID             VD pin         —        16      19        mA
 Power Supply Current, Wake-On-Ring (ATZ)               ID             VD pin         —        10      11        mA
 Power Supply Current, Total Power Down                 ID             VD pin         —        12      15        µA
    1. Measurements are taken with inputs at rails and no loads on outputs.
    2. Must be met in order to avoid putting the Si2400 into factory test mode.
    3. Specifications assume SE1[7:6] (MCKR) = 00b (default). Typical value is 4 mA lower when MCKR = 01b and 6 mA
        lower when MCKR = 10b.
Table 4. DC Characteristics1
(VD = 3.0 to 3.6 V, TA = 0 to 70°C for K-Grade, TA = –40 to 85°C for B-Grade)
 Parameter                                          Symbol       Test Condition      Min      Typ     Max       Unit
 High Level Input Voltage                             VIH                            2.1       —       —          V
 Low Level Input Voltage                              VIL                             —        —       0.8        V
 High Level Output Voltage                            VOH          IO = –2 mA        2.4       —       —          V
 Low Level Output Voltage                             VOL           IO = 2 mA         —        —      0.35        V
 Low Level Output Voltage, GPIO1–4                    VOL          IO = 15 mA         —        —       0.6        V
 Input Leakage Current                                 IL                            –10       —       10        µA
 CTS Leakage to Ground2                               ICL                             —         3      —         µA
 Power Supply Current, Digital3                        ID              VD pin         —        15      21        mA
 Power Supply Current, DSP Power         Down3         ID              VD pin         —         9      14        mA
 Power Supply Current, Wake-On-Ring                    ID              VD pin         —         5       8        mA
 Power Supply Current, Total Power Down                ID              VD pin         —        10      12        µA
    1. Measurements are taken with inputs at rails and no loads on outputs.
    2. Must be met in order to avoid putting the Si2400 into factory test mode.
    3. Specifications assume SE1[7:6] (MCKR) = 00b (default). Typical value is 4 mA lower when MCKR = 01b and 6 mA
        lower when MCKR = 10b.
6                                                          Rev. 1.3


                                                                                                        Si2400
                                                TIP
                                                      +
                                                          600 Ω
                                      Si3015      V TR                                    IL
                                                          10 μ F
                                                      –
                                             RING
                                   Figure 1. Test Circuit for Loop Characteristics
Table 5. AC Characteristics
(VD = 3.0 to 3.6 V, or 4.75 to 5.25 V, TA = 0 to 70°C for K-Grade, TA = –40 to 85°C for B-Grade)
 Parameter                                  Symbol             Test Condition             Min     Typ   Max  Unit
 Sample Rate                                   Fs                                          —       9.6   —   KHz
 Crystal Oscillator Frequency                 FXTL                                         —     4.9152  —   MHz
 Transmit Frequency Response                               Low –3 dBFS Corner              —        5    —   Hz
 Receive Frequency Response                                Low –3 dBFS Corner              —        5    —   Hz
 Transmit Full Scale Level1                   VFS           FULL = 0 (–1 dBm)              —        1    —  VPEAK
                                                          FULL = 1 (+3.2 dBm)2             —      1.58   —  VPEAK
 Receive Full Scale Level1                    VFS           FULL = 0 (–1 dBm)              —        1    —  VPEAK
                                                          FULL = 1 (+3.2 dBm)2             —      1.58   —  VPEAK
 Dynamic Range3,4,5                            DR         ACT6 = 0b, DCT6 = 10b            —        82   —    dB
                                                              (FCC) IL=100 mA
 Dynamic Range3,4,7                            DR          ACT = 0b, DCT = 01b             —       83    —    dB
                                                             (Japan) IL = 20 mA
 Dynamic Range3,4,5                            DR          ACT = 1b, DCT = 11b             —        84   —    dB
                                                            (CTR21) IL = 60 mA
 Transmit Total Harmonic                      THD       ACT = 0b, DCT = 10b (FCC)          —      –85    —    dB
 Distortion5,8                                                   IL = 100 mA
 Transmit Total Harmonic                      THD          ACT = 0b, DCT = 01b             —      –76    —   dB
 Distortion6,8                                               (Japan) IL = 20 mA
 Receive Total Harmonic                       THD          ACT = 0b, DCT = 01b             —      –74    —   dB
 Distortion7,8                                               (Japan) IL = 20 mA
 Receive Total Harmonic                       THD          ACT = 1b, DCT = 11b             —       –82   —    dB
 Distortion5,8                                              (CTR21) IL = 60 mA
 Caller ID 60 Hz Common Mode                  VCM         > 60 dB line balance at         91      120    —  VPEAK
 Tolerance9                                                          60 Hz
 Notes:
    1. Measured at TIP and RING with 600 Ω termination at 1 kHz.
    2. R2 should be changed to a 243 Ω resistor when the SF5[7] (FULL) = 1b.
    3. DR = 20 x log |Vin| + 20 x log (RMS signal/RMS noise).
    4. Measurement is 300 to 3400 Hz. Applies to both transmit and receive paths.
    5. Vin = 1 kHz, –3 dBFS, Fs = 10300 Hz.
    6. ACT = SF5[4]; DCT = SF5[3:2].
    7. Vin = 1 kHz, –6 dBFS, Fs = 10300 Hz.
    8. THD = 20 x log (RMS distortion/RMS signal).
    9. VCM can be improved to 120 Vrms minimum by placing a 20 MΩ resistor across the C9 capacitor.
                                                              Rev. 1.3                                            7


 Si2400
Table 6. Voice Codec AC Characteristics
(VD = 3.0 to 3.6 V or 4.75 to 5.25 V, TA = 0 to 70°C for K-Grade, TA = –40 to 85°C for B-Grade)
 Parameter                                      Symbol          Test Condition            Min          Typ       Max        Unit
 AOUT Dynamic Range, APO = 0                                       VIN = 1 kHz             —            40        —          dB
 AOUT THD, APO = 0                                                 VIN = 1 kHz             —           –40        —          dB
 AOUT Full Scale Level, APO = 0                                                            —       0.7 VDD
                                                                                                        z
                                                                                                                  —         VPP
 AOUT Mute Level, APO = 0                                                                  —            60        —          dB
 AOUT Dynamic Range, APO = 1,                                 VIN = 1 kHz, –3 dB           —            65        —          dB
 VD = 4.75 to 5.25 V
 AOUT Dynamic Range, APO = 1,                                 VIN = 1 kHz, –3 dB           —            65        —          dB
 VD = 3 to 3.6 V
 AOUT THD, APO = 1, VD = 4.75 to                              VIN = 1 kHz, –3 dB           —           –60        —          dB
 5.25 V
 AOUT THD, APO = 1, VD = 3 to 3.6 V                           VIN = 1 kHz, –3 dB           —           –60        —          dB
 AOUT Full Scale Level, APO = 1                                                            —           1.5        —         VPP
 AOUT Mute Level, APO = 1                                                                  —           –65        —          dB
 AOUT Resistive Loading, APO = 1                                                           10           —         —          kΩ
 AOUT Capacitive Loading, APO = 1                                                          —            —         20         pF
 AIN Dynamic Range, VD = 4.75 to                              VIN = 1 kHz, –3 dB           —            65        —          dB
 5.25 V
 AIN Dynamic Range, VD = 3 to 3.6 V                           VIN = 1 kHz, –3 dB           —            65        —          dB
 AIN THD, VD = 4.75 to 5.25 V                                 VIN = 1 kHz, –3 dB           —           –60        —          dB
 AIN THD, VD = 3 to 3.6 V                                     VIN = 1 kHz, –3 dB           —           –60        —          dB
 AIN Full Scale Level*                                                                     —           2.8        —         VPP
 *Note: Receive full scale level will produce –0.9 dBFS at RXD.
 Table 7. Absolute Maximum Ratings
  Parameter                                                Symbol                       Value                       Unit
  DC Supply Voltage                                            VD                     –0.5 to 6.0                     V
  Input Current, Si2400 Digital Input Pins                     IIN                       ±10                         μA
  Digital Input Voltage                                       VIND                –0.3 to (VD + 0.3)                  V
  Operating Temperature Range—B-Grade                          TA                     –50 to 95                      °C
  Operating Temperature Range—K-Grade                          TA                     –10 to 80                      °C
  Storage Temperature Range                                  TSTG                     –40 to 150                     °C
  Note: Permanent device damage may occur if the above Absolute Maximum Ratings are exceeded. Functional operation
         should be restricted to the conditions as specified in the operational sections of this data sheet. Exposure to absolute
         maximum rating conditions for extended periods may affect device reliability.
 8                                                             Rev. 1.3


                                                                                                                 Si2400
Table 8. Switching Characteristics
(VD = 3.0 to 3.6 V or 4.75 to 5.25 V, TA = 0 to 70°C for K-Grade, TA = –40 to 85°C for B-Grade)
 Parameter                                        Symbol            Min              Typ                Max            Unit
 CLKOUT Output Clock Frequency                                    2.4576              —               39.3216          MHz
 Baud Rate Accuracy                                  tbd            –1                —                   1             %
 Start Bit ↓ to CTS ↑                               tsbc            —         1/(2 Baud Rate)
                                                                                   z                     —              ns
 CTS ↓ Active to Start Bit↓                         tcsb            10                —                  —              ns
 RESET ↓ to RESET ↑                                  trs            5.0               —                  —             ms
 RESET ↑ Rise Time                                  trs2            —                 —                 100             ns
 RESET ↑ to TXD ↓                                   trs3             3                —                  —             ms
 Note: All timing is referenced to the 50% level of the waveform. Input test levels are VIH = VD – 0.4 V, VIL = 0.4 V
                                                        Receive Tim ing
        RXD
 8-Bit Data          Start     D0         D1        D2        D3         D4        D5        D6         D7        Stop
 Mode (Default)
        RXD
 9-Bit Data          Start     D0         D1        D2        D3         D4        D5        D6         D7         D8   Stop
 Mode
                                                        Transm it Tim ing
        TXD
 8-Bit Data          Start     D0         D1        D2        D3         D4        D5        D6         D7        Stop
 Mode (Default)
        TXD
 9-Bit Data          Start     D0         D1        D2        D3         D4        D5        D6         D7         D8   Stop
 Mode
           t csb
                 t sbc
 CTS
           Note: Baud rates (program m ed through register SE0) are as follows: 300,1200, 2400, 9600, 19200,
           230400, 245760, and 307200 Hz.
                        Figure 2. Asynchronous UART Serial Interface Timing Diagram
                                                             Rev. 1.3                                                        9


10
                    VCC
                          Decoupling            cap for    U1 VD
                               C10                                                                   Refer to AN48 for Layout Guidelines
                            C27           C26                                                        Please submit layout to Silicon Labs
                                                                                                                                                                                                                                                                                                                                                         Si2400
                                                                                                     for review prior to PCB fabrication.
                                     Y1                                                                                                                                                                                                         Q4                     Q1
                           2               1
                                                                                                                                                                                                                                                      R5
                                                                                                         R8   R7   R1 5
                                                                                                                                                              C13         C12   +
                                          GPIO3/ESC
                                          GPIO2/CD_
                                          GPIO1/EOFR                                                                                                                                                                                      R24
                                                  U1
                               1                                   16
                               2      XT ALI              GPIO1    15                                                                           U2
                               3      XT ALO              GPIO2    14                                                            1                            16
           CLKOUT                     CLKOUT              GPIO3                                                                       TST A/QE2 TX/FI LT 2
                               4                                   13                    C1                                      2                            15
                                      VD                    ISOB                                                                      TSTB/DCT    NC/FI LT                                                                                                                        Q2
                               5                                   12        R27                  R28                            3                            14
             RXD                      RXD                   GND                                                                       IGND              RX                                                      +
                               6                                   11                                                            4                            13
             TXD                      TXD                    C1A                                                                      C1B            REXT
                               7                                   10                                                            5                            12                                                    C5         R18
             CTS_                     CTS                 GPIO4                                                                       RNG1     DCT/REXT2
                               8                              9                                                                  6                            11
           RESET_                     RESET                AOUT                                                                       RNG2        NC/REF                                                                                                                                    R6
                                                                                                                                 7                            10
                                                                                                                                 8    QB       NC/VREG29
                                                 Si2400                                                                               QE            VREG                            R1 1   R12          R2               C22
                                                                             Z4    D3
                                         AOUT
                                                                                                                                            Si3015
                                GPIO4/ALER T                                                                                                                                                                                         Z1
                                                                                                                                                               C6         C16
                                                                                                                                                 D4     Z5                                                                                                           R1 6
                                                                                                                                                                                                                                                       R1 9   R1 7                          C20
                                                                        C3         C30                                                                                                     C14          R13
                                                                                                                                                                                                 +
                                                                                                                                                                                                                                                                                       Q3
                                                                                                                                                                                                                                                                                                                      2. Typical Application Schematic
                                                                                                    C9
                                                                                         C4
                                                                                                                                                        C8                                                                                                                  L2                    FB2
                                                                                                                                                                    R10
                                                                                                                                                                                                                                                                                                               RING
                                                                                                                                                                                                                                                                     C39         R32
                                                                                                                                                                                                                         R26
Rev. 1.3
                                                                                                                                      C19
                                                                                                                                                                                                 D2
                                                                                                                                                                                                 RV 2                                                                                                   RV 1
                                                                                                                                                                                                                                                                     C38           R31
                                                                                                                                                                                                 D1                      R25
                                                                                                                                     C18
                                                                                                                                                        C7           R9
                                                                                                                                                                                                                                                                                                               TI P
                                                                                                                                                                                                                                                                            L1                    FB1
                                                                                                                                                                                                                                 C25            C24
                                                                                              Note 1: R12, R13 and C14 are only require d if complex AC termination is used (ACT bit = 1).
                                                                                              Note 2: See "Ringer Impedance" sectio n for optional Czech Republic support.
                                                                                              Note 3: See "Billing Tone Immunity" sectio n for optional billing tone filter (Germany , Switzerland, Sout h Africa) .
                                                                                              Note 4: See Appendix for applications requiring UL 1950 3rd edition compliance.
                                                                                              Note 5: R27, R28, D3, D4, Z4, Z5, RV 2 may be populated for enhanced lightning option.
                                                                                              Note 6: L1,L2, C38, C39, R31, R32 are for EN55022/CISPR-22            Conducted Disturbance compliance.
                                                                                                    Figure 3. Typical Application Circuit Schematic


                                                                                                                           Si2400
3. Bill of Materials
         Component                                     Value                                            Suppliers
             C1,C41                        150 pF, 3 kV, X7R,±20%                 Novacap, Venkel, Johanson, Murata, Panasonic
            C3,C13                        0.22 µF, 16 V, X7R, ±20%                Novacap, Venkel, Johanson, Murata, Panasonic
                  2
               C5                       0.1 µF, 50 V, Elec/Tant, ±20%                   Venkel, Johanson, Murata, Panasonic
         C6,C10,C16                        0.1 µF, 16 V, X7R, ±20%                       Novacap, Venkel, Johanson, Murata
                     3
             C7,C8                        560 pF, 250 V, X7R, ±20%                Novacap, Venkel, Johanson, Murata, Panasonic
               C9                          22 nF, 250 V, X7R, ±20%                Novacap, Venkel, Johanson, Murata, Panasonic
               C12                      1.0 µF, 16 V, Elec/Tant, ±20%                              Venkel, Panasonic
                   2
              C14                       0.68 µF, 16 V, X7R/Elec/Tant,                Novacap, Venkel, AUX, Murata, Panasonic
                                                        ±20%
           C18,C193                        3.9 nF, 16 V, X7R, ±20%                       Novacap, Venkel, Johanson, Murata
               C20                        0.01 µF, 16 V, X7R, ±20%                       Novacap, Venkel, Johanson, Murata
                   4
              C22                         1800 pF, 50 V, X7R, ±20%                                     Not installed
                       1
           C24,C25                        1000 pF, 3 kV, X7R, ±10%                Novacap, Venkel, Johanson, Murata, Panasonic
            C26,C27                         33 pF, 16 V, NPO, ±5%                        Novacap, Venkel, Johanson, Murata
                   4
              C30                          10 pF, 16 V, NPO, ±10%                                      Not Installed
                      2,5
          C38,C39                           47 pF, 16 V, X7R, ±10%                                         Venkel
             D1,D26                      Dual Diode, 300 V, 225 mA                              Central Semiconductor
                     1
             D3,D4                         BAV99 Dual Diode, 70 V                     Diodes Inc., OnSemiconductor, Fairchild
            FB1,FB2                      Ferrite Bead, 600 Ω, ±25%,                                        Murata
                                                      200 mA
            L1,L22,5                  68 µH, 120 mA, 4 Ω max, ±10%                             TDK, Murata, Panasonic
             Q1,Q3                              A42, NPN, 300 V                           OnSemiconductor, Fairchild, Zetex
               Q2                               A92, PNP, 300 V                           OnSemiconductor, Fairchild, Zetex
                  7
               Q4                         BCP56, NPN, 60 V, 1/2 W                             OnSemiconductor, Fairchild
Notes:
   1. The Si2400 design survives up to 3500 V longitudinal surges without R27, R28, D3, D4, Z4, and Z5. Adding the R27, R28, D3, D4, Z4,
       Z5 enhanced lightning option increases longitudinal surge survival to greater than 6600 V. The isolation capacitors C1, C4, C24, and
       C25 must also be rated to greater than the surge voltage. Y-class capacitors are recommended for highest surge survival and are
       required for Norway, Sweden, Denmark, and Finland.
   2. For FCC-only designs: C14, C38, C39, R12, R13, R31, and R32 are not required; L1 and L2 may be replaced with a short; R2 may be
       ±5%; with Z1 rated at 18 V, C5 may be rated at 16 V; also see note 9.
   3. If the auto answer, ring detect, and caller ID features are not used, R9, R10, C7, C8, C18, and C19 may be removed. In this case, the
       RNG1 and RNG2 pins of the Si3015 should be connected to the IGND pin.
   4. C22 and C30 may provide an additional improvement in emissions/immunity and/or voice performance, depending on design and
       layout. Population option recommended. See "Emissions/Immunity" on page 78.
   5. Compliance with EN55022 and/or CISPR-22 conducted disturbance tests requires L1, L2, C38, C39, R31, R32, and RV2. See also
       “EN55022 and CISPR-22 Compliance” in Appendix A.
   6. Several diode bridge configurations are acceptable (suppliers include General Semi., Diodes Inc.).
   7. Q4 may require copper on board to meet 1/2 W power requirement. (Contact manufacturer for details.)
   8. When L1 and L2 are used, RV2 must be installed, and D1 and D2 must be 400 V.
   9. The R7, R8, R15, and R16, R17, R19 resistors may each be replaced with a single resistor of 1.78 kΩ, 3/4 W, ±1%. For FCC-only
       designs, 1.78 kΩ, 1/16 W, ±5% resistors may be used.
   10. If the parallel phone detection feature is not used, R25 and R26 may be removed.
   11. To ensure compliance with ITU specifications, frequency tolerance must be less than 100 ppm including initial accuracy, 5-year aging,
       0 to 70°C, and capacitive loading.
                                                                   Rev. 1.3                                                               11


Si2400
         Component                                     Value                                            Suppliers
              RV1                           Sidactor, 275 V, 100 A                   Teccor, ST Microelectronics, Microsemi, TI
              RV28                                 270 V, MOV                                          Not Installed
               R2 2
                                              402 Ω, 1/16 W, ±1%                                   Venkel, Panasonic
               R5                            100 kΩ, 1/16 W, ±1%                                   Venkel, Panasonic
               R6                            120 kΩ, 1/16 W, ±5%                                   Venkel, Panasonic
                                9
 R7,R8,R15,R16,R17,R19                       5.36 kΩ, 1/4 W, ±1%                                   Venkel, Panasonic
                      3
            R9,R10                            56 kΩ, 1/10 W, ±5%                                   Venkel, Panasonic
               R11                           9.31 kΩ, 1/16 W, ±1%                                  Venkel, Panasonic
              R12  2
                                             78.7 Ω, 1/16 W, ±1%                                   Venkel, Panasonic
              R13  2
                                              215 Ω, 1/16 W, ±1%                                   Venkel, Panasonic
               R18                           2.2 kΩ, 1/10 W, ±5%                                   Venkel, Panasonic
               R24                            150 Ω, 1/16 W, ±5%                                   Venkel, Panasonic
                      10
          R25,R26                            10 MΩ, 1/16 W, ±5%                                    Venkel, Panasonic
           R27,R281                            10 Ω, 1/10 W, ±5%                                   Venkel, Panasonic
          R31,R32     2,5
                                              470 Ω, 1/16 W, ±5%                                   Venkel, Panasonic
               U1                                      Si2400                                          Silicon Labs
               U2                                      Si3015                                          Silicon Labs
                 11
              Y1                     4.9152 MHz, 20 pF, 50 ppm, 150                                    Not Installed
                                                        ESR
               Z12                        Zener Diode, 43 V, 1/2 W                              Vishay, Motorola, Rohm
             Z4,Z51                       Zener Diode, 5.6 V, 1/2 W                             Vishay, Motorola, Rohm
Notes:
   1. The Si2400 design survives up to 3500 V longitudinal surges without R27, R28, D3, D4, Z4, and Z5. Adding the R27, R28, D3, D4, Z4,
       Z5 enhanced lightning option increases longitudinal surge survival to greater than 6600 V. The isolation capacitors C1, C4, C24, and
       C25 must also be rated to greater than the surge voltage. Y-class capacitors are recommended for highest surge survival and are
       required for Norway, Sweden, Denmark, and Finland.
   2. For FCC-only designs: C14, C38, C39, R12, R13, R31, and R32 are not required; L1 and L2 may be replaced with a short; R2 may be
       ±5%; with Z1 rated at 18 V, C5 may be rated at 16 V; also see note 9.
   3. If the auto answer, ring detect, and caller ID features are not used, R9, R10, C7, C8, C18, and C19 may be removed. In this case, the
       RNG1 and RNG2 pins of the Si3015 should be connected to the IGND pin.
   4. C22 and C30 may provide an additional improvement in emissions/immunity and/or voice performance, depending on design and
       layout. Population option recommended. See "Emissions/Immunity" on page 78.
   5. Compliance with EN55022 and/or CISPR-22 conducted disturbance tests requires L1, L2, C38, C39, R31, R32, and RV2. See also
       “EN55022 and CISPR-22 Compliance” in Appendix A.
   6. Several diode bridge configurations are acceptable (suppliers include General Semi., Diodes Inc.).
   7. Q4 may require copper on board to meet 1/2 W power requirement. (Contact manufacturer for details.)
   8. When L1 and L2 are used, RV2 must be installed, and D1 and D2 must be 400 V.
   9. The R7, R8, R15, and R16, R17, R19 resistors may each be replaced with a single resistor of 1.78 kΩ, 3/4 W, ±1%. For FCC-only
       designs, 1.78 kΩ, 1/16 W, ±5% resistors may be used.
   10. If the parallel phone detection feature is not used, R25 and R26 may be removed.
   11. To ensure compliance with ITU specifications, frequency tolerance must be less than 100 ppm including initial accuracy, 5-year aging,
       0 to 70°C, and capacitive loading.
12                                                                 Rev. 1.3


                                                                                                     Si2400
4. Analog Input/Output
Figure 4 illustrates an optional application circuit to support the analog output capability of the Si2400 for voice
monitoring purposes.
                                                           +5V
                       C2        R3                         6
                                                        3                              C4
           A OUT                                           +
                                                                 5
                                                        2
                                                           –
                                                                U1
                                                                               C5
                                           C6    R1         4
                                                                          C3
                    Figure 4. Optional Connection to AOUT for a Monitoring Speaker
‘
                       Table 9. Component Values—Optional Connection to AOUT
                                        Symbol                     Value
                                       C2, C3, C5           0.1 µF, 16 V, ±20%
                                           C4          100 µF, 16 V, Elec. ±20%
                                           C6              820 pF, 16 V, ±20%
                                           R1              10 kΩ, 1/10 W, ±5%
                                           R2               10 Ω, 1/10 W, ±5%
                                           R3              47 kΩ, 1/10 W, ±5%
                                           U1                     LM386
                                                                     Si2400
                               Analog Input                      AIN/GPIO       1 V RMS
                                                 0.1 μ F
                                         Figure 5. Analog Input Circuit
                                                          Rev. 1.3                                                13


Si2400
5. Functional Description
The Si2400 ISOmodem is a complete modem chipset                   and global compliance. The Si2400 solution integrates a
with integrated direct access arrangement (DAA) that              silicon DAA using Silicon Laboratories’ proprietary
provides a programmable line interface to meet global             capacitive isolation technology. This highly integrated
telephone line requirements. Available in two 16-pin              DAA can be programmed to meet worldwide PTT
small outline packages, this solution includes a DSP data         specifications for ac termination, dc termination, ringer
pump, a modem controller, an analog front end (AFE), a            impedance, and ringer threshold. The DAA also can
DAA, and an audio codec.                                          monitor line status for parallel handset detection and for
The modem, which accepts simple modem AT                          overcurrent conditions.
commands, provides connect rates of up to 2400 bps,               The Si2400 is designed for rapid assimilation into existing
full-duplex over the Public Switched Telephone Network            modem applications. The device interfaces directly
(PSTN) with V.42 hardware support through HDLC                    through a UART to a microcontroller. The Si2400URT-
framing. To minimize handshake times, the Si2400 can              EVB connects directly to a standard RS-232 interface.
implement a V.25-based fast connect. The modem also               This allows for PC evaluation of the modem immediately
supports the V.23 reversing protocol and standard alarm           upon powerup via HyperTerminal or any standard
formats including SIA.                                            terminal software.
The Si2400 ISOmodem provides numerous features for                The chipset can be fully programmed to meet
embedded modem applications including caller ID                   international telephone line interface requirements with
detection and decoding for the US, UK, and Japanese               full compliance to FCC, CTR21, JATE, and other country-
caller ID formats. Both DTMF decoding and generation              specific PTT specifications. In addition, the Si2400 has
are provided on chip as well. Call progress is supported          been designed to meet the most stringent worldwide
both at a high level through echoing result codes and at a        requirements for out-of-band energy, billing-tone
low level through user-programmable biquad filters and            immunity, lightning surges, and safety requirements.
parameters such as ring period, ring on/off time, and             The Si2400 solution needs only a few low-cost discrete
dialing interdigit time.                                          components to achieve global compliance. See Figure 3
This device is ideal for embedded modem applications              on page 10 for a typical application circuit.
due to its small board space, low power consumption,
                                        Table 10. Selectable Configurations
                                                                   Carrier            Data Rate                Standard
          Configuration                  Modulation
                                                              Frequency (Hz)             (bps)               Compliance
  V.21                                       FSK                1080/1750                 300                     Full
       1
  V.22                                      DPSK                1200/2400                1200                     Full
  V.22bis1,2                                QAM                 1200/2400                2400                 No retrain
  V.23                                                          1300/2100              1200/75           Full; plus reversing
                                             FSK
  V.23                                                          1300/1700               600/75                 (Europe)
  Bell 103                                   FSK                 1170/2125                300                     Full
  Bell 212A                                 DPSK                1200/2400                1200                     Full
  Security                                  DTMF                       —                   40                     Full
  SIA—Pulse                                 Pulse                      —                  Low                     Full
  SIA Format                                 FSK                 1170/2125         300 half-duplex           300 bps only
  Notes:
      1. The V.22 and V.22bis standards refer to V.14 DTE (UART) configurations. The Si2400 does not support V.14 breaks.
         In order to support overspeeding by the remote modem, the Si2400 DTE speed must be greater than the modem
         (line) data rate.
      2. The Si2400 only adjusts its DCE rate from 2400 bps to 1200 bps if it is connecting to a V.22-only (1200 bps only)
         modem. Because the V.22bis specification does not outline a fallback procedure, the host should implement a
         fallback mechanism consisting of hanging up and connecting at a lower baud rate. Retraining to accommodate
         changes in line conditions which occur during a call must be implemented by terminating the call and redialing.
14                                                         Rev. 1.3


                                                                                                           Si2400
5.1. Digital Interface                                       5.2. Configurations and Data Rates
The Si2400 has a universal asynchronous serial               The Si2400 can be configured to any of the Bell and
interface     (UART)      compatible     with    standard    CCITT operation modes in Table 12. The modem, when
microcontroller serial interfaces. After power-up or         configured for V.22bis, will connect at 1200 bps if the far
reset, the speed of the serial (Data Terminal                end modem is configured for V.22. This device also
Equipment—DTE) interface is set by default to                supports SIA and other protocols for the security
2400 bps with the 8-bit, no parity, and one stop bit (8N1)   industry. Table 10 provides the modulation method,
format described below. The PCM codec serial interface       carrier frequencies, data rate, baud rate and notes on
is disabled by default and CLKOUT is set to                  standard compliance for each modem configuration of
9.8304 MHz after power-up or reset.                          the Si2400. Table 12 shows example register settings
The serial interface DTE rate can be modified by writing     (S07) for some of the modem configurations.
SE0[2:0] (SD) with the value corresponding to the            As shown in Figure 6, 8-bit and 9-bit data modes refer to
desired DTE rate. (See Table 11.) This is accomplished       the DTE format over the UART. Line data formats are
with the command ATSE0=xx where xx is the                    configured through registers S07 (MF1) and S15 (MLC).
hexadecimal value of the SE0 register.                       If the number of bits specified by the DTE format differs
                                                             from the number of bits specified by the DCE (Data
                  Table 11. DTE Rates                        Communications Equipment or Line) format, the MSBs
                                                             will either be dropped or bit-stuffed, as appropriate. For
         DTE Rate (bps)        SE0[2:0] (SD)
                                                             example, if the DTE format is 9 data bits (9N1), and the
                300                   000                    line data format is 8 data bits (8N1), then the MSB from
               1200                   001                    the DTE will be dropped as the 9-bit word is passed
               2400                   010                    from the DTE side to the DCE (line) side. In this case,
                                                             the dropped ninth bit can then be used as an escape
               9600                   011
                                                             mechanism. However, if the DTE format is 8N1and the
              19200                   100                    line data format is 9N1, an MSB equal to 0 will be added
              228613                  101                    to the 8-bit word as it is passed from the DTE side to the
              245760                  110                    DCE side.
              307200                  111                    The Si2400 UART does not continuously check for stop
                                                             bits on the incoming digital data. Therefore, if the TXD
Immediately after the ATSE0=xx string is sent, the host      pin is not high, the RXD pin may echo meaningless
UART must be reprogrammed to the new DTE rate in             characters to the host UART. This requires the host
order to communicate with the Si2400.                        UART to flush its receiver FIFO upon initialization.
The three highest DTE rates (228613, 245760, 307200)                                Si2400     Si3015
are required for transferring PCM data from the host to             TXD                                            RJ11
the Si2400 PCM interface for the transmission of voice
over the phone line or through the voice codec.                     RXD
    Table 12. Modem Configuration Examples                             DTE Interface            DCE (Line) Interface
        (S07[7] (HDEN) = 0, S07[6] (BD) = 0)                       Data Rate: SE0[2:0] (SD)      Data Rate: S07 (MF1)
                                                                   Data Form at: SE0[3] (ND)    Data Form at: S15 (MLC)
        Modem Protocol       Register S07 Values                     Figure 6. Link and Line Data Formats
             V.22bis                   0x06                  5.2.1. Command/Data Mode
              V.22                     0x02                  Upon reset, the modem will be in command mode and
              V.21                     0x03                  will accept AT-style commands. An outgoing modem
           Bell 212A                   0x00                  call can be made using the “ATDT#” (tone dial) or
            Bell 103                   0x01                  “ATDP#” (pulse dial) command after the device is
                                                             configured. If the handshake is successful, the modem
      V.23 (1200 tx, 75 rx)            0x16                  will respond with the “c”, “d”, or “v” string and enter data
      V.23 (75 tx, 1200 rx)            0x24                  mode. (The byte following the “c”, “d”, or “v” will be the
       V.23 (600 tx, 75 rx)            0x12                  first data byte.) At this point, AT-style commands are not
       V.23 (75 tx, 600 rx)            0x20                  accepted. There are three methods which may be used
                                                             to return the Si2400 to command mode:
                                                        Rev. 1.3                                                        15


Si2400
   Use the ESC pin—To program the GPIO3 pin to                SE0[2:0] (SD) setting and terminates with a stop bit.
    function as an ESCAPE input, set GPIO3                     Data from the host for transmission to the remote
    SE2[5:4] = 11b. In this setting, a positive edge           modem is shifted to the Si2400 on TXD, beginning with
    detected on this pin will return the modem to              a start bit, LSB first at the DTE rate determined by the
    command mode. The “ATO” string can be used to re-          SE0[2:0] setting and terminates with a stop bit. After the
    enter data mode.                                           middle of the stop bit time the Si2400 will begin looking
 Use 9-bit data mode—If 9-bit data format with                for a logic 1 to logic 0 transition signaling the start of the
    escape is programmed, a 1 detected on bit 9 will           next character on TXD to be sent to the line (remote
    return the modem to command mode. (See Figure 2            modem).
    on page 9.) This is enabled by setting                     5.2.3. 9-Bit Data Mode (9N1)
    SE0[3] (ND) = 1b and S15[0] (NBE) = 1b. The ATO            The 9-bit data mode is set by SE0[3] (ND) = 1b. It is
    string can be used to reenter data mode. Ninth bit         asynchronous, full duplex, and uses a total of 11 bits
    escape does not work in the security modes.                including a start bit (logic 0), 9 data bits, and a stop bit
 Use TIES—The time independent escape sequence                (logic 1). Data received from the line (remote modem) is
    is a sequence of three escape characters (“+”              transferred from the Si2400 to the host on the RXD pin.
    characters by default). Once these characters have         Data transfer to the host begins when the Si2400
    been recognized, the modem enters the Command              asserts a logic 0 start bit on RXD. Data is shifted out of
    state without sending a confirming result code to the      the Si2400 LSB first at the DTE rate determined by the
    terminal. The modem then starts an internal prompt         SE0[2:0] (SD) setting and terminates with a stop bit.
    delay timer. From that point on if an AT<CR>               Data from the host for transmission to the line (remote
    (attention) command is received before the timer           modem) is shifted to the Si2400 on TXD, beginning with
    expires, the timer is stopped and the “O” response         a start bit, LSB first at the DTE rate determined by the
    code is sent to the terminal. This indicates that the      S-Register SE0[2:0] (SD) setting and terminates with a
    Si2400 is in command mode.                                 stop bit. After the middle of the stop bit time the Si2400
    If any other data is received while the timer is           will begin looking for a logic 1 to logic 0 transition
    running, the timer is stopped, the device returns to       signaling the start of the next character on TXD to be
    the online state, and the data appearing on TXD is         sent to the line (remote modem).
    sent to the remote modem.                                  The ninth data bit may be used to indicate an escape by
    If the timer expires, a confirming “O” response code       setting S15[0] (NBE) = 1b. In this mode, the ninth data
    is sent to the terminal indicating that the modem is in    bit will normally be set to 0 when the modem is online.
    command mode.                                              When the ninth data bit is set to 1, the modem will go
    TIES is enabled by writing register                        offline into Command mode and the next frame will be
    S14[5] (TEO) = 1b. Both the escape character “+”           interpreted as an AT command. Data mode can be
    and the escape time-out period are programmable            reentered using the ATO command.
    via registers S0F (TEC) and S10 (TDT), respectively.       5.2.4. Flow Control
Note: TIES is not the recommended escape solution for the
                                                               No flow control is needed if the DTE rate and DCE rate
         most robust designs. Any data string containing the
         sequence “+++AT<CR>” will interrupt a data sequence   are the same. If the serial link (DTE) data rate is set
         erroneously.                                          higher than the line (DCE) rate of the modem, flow
                                                               control is required to prevent loss of data to the
Whether using an escape method or not, when the
                                                               transmitter.
carrier is lost, the modem will automatically return to
command mode and report “N”.                                   To control data flow, the clear-to-send (CTS) pin is used.
                                                               As shown in Figure 2 on page 9, the CTS pin will
5.2.2. 8-Bit Data Mode (8N1)
                                                               normally be high, and will be low whenever the modem
The 8-bit data mode is the default mode after power-up         is able to accept new data. The CTS pin will go high
or a reset and is set by SE0[3] (ND) = 0b. It is               again as soon as a start bit is detected on the TXD pin
asynchronous, full duplex, and uses a total of 10 bits         and will remain high until the modem is ready to accept
including a start bit (logic 0), 8 data bits, and a stop bit   another character.
(logic 1). Data received from the remote modem is
transferred from the Si2400 to the host on the RXD pin.
Data transfer to the host begins when the Si2400
asserts a logic 0 start bit on RXD. Data is shifted out of
the Si2400 LSB first at the DTE rate determined by the
16                                                        Rev. 1.3


                                                                                                            Si2400
5.3. Low Power Modes                                                default).
                                                                 Total Powerdown. Setting SF1[5] = 1b and
The Si2400 has three low power modes. These are
described below:                                                    SF1[6] = 1b will place the Si2400 into a total
  DSP Powerdown. The DSP processor can be                          powerdown mode. All logic is powered down,
   powered down by setting register                                 including the crystal oscillator and clock-out pin.
   SEB[3] (PDDE) = 1b.                                              Only a hardware reset can restart the Si2400.
   In this mode, the serial interface still functions and       5.4. Global DAA Operation
   the modem will detect ringing and intrusion.
                                                                The Si2400 chipset contains an integrated silicon direct
   However, no modem modes or tone detection
                                                                access arrangement (silicon DAA) that provides a
   features will function.
                                                                programmable line interface to meet international
 Wake-Up-On-Ring. By issuing the ATz command,
                                                                telephone line requirements. Table 13 gives the DAA
   the Si2400 goes into a low power mode where both             register settings required to meet various country PTT
   the microcontroller and DSP are powered down.                standards. A detailed description of the registers in
   Only an incoming ring or a total reset will power up         Table 13 can be found in "Appendix A—DAA Operation"
   the chip again. Return from wake-on-ring will trigger        on page 78.
   the ALERT pin if S62[4] (WOR) = 1b (WOR = 0b by
                                   Table 13. Country-Specific Register Settings
 Register                                             SF5                                SF7           SF6            S62
 Country                       OHS        ACT         DCT          RZ          RT        LIM       VOL      FLVM      LLC
           1
 Australia                       1          1          01           0           0          0         0        0        0
        2
 Brazil                          0          0          01           0           0          0         0        0        0
 CTR211, 3, 4                    0          1          10           0           0          1         0        0        1
 Czech Republic                  0          1          10           0           0          0         0        0        0
      1, 5
 FCC                             0          0          10           0           0          0         0        0        0
 Latvia                          0          1          11           0           0          1         0        0        0
 Malaysia1,6                     0          0          01           0           0          0         0        0        0
 New Zealand                     0          1          10           0           0          0         0        0        0
 Nigeria                         0          1          11           0           0          1         0        0        0
              1
 Philippines                     0          0          01           0           0          0         0        1        0
 Poland7, Slovenia               0          0          10           1           1          0         0        0        0
 South Africa7                   1          0          10           1           0          0         0        0        0
                7
 South Korea                     0          0          01           1           0          0         0        0        0
 Note:
    1. See "DC Termination" on page 79 for more information.
    2. The following countries require the same settings as Brazil: Armenia, China, Egypt, Georgia, Japan, Jordan,
         Kazakhstan, Kyrgyzstan, Malaysia, Muldova, Oman, Pakistan, Qatar, Russia, Syria, Taiwan, Thailand, Ukraine.
    3. The following countries require the same settings as CTR21: Austria, Bahrain, Belgium, Bulgaria, Croatia, Cyprus,
         Denmark, Estonia, European Union, Finland, France, Germany, Greece, Guadeloupe, Iceland, Ireland, Israel, Italy,
         Lebanon, Liechtenstein, Luxembourg, Malta, Martinique, Morocco, Netherlands, Norway, Polynesia (French),
         Portugal, Reunion, Spain, Sweden, Switzerland, Turkey, and the United Kingdom.
    4. When changing into or out of CTR21 Mode, LLC should be written first. SDF must be enabled (i.e., DGSR ≠ 0) and
         SFS should be reprogrammed before each call.
    5. The following countries require the same settings as FCC: Argentina, Brunei, Canada, Chile, Columbia, Dubai,
         Equador, El Salvador, Guam, Hong Kong, Hungary, India, Indonesia, Kuwait, Macao, Mexico, Peru, Puerto Rico,
         Romania, Saudi Arabia, Singapore, Slovakia, Tunisia, UAE, USA, Venezuela, Yemen.
    6. Supported for loop current ≥ 20 mA.
    7. SF5[1] (RZ) should only be set for Poland, South Africa and South Korea if the ringer impedance network (C15, R14,
         Z2, Z3) is not populated.
                                                          Rev. 1.3                                                        17


Si2400
5.5. Parallel Phone Detection                                              absolute detector is chosen, the Si2400 algorithm will
                                                                           detect an intrusion if LVCS is less than the value stored
The Si2400 has the ability to detect a phone or other
                                                                           in on-hook intrusion threshold, S11[4:0] (AVL). In other
device that is off hook on a shared line. This enables the
                                                                           words, an intrusion has occurred if LVCS < AVL.
ISOmodem to avoid interrupting a call in progress on a
shared line and to intelligently handle an interruption by                 AVL defaults to 1000b, or 25 V on powerup. The
another device when the Si2400 is using the line. An                       absolute detector is the correct method to use for most
automatic algorithm to detect parallel phone intrusion                     countries and should also be used to detect the
(defined as an off-hook parallel handset) is provided by                   presence (or absence) of a line connection.
default.                                                                   Under the condition of a very short line and a current-
5.5.1. On-Hook Intrusion Detection                                         limiting telephone off hook, the off-hook line voltage can
                                                                           be as high as 40 V. The minimum on-hook voltage may
To implement intrusion detection, the Si2400 uses loop
                                                                           not be much greater. This condition can occur on phone
voltage sense register SDB (LVCS). When on hook,
                                                                           lines with current-limiting specifications such as France.
LVCS monitors the line voltage. (When off-hook, it
                                                                           For these lines, a differential detector is more
measures line current.) LVCS has a full scale of 87 V
                                                                           appropriate.
with an LSB of 2.75 V. The first code (0 → 1) is skewed
such that a 0 indicates that the line voltage is < 3.0 V.                  The differential detector method checks line status
The voltage accuracy of LVCS is ±20%. The user can                         every 26.66 ms. The detector compares (LVCS (t –
read these bits directly when on hook through register                      0.02666) – LVCS (t)) to the differential threshold level
SDB (LVCS).                                                                set in register S11[7:5] (DVL). The default for DVL is
                                                                           0x02 (5.5 V). If the threshold is exceeded (LVCS (t –
The automatic on-hook detector algorithm can be
                                                                            0.02666) – LVCS (t) > DVL), an intrusion is detected. If
tripped by either an absolute level or by a voltage
                                                                           (LVCS (t) – LVCS (t – 0.02666) > DVL), then the
differential by selecting S13[3] (ONHD) = 0b for
                                                                           intrusion is said to have terminated.
absolute or S13[3] (ONHD) = 1b for differential. If the
                           30
                           25
                           20
                     LVC S
                     BITS
                           15
                           10
                            5
                             0
                               0 3 6 9 12 15 18 21 24 28 30 33 36 39 42 45 47 51 54 57 60 63 66 69 72 75 78 81 84 87 100
                                                                     Loop Voltage (V)
                               Figure 7. Loop Voltage—LVCS Transfer Function
18                                                                 Rev. 1.3


                                                                                                                                     Si2400
5.5.2. Reporting of an On-Hook Intrusion                                       (current limiting) operation and the lower curve
The reporting of an on-hook intrusion is the same                              representing all other modes. The overload points
whether or not the differential or absolute algorithm is                       indicate excessive current draw. The user can read
chosen.                                                                        these bits directly through SDB (LVCS). Note that as in
                                                                               the line voltage sense, there is hysteresis between
An “i” result code is sent when an intrusion is detected.
                                                                               codes (0.375 mA for CTR21 mode and 0.75 mA for the
Conversely an “I” result code is sent when an intrusion
                                                                               alternate mode).
has terminated. S14[1] (IND) indicates the current
intrusion status and is set for as long as an intrusion is                     The off-hook intrusion algorithm does not begin to
detected.                                                                      operate immediately after going off-hook. This is to
                                                                               avoid triggering an off-hook intrusion interrupt due to off-
In addition, if the LVCS returns a value of zero, an “l”
                                                                               hook transients. The time between going off-hook and
result code is sent to the host. If the LVCS becomes
                                                                               enabling the intrusion algorithm defaults to 1 second
non-zero after having gone to zero, an “L” result code is
                                                                               and may be set via S82[7:4] (IST).
sent to the host. S14[2] (NLD) indicates the current line
voltage status and is set for as long as the LVCS is zero.                     Once the intrusion settling time (IST) has elapsed, the
                                                                               Si2400 executes one of the three off-hook intrusion
It is possible to suppress the result codes by setting
                                                                               algorithms,              depending           on   the  settings of
S14[7] MRCD = 1b and selectively re-enabling desired
                                                                               SDF[6:0] (DSGR) and S13[4] (OFHD). See Table 14.
result codes using the S62 register. Suppressing result
codes in this fashion does not affect the setting of the                              Table 14. Off-Hook Intrusion Algorithms
NLD and IND bits of the S14 register. Suppressing the
result codes is the best approach if polling the S14                                           Algorithm                       OFHD        SDF
register to monitor the intrusion status is preferred.                                      Differential #1                      1           0
It is also possible to suppress the result codes by
                                                                                            Differential #2                      1          ≠0
setting S33[6] (DON). However, this approach will stop
the updating of the S14 register, rendering the on-hook                                          Absolute                        0           x
intrusion algorithm completely disabled. This approach
may be used if the host checks LVCS directly prior to                          5.5.4. Differential Algorithm #1 (default)
going off-hook.                                                                If (LVCS (t – 800 ms) – LVCS (t)) > S12[7:5] (DCL), then
5.5.3. Off-Hook Intrusion Detection                                            an intrusion is deemed to have taken place. If (LVCS (t)
When the Si2400 is off-hook, it can detect another                             – LVCS (t – 800 ms)) > DCL, then the intrusion is
phone going off-hook by monitoring the dc loop current.                        deemed to have completed. Default DCL is 2. This
The loop current sense transfer function is shown in                           comparison occurs every 200 ms.
Figure 8 with the upper curve representing CTR21
                                                                                                                   Overload
                            30
                            25
                            20                   CTR21
                   LVCS
                   BITS
                            15
                            10
                             5
                             0
                               0 3 6 9 12 15 18 21 24 27 30 33 36 39 42 45 48 51 54 57 60 63 66 69 72 75 78 81 84 87 90 93      140
                                                                            Loop Current
                                                                                (mA)
                                Figure 8. Loop Current—LVCS Transfer Function
                                                                      Rev. 1.3                                                                 19


Si2400
5.5.5. Differential Algorithm #2                              an intrusion, if any, into ACL. Therefore, ACL may be
This differential algorithm has features added to             used for the next off-hook event even if the current off-
Differential Algorithm #1. The additional features are as     hook sample contains an intrusion. Except for the first
follows:                                                      initialization, no host intervention is necessary.
    Programmable deglitch filter to minimize false           The Si2400 clears ACL automatically under a hardware
     intrusions                                               reset. Additionally, ACL is cleared if the modem is on-
 Ability to preset initial LVCS reference prior to going
                                                              hook, and the phone line is disconnected and then
     off-hook                                                 reconnected once again.
 Optional time window where intrusions are blocked           If the host hardware resets the Si2400 between off-hook
     and ignored                                              events, the host may choose to store the ACL value
                                                              prior to reset, and then restore this value to ACL prior to
5.5.6. Deglitch Filter
                                                              the next off-hook event.
To avoid triggering an off-hook intrusion interrupt due to
                                                              5.5.8. Intrusion Blocking
a transient or glitch on the telephone line, a deglitch
filter is inserted before the off-hook intrusion algorithm.   Differential Algorithm #2 may be disabled for a period of
The sample rate of the deglitcher is set by                   time after dialing begins. This can avoid triggering an
SDF[6:0] (DGSR). (If DGSR = 0, the Differential               off-hook intrusion interrupt due to pulse dialing or line
Algorithm #1 is implemented.) Before a sample is              transients from central office switching. The method to
passed to the off-hook intrusion algorithm, it must be        block the intrusion algorithm is set via S82[1:0] (IB). If
confirmed by a subsequent sample of the same value.           IB = 10b is chosen, S29 (IS) can be used to set this
Otherwise, it is not submitted to the off-hook algorithm.     blocking to an absolute time.
In order to filter out glitches of up to 1 second in          In order to detect if an intrusion does occur during
duration, for example, DGSR should be set to 1 second         blocking and is sustained until after the blocking, the
(SDF[6:0] = 011001b). In this example, an intrusion           Si2400 will measure the difference in LVCS between the
event that lasts for more than two seconds is                 sample before blocking and the sample after blocking.
guaranteed to be treated as a real intrusion. Intrusion       5.5.9. Absolute Algorithm
events between one second and two seconds in                  If the absolute detector is chosen (S13[4] [OFHD] = 0b),
duration may or may not be treated as an intrusion. The       the Si2400 will detect an intrusion under the condition
recommended setting for DGSR is one second, which             that LVCS is less than the off-hook intrusion threshold,
should work for most applications.                            S12[4:0] (ACL). In other words, it is determined that an
Once a sample has been deemed valid by the deglitch           intrusion has occurred if LVCS < ACL. ACL defaults to 0
filter, the off-hook algorithm operates as follows:           (12 mA) on powerup. Because the loop current can vary
If (LVCS (t – 80 ms DGSR) – LVCS (t)) > DCL, then an
                       z                                      from 20 mA to 100 mA, depending on the line, a factory
intrusion is deemed to have taken place. Default DCL          preset threshold is not useful.
is 2. This comparison occurs every 40 ms DGSR.    z           To use this absolute mode, the host must measure the
Because the compared value is continually updated, the        line current and set the threshold accordingly. A
off-hook intrusion algorithm automatically adjusts to         measurement of the loop current is accomplished by
account for drift in line resistance.                         going off-hook (issuing the “ATDT;” command), reading
5.5.7. LVCS Initialization                                    LVCS after 800 ms, and going back on hook using the
                                                              “ATH” command. This measured value of LVCS should
If an intrusion begins within the time window defined by
                                                              be used to determine the threshold register ACL. If this
S82[7:4] (IST), it is possible for an intrusion to go
                                                              method is used, the loop current should be measured
unreported because the initial LVCS used as the
                                                              on a periodic basis to account for drift in line resistance.
reference is sampled after the intrusion has begun.
                                                              5.5.10. Reporting Off-Hook Intrusions
S12[4:0] (ACL) is used to avoid this problem. Prior to
going off-hook, the host can set the ACL register to a        The primary method of reporting an off-hook intrusion
known value of LVCS with the Si2400 off-hook and all          event to the host is through the use of the ALERT pin.
parallel phones or other devices on-hook. If this value is    The ALERT function is assigned to GPIO4 by setting
not known, such as on the first off-hook event using this     SE2[7:6] (GPIO4) = 11b.
specific phone line, ACL should be set to 0, indicating       In general, “i” and “I” result codes are sent when the
no known LVCS reference.                                      modem detects an intrusion. However, it is important to
Once the Si2400 goes back on-hook, it automatically           note that these result codes are not always reported.
writes the value of the last known LVCS sample prior to       When the modem is in the data mode, the “i” and “I”
20                                                       Rev. 1.3


                                                                                                            Si2400
result codes are suppressed, and the ALERT pin is the            5.6. Loop Current Detection
only method of reporting an intrusion to the host.
                                                                 In addition to monitoring parallel phone intrusion, it is
The “i” and “I” result codes may be sent to the host             possible to monitor the loss of loop current. This feature
under the following conditions:                                  can be enabled by setting SE82[3] (LCLD) = 1. This
1. If the modem is in the process of establishing a connection   feature is disabled by default. If the loop current is too
     using the “ATDT#<cr>” or “ATA<cr>” commands and prior       low for normal DAA operation, the “l” result code is sent,
     to the “c”, “v”, or “d” result codes.                       and S14[2] (NLD) is set. Once the loop current returns
2. If the modem is in command mode and a call is initiated       to a normal current state, the “L” result code is sent and
     using “ATDT#;” command.                                     S14[2] (NLD) is cleared. The ALERT pin is also
3. If the modem is used in the security modes (ATDT#!0-!7)       asserted if enabled. The “L” and “l” result codes are not
     (except !2).                                                always sent. The principles governing the reporting of
4. If the modem is used in the !2 security mode while the        the “i” and “I” result codes apply to the “L” and “l” result
     modem is not actively receiving/sending FSK data.           codes. The status of the S14 register is unchanged for
Once the ALERT pin is asserted as a consequence of               800 msec after an off-hook to on-hook event. This delay
an intrusion, it is the responsibility of the host software      preserves the S14 register contents at the time the
to negate it by clearing SE3[3] (GPD4) directly.                 ALERT is asserted.
S14[1] (IND) is an indication of the current intrusion           5.7. Carrier Detect/Loss
status. It is updated whenever the “i” and “I” result
                                                                 The Si2400 can provide the functionality of a loss-of-
codes are sent to the host or when the ALERT pin is
                                                                 carrier pin similar to the CD pin functionality in an RS-
asserted. If set, IND indicates that an intrusion event is
                                                                 232 connection. If programmed as an ALERT, GPIO4
in progress. In addition, the status of IND persists for
                                                                 will go high in data mode when either parallel phone
800 msec after an off hook to on-hook event. After
                                                                 intrusion or a loss-of-carrier is detected. When used in
800 msec has elapsed, IND functions as documented
                                                                 this manner, the host detects a low-to-high transition on
for the on-hook intrusion algorithm. This delay
                                                                 GPIO4 (ALERT), escapes into command mode, and
preserves the S14 register contents at the time the
                                                                 reads S14[1] (IND). If high, IND indicates intrusion. If
ALERT is asserted.
                                                                 low, IND indicates loss-of-carrier.
When using the modem as a standard data modem and
                                                                 A carrier detect function may also be implemented by
the ALERT pin asserts, the host software may need to
                                                                 setting SE2[3:2] (GPIO2) = 01b, SE4[0] (TRSP) =0b,
force the modem back into command mode. In the
                                                                 and SOC[7] (CDE) = 1b.
command mode, the host can determine if the ALERT
assertion was caused by an intrusion or a carrier loss by        If the Si2400 does not reliably detect loss of carrier, use
querying the S14 register.                                       the following AT command string:
If the modem is dialing (after the ATDT string but before        ATSE8=00SE6=00SE5=25SE8=01SE6=0ASE5=3DSE8=00
the “c”, “v”, or “d” result codes), sending any character        This moves the carrier-off level to within 0.5 dB of the
places the modem back into command mode. In the                  carrier-on level. (The default is 2.5 dB.) This reduces
case in which the modem has already connected (in                the likelihood that the Si2400 will detect its own output
data mode after the “c”, “v” or “d” result code has been         as a remote modem carrier.
sent), an escape sequence is required to place the
                                                                 5.8. Overcurrent Detection
modem in the command mode.
The best method of regaining control, without having to          The Si2400 will always go off hook with the current-
know the exact status of the modem, is by issuing an             limiting mode enabled. This allows no possibility of
escape sequence (asserting the ESC pin and waiting a             damage for voltages up to about 48 V. However, at
short period of time) and sending a carriage return              higher voltages the 43 V Zener protection device will
character. The escape sequence takes care of the case            begin to conduct and could be damaged if the power is
in which the modem is in the connected state, and the            applied for too long.
carriage return character aborts the dialing if the modem        The Si2400 will detect the value of the loop current at a
is in the process of dialing to get a connection. If the         programmable time set by S32 (OCDT) after going off-
modem is already on-hook and in command mode, the                hook (default = 20 ms). If the loop current is too high, an
carriage return character and escape sequence are                “x” will be echoed back to the host to indicate a fault
benign events.                                                   condition. The host may then check S14[3] (OD) to
                                                                 confirm an overcurrent condition.
                                                                 The user can optionally put the Si2400 into a lower drive
                                                            Rev. 1.3                                                      21


Si2400
mode, which is similar to the current-limiting mode but         decoded caller ID data. The wetting pulse may cause
has reduced hookswitch drive. This feature allows the           false intrusions to be detected. To prevent this, setting
Si2400 to remain off-hook on a digital line for a longer        S14[7] (MRCD) = 1b is recommended.
period of time without damage. If the Si2400 does not           5.9.3. Japan Caller ID Operation
detect overcurrent after the time set by S32 (OCDT), the
                                                                After a polarity reversal and the first ring burst are
correct line termination is applied. Another option is
                                                                detected, the Si2400 is taken off hook. The Si2400 then
setting S13[5] (OFHE) = 1b. When this bit is set, the
                                                                looks for mark bits. If three seconds elapse without
Si3015 is forced to CTR21 termination during the short
                                                                detecting a mark bit, the Si2400 hangs up and echoes
period of time from the off-hook event until the timeout
                                                                an “H”. Otherwise, after 40 1s (marks) have been
defined by OCDT. After the OCDT timeout, the desired
                                                                detected, the Si2400 will search for a start bit, echo an
dc termination is restored.
                                                                “m” for mark, and begin assembling characters and
If it is determined that a false overcurrent condition has      transmitting them out through the serial port. When the
been detected, the host may choose to set                       carrier is lost, the Si2400 immediately hangs up and
S62[6] (OCR) = 1b to disable the reporting of the “x”           echoes “N”.
result code.
                                                                5.9.4. Force Caller ID Monitor
5.9. Caller ID Decoding Operation                               The Si2400 may be used to continuously monitor the
The Si2400 supports full caller ID detection and decode         phone line for the caller ID mark signals. This can be
for US Bellcore, UK, and Japanese standards. To use             useful in systems that require detection of caller ID data
the caller ID decoding feature, the following set-up is         before the ring signal, voice mail indicator signals, and
necessary:                                                      Type II caller ID monitor support. To force the Si2400
                                                                into caller ID monitor mode, set SOC[6:5] (CIDM) = 11b.
1. Set SE0[3] (ND) = 0b (Set modem to 8N1 configuration)
                                                                In addition, the Force Caller ID Monitor feature can
2. Set S13[1] (CIDU) = 1b (Set modem to Bellcore type caller
                                                                require that the caller ID FSK data be preceded by
     ID) or S13[2] (CIDB) = 1b (Set modem to UK type caller
                                                                either a DTMF A or D or a channel seizure pattern by
     ID) or S13[7] (JID) = 1b (Set modem to Japanese type
     caller ID)                                                 setting CIDM appropriately.
                                                                Note: CIDM should be disabled before going off-hook.
5.9.1. Bellcore Caller ID Operation
                                                                5.9.5. DTMF Caller ID
The Si2400 will detect the first ring burst signal and
echo an “R” to the host. The device will then start             In order for the Si2400 to detect DTMF-based caller ID,
searching for the caller ID preamble sequence after the         it must be put into the data mode for DTMF detection.
appropriate time-out. When 50 continuous mark bits              This mode behaves similarly to the ATA0 and ATDT!0
have been detected, the “m” response will be echoed to          modes in that once a command is sent, ATO must be
indicate that the mark has been detected and that caller        sent to return to the detection state. The following
ID data will follow.                                            commands place the Si2400 into an on-hook DTMF
                                                                detection mode:
At this point the algorithm will look for the first start bit,
assemble the characters and transmit them out of the                 ATS1D=02SF0=02SE8=02SE6=01S83=66O<CR>
serial port as they are detected.                               The Si2400 cannot distinguish between DTMF sent
Finally, the Si2400 will continue detecting ring bursts         from the central office or DTMF sent from a parallel
and echoing “R” for each burst and will automatically           phone. For this reason, the host processor will need to
answer after the correct number of rings set by S00             know the proper format of the caller ID information to
(NR).                                                           interpret whether the incoming digits are caller ID
                                                                information or if they are the outgoing digits of a parallel
5.9.2. UK Caller ID Operation
                                                                phone. DTMF-based caller ID typically uses the
When the Si2400 detects a line reversal, it will echo an        extended DTMF digits (A, B, C, D, *, #) to indicate the
“f” to the host. It will then start searching for the Idle      start and end of the caller ID data.
State Tone Alert Signal. When this signal has been
                                                                While in this mode, the Si2400 will not report detection
detected, the Si2400 will transmit an “a” to the host.
                                                                of ringing and must rely on the caller ID string as an
After the Idle State Tone Alert Signal is completed, the
                                                                indication that the phone is ringing. It is necessary to
Si2400 will apply the wetting pulse for the required
                                                                end the DTMF detection mode by sending the ATH
15 ms by quickly going off hook and on hook. From this
                                                                command before originating (ATDT) or answering (ATA)
point on, the algorithm is identical to that of Bellcore in
                                                                a call.
that it will search for the channel seizure signal and the
marks before echoing an “m” and will then report the
22                                                         Rev. 1.3


                                                                                                                                                    Si2400
5.10. Tone Generation and Tone Detection                                           5.11. PCM Data Mode
The Si2400 provides comprehensive and flexible tone                                The Si2400 has the ability to bypass the modem
generation and detection. This includes all tones                                  algorithm and send 14-bit PCM data, sampled at
needed to establish a circuit connection and to set up                             9600 Hz, across the DAA. To use this mode, it is
and control a communication session. The tone                                      necessary to set the serial link (DTE) rate to at least
generation furnishes the DTMF tones for PSTN auto                                  228613 bps SE0[2:0] (SD) = 101b, set S13[0] (PCM)
dialing and the supervisory tones for call establishment.                          = 1b, and set SE1[7:6] (MCKR) = 00b. The data format
The tone detection provides support for call progress                              (Figure 9) requires that the high byte be sent first
monitoring. The detector can also be user-programmed                               containing bits D13–D7. The LSB (B0) must equal zero.
to recognize up to four tones and two tone detection                               The low byte must be sent next containing bits D6–D0;
bandpass filters.                                                                  the LSB (B0) must equal one. The receive data format is
DTMF tones may be detected and generated by using                                  the same.
the “ATA0” and “ATDT!0” commands described in the                                  In PCM data mode, the line can be answered or
AT command section. A description of the user-                                     originated using the “ATDT#;” command. (The “;” is
programmable tones can be found in "7.1.DSP                                        used to keep the modem from leaving the command
Registers" on page 40.                                                             mode.) When PCM data mode is enabled (set
The Si2400 DTMF decoder is designed for single loop                                S13[0] (PCM) = 1b                       and          SE4[5:4] (DRT) = 001b
applications such as local detection of a parallel DTMF                            (default)), data will immediately begin streaming into
device. Applications requiring DTMF detection across                               and out of the serial port at a 9600 Hz 2 word rate. In        z
two loops such as programming via a remote keypad                                  this mode, the controller will not detect dial tones or
are not supported.                                                                 other call progress tones. If desired, the user can
                                                                                   monitor these tones using manual call progress
                                                                                   detection prior to entering the PCM data mode.
                                                                                   To exit the PCM data mode, an escape must be
                                                                                   performed either by pulsing the ESC pin or by using 9-
                                                                                   bit data mode and setting the ninth bit. (TIES cannot be
                                                                                   used in PCM data mode.) The escape command will
                                                                                   disable PCM streaming, and the controller will again
                                                                                   accept AT style commands.
                                                               PCM Receive Tim ing
  8-Bit Data                         High-Byte                                                                       Low-Byte
  RXD                    D7    D8    D9     D10      D11    D12      D13                                 D0      D1      D2     D3     D4      D5      D6
                   B0    B1    B2    B3      B4       B5      B6     B7      Stop                B0      B1      B2      B3     B4     B5      B6      B7    Stop
         Start                                                                         Start
                                                              PCM Transm it Tim ing
  8-Bit Data                         High-Byte                                                                       Low-Byte
     TXD                    D7    D8      D9     D10      D11    D12     D13                                  D0      D1     D2     D3      D4      D5    D6
                      B0    B1    B2      B3      B4      B5      B6     B7       Stop               B0       B1     B2      B3     B4      B5      B6    B7    Stop
               Start                                                                         Start
                                  Note: Baud rates (programmed through register SEO) can be set to the following: 228613, 245760 and 307200.
                                                              Figure 9. PCM Timing
                                                                           Rev. 1.3                                                                                  23


Si2400
                         Data Mode (DRT = 00b)
                   Si2400
          DSP                                          Si3015
      TXD  DSPOUT                                             RJ11
   A.
      RXD    DSPIN                                            RJ11
                              AOUT            AIN
                           (Call Progress)
                        Voice Mode (DRT = 01b)
                   Si2400
          DSP                                          Si3015
      TXD  DSPOUT                                             RJ11
   B.
      RXD    DSPIN                                            RJ11
                              AOUT            AIN
                             (Voice Out)    (Voice In)
                      Loopback Mode (DRT = 10b)
                   Si2400
          DSP
      TXD  DSPOUT
   C.
      RXD    DSPIN
                              AOUT            AIN
                       Codec Mode (DRT = 11b)
                   Si2400
          DSP                                          Si3015
      TXD  DSPOUT                                                  RJ11
   D.
      RXD    DSPIN
                             AOUT             AIN
                            (Voice Out)     (Voice In)
                        Figure 10. Signal Routing
24                                     Rev. 1.3


                                                                                                       Si2400
5.12. Analog Codec                                           5.13. V.23 Operation/V.23 Reversing
The Si2400 features an on-chip, voice quality codec.         The Si2400 supports full V.23 operation including the
The codec consists of a digital to analog converter          V.23 reversing procedure. V.23 operation is enabled by
(DAC) and an analog to digital converter (ADC). The          setting S07 (MF1) = xx10xx00b or xx01xx10b. If
sample rate for the codec is set to 9.6 kHz. When the        S07[5] (V23R) = 1b, then the Si2400 will transmit data at
codec is powered on (SE4[1] [APO] = 1b), the output of       75 bps and receive data at either 600 or 1200 bps. If
the DAC is always present on the Si2400 AOUT pin.            S07[4] (V23T) = 1b, then the Si2400 will receive data at
When the codec is powered off (APO = 0b), a PWM              75 bps and transmit data at either 600 or 1200 bps.
output is present on the AOUT pin instead. In order to       S07[2] (BAUD) is the 1200 or 600 bps indicator.
use the ADC, one of the four GPIO pins must be               BAUD = 1b will enable the 1200/600 V.23 channel to run
selected as an analog input (AIN) by programming SE2         at 1200 bps while BAUD = 0b will enable 600 bps
(GPIO).                                                      operation.
Figure 10 shows the various signal routing modes for         When a V.23 connection is successfully established, the
the Si2400 voice codec, which are programmed through         modem will respond with a “c” character if the
register SE4[5:4] (DRT). Figure 10A shows the data           connection is made with the modem transmitting at
routing for data mode. This is the default mode used for     1200/600 bps and receiving at 75 bps. The modem will
modem data formats. In this configuration, AOUT              respond with a “v” character if a V.23 connection is
produces a mixed sum of the DSPOUT and DSPIN                 established with the modem transmitting at 75 bps and
signals and is typically used for call progress monitoring   receiving at 1200/600 bps.
through an external speaker. The relative levels of the      The Si2400 supports the V.23 turnaround procedure.
DSPOUT and DSPIN signals that are output on the              This allows a modem that is transmitting at 75 bps to
AOUT pin can be set through SF4[1:0] (ATL) and               initiate a “turnaround” procedure so that it can begin
SF4[3:2] (ARL).                                              transmitting data at 1200/600 bps and receiving data at
Figure 10B shows the format for sending analog voice         75 bps. The modem is defined as being in V.23 master
across the DAA to the PSTN. AIN is routed directly           mode if it is transmitting at 75 bps and it is defined as
across the DAA to the telephone line. In this                being in slave mode if the modem is transmitting at
configuration, AOUT produces a mixed sum of the              1200/600 bps. The following paragraphs give a detailed
DSPOUT and DSPIN signals. The relative levels of the         description of the V.23 turnaround procedure.
DSPOUT and DSPIN signals that are output on the              5.13.1. Modem in master mode
AOUT pin can be set through registers ATL and ARL.
                                                             To perform a direct turnaround once a modem
The DSP may process these signals if it is not in PCM
                                                             connection is established, the master host goes into
data mode. Thus, the DSP may be used in this
                                                             online-command-mode by sending an escape
configuration, for example, to decode DTMF tones. This
                                                             command (Escape pin activation, TIES, or ninth bit
is the mode used with the “!0” and “A0” commands.
                                                             escape) to the master modem. (Note that the host can
Figure 10C shows the loopback format, which can be           initiate a turnaround only if the Si2400 is the master.)
used for in-circuit testing.                                 The host then sends the ATRO command to the Si2400
Figure 10D shows the codec mode. This format is              to initiate a V.23 turnaround and to go back to the online
useful, for example, in voice prompting, speaker             (data) mode.
phones, or any systems involving digital signal              The Si2400 will then change its carrier frequency (from
processing. In this mode, DSPOUT is routed to both the       390 Hz to 1300 Hz), and wait to detect a 390 Hz carrier
AOUT pin and to the telephone line, and AIN is routed        for 440 ms. If the modem detects more than 40 ms of a
directly to DSPIN.                                           390 Hz carrier in a time window of 440 ms, it will echo
In all the DRT formats, the DSP must be in PCM mode          the “c” response character. If the modem does not
in order to pass DSPIN and DSPOUT directly to and            detect more than 40 ms of a 390 Hz carrier in a time
from TXD and RXD.                                            window of 440 ms, it will hang up and echo the “N” (no
                                                             carrier) character as a response
                                                        Rev. 1.3                                                     25


Si2400
5.13.2. Modem in slave mode                                 command, or the auto-answer mode. (The auto-answer
Configure GPIO4 as ALERT (S2E[7:6] [GPIO4] = 11b).          mode is implemented by setting register S00 (NR) to a
The Si2400 performs a reverse turnaround when it            non-zero value.) When the call is connected, a “c”, “d”,
detects a carrier drop longer than 20 ms. The Si2400        or a “v” is echoed to the host controller. The host may
then reverses (it changes its carrier from 1300 Hz to       now send/receive data across the UART using either
390 Hz) and waits to detect a 1300 Hz carrier for           the 8-Bit Data or 9-Bit Data formats with flow control.
220 ms. If the Si2400 detects more than 40 ms of a          At this point, the Si2400 will begin framing data into the
1300 Hz carrier in a time window of 220 ms, then it will    HDLC format. On the transmit side, if no data is
set the ALERT pin (GPIO4) and the next character            available from the host, the HDLC flag pattern is sent
echoed by the Si2400 will be a “v”.                         repeatedly. When data is available, the Si2400
If the Si2400 does not detect more than 40 ms of the        computes the CRC code throughout the frame and the
1300 Hz carrier in a time window of 220 ms, then it         data is sent with the HDLC zero-bit insertion algorithm.
reverses again and waits to detect a 390 Hz carrier for     HDLC flow control operates in a similar manner to
220 ms. Then, if the Si2400 detects more than 40 ms of      normal asynchronous flow control across the UART and
a 390 Hz carrier in a time window of 220 ms, it will set    is shown in Figure 11. In order to operate flow control
the ALERT pin (GPIO4) and the next character echoed         (using the CTS pin to indicate when the Si2400 is ready
by the Si2400 will be a “c”.                                to accept a character), a DTE rate higher than the line
At this point, if the Si2400 does not detect more than      rate should be selected. The method of transmitting
40 ms of the 390 Hz carrier in a time window of 220 ms,     HDLC frames is as follows:
then it will hang up, set the ALERT pin (GPIO4), and the    1. After the call is connected, the host should begin sending
next character echoed by the Si2400 will be an “N” (no          the frame data to the Si2400, using the CTS flow control to
carrier).                                                       ensure data synchronicity. A 1-deep character FIFO is
                                                                implemented in the Si2400 to ensure that data is always
Successful completion of a turnaround procedure in              available to transmit.
either master or slave will automatically update
                                                            2. When the frame is complete, the host should simply stop
S07[4] (V23T) and S07[5] (V23R) to indicate the new
                                                                sending data to the Si2400. As shown in Figure 11B, since
status of the V.23 connection.                                  the Si2400 does not yet recognize the end-of-frame, it will
In order to avoid using the ALERT pin, the host may             expect an extra byte and assert CTS. If CTS is used to
also be notified of the ALERT condition by using 9-bit          cause a host interrupt, then this final interrupt should be
data      mode.      Setting    S15[0] (NBE) = 1b    and        ignored by the host.
S0C[3] (9BF) = 0b will configure the ninth bit on the       3. When the Si2400 is ready to send the next byte, if it has
Si2400 TXD path to function exactly as the ALERT pin            not yet received any data from the host, it will recognize
has been described.                                             this as an end-of-frame, raise CTS, calculate the final CRC
                                                                code, transmit the code, and begin transmitting stop flags.
5.14. V.42 HDLC Mode                                        4. After transmitting the first stop flag, the Si2400 will lower
The Si2400 supports V.42 through hardware HDLC                  CTS indicating that it is ready to receive the next frame
framing in all modem data modes. Frame packing and              from the host. At this point the process repeats as in
unpacking, including opening and closing flag                   step 1.
generation and detection, CRC computation and               The method of receiving HDLC frames is as follows:
checking, zero insertion and deletion, and modem data       1. After the call is connected, the Si2400 searches for flag
transmission and reception are all performed by the             data. Then, once the first non-flag word is detected, the
Si2400. V.42 error correction and V.42bis data                  CRC is continuously computed, and the data is sent
compression must be performed by the host.                      across the UART (8-Bit Data or 9-Bit Data mode) to the
                                                                host after removing the HDLC zero-bit insertion. The DTE
The digital link interface in this mode uses the same
                                                                rate of the host must be at least as high as that of data
UART interface (8-Bit Data and 9-Bit Data formats) as in        transmission. HDLC mode only works with 8-bit data
the asynchronous modes and the ninth data bit may be            words; the ninth bit is used only for escape on TXD and
used as an escape by setting S15[0] (NBE) = 1b. When            End-of-Frame Received (EOFR) on RXD.
using HDLC in 9-Bit Data mode, if the ninth bit is not      2. When the Si2400 detects the stop flag, it will send the last
used as an escape, it is ignored.                               data word in the frame as well as the two CRC bytes and
To use the HDLC feature on the Si2400, the host must            determine if the CRC checksum matches. Thus, the last
first     enable     HDLC      operation   by     setting       two bytes are not frame data, but are the CRC bytes,
S07[7] (HDEN) = 1b. Next, the host may initiate the call        which can be discarded by the host. If the checksum
or answer the call using either the “ATDT#”, the “ATA”          matches, then the Si2400 echoes “G” (good). If the
26                                                     Rev. 1.3


                                                                                                                                                           Si2400
   checksum does not match, the Si2400 echoes “e” (error).                                5.15. Fast Connect
   Additionally, if the Si2400 detects an abort (seven or more
   contiguous ones), then it will echo an “A”.                                            In modem applications that require fast connection
   When the “G”, “e”, or “A” (referred to as a frame result                               times, it is possible to reduce the length of the
   word) is sent, the Si2400 raises the EOFR (end of frame                                handshake.
   receive) pin (see Figure 10B). The GPIO1 pin must be                                   If the Si2400 is set up as an answering modem, the
   configured as EOFR by setting SE4[3] (GPE) = 1b. In                                    answer tone transmitted by the Si2400 may be
   addition to using the EOFR pin to indicate that the byte is a
                                                                                          shortened by setting S1E (TATL) = 0x00 and setting
   frame result word, if in 9-bit data mode (set S15[0] (NBE) =
                                                                                          S34 (TASL) to the desired answer tone length. For the
   1b), the ninth bit will be raised if the byte is a frame result
   word. To program this mode, set S0C[3] (9BF) = 1b and                                  most robust operation, it is recommended that the
   SE0[3] (ND) = 1b.                                                                      answer tone sent by the answering modem be at least
                                                                                          10 msec (S34 (TASL) = 0x06).
3. When the next frame of data is detected, EOFR is lowered
   and the process repeats at step 1.                                                     If the Si2400 is configured as an originating modem,
To summarize, the host will begin receiving data                                          setting the No Answer Tone bit (S33[1] [NAT] = 1b)
asynchronously from the Si2400. When each byte is                                         forces the Si2400 to recognize a short answer tone,
received, the host should check the EOFR pin (or the                                      thereby reducing the overall connection sequence.
ninth bit). If the EOFR pin (or the ninth bit) is low, then                               Additional modem handshaking control can be adjusted
the data is valid frame data. If the EOFR pin (or the                                     through the registers shown in Table 15. These
ninth bit) is high, then the data is a frame result word.                                 registers are most useful if the user has control of both
                                                                                          the originating and answer modems.
                        Host begins frame N                                                    Host finished sending frame N       Host begins frame N + 1
     TXD                            Start                  Frame N                               Stop                                        Start            Frame N + 1
                                                                                                         Si2400 detects end of frame N.
                Si2400 ready for byte 1 of frame N     (CTS used as normal flow control.)
                                                                                                                  Si2400 ready for byte 1
                                                                                                                  of frame N + 1.
     CTS
                         Note: Figure not to scale.
                                                                    A. Fram e Transm it
    RXD            Start        Receive Data      Stop   Start    CRC Byte 1       Stop        Start         CRC Byte 2       Stop     Start     Frame Result W ord  Stop
    EO FR
  (or bit 9)
                                                                     B. Fram e Receive
                                                               Figure 11. HDLC Timing
                                                                                Rev. 1.3                                                                                  27


Si2400
                                  Table 15. Handshaking Control Registers
   Register     Name                              Function                                 Units          Default
     S1E        TATL     Transmit Answer Tone Length                                       1 sec            0x03
     S1F        ATTD     Answer Tone to Transmit Delay                                  5/3 msec            0x2D
     S20         UNL     Unscrambled Ones Length—V.22                                    5/3 msec           0x5D
     S21        TSOD     Transmit Scrambled Ones Delay—V.22                             53.3 msec           0x09
     S22        TSOL     Transmit Scrambled Ones Length—V.22                            5/3 msec            0xA2
     S23        VDDL     V.22/22b Data Delay Low                                         5/3 msec           0xCB
     S24        VDDH     V.22/22b Data Delay High                                    (256) 5/3 msec         0x08
     S25        SPTL     S1 Pattern Time Length V.22b                                   5/3 msec            0x3C
     S26        VTSO     V.22b 1200 bps Scrambled Ones Length                           53.3 msec           0x0C
     S27       VTSOL     V.22b 2400 bps Scrambled Ones Length Low                        5/3 msec           0x78
     S28       VTSOH     V.22b 2400 bps Scrambled Ones Length High                   (256) 5/3 msec         0x08
     S2A         RSO     Receive Scrambled Ones V.22b Length                            5/3 msec            0xD2
     S2F         FCD     FSK Connection Delay Low                                       5/3 msec            0x3C
     S30        FCDH     FSK Connection Delay High                                   (256) 5/3 msec         0x00
     S31        RATL     Receive Answer Tone Length                                     5/3 msec            0x3C
     S34        TASL     Answer Tone Length (only used in S1E [TATL] = 0x00)             5/3 msec           0x5A
     S35        RSOL     Receive V.22 Scrambled Ones Length                             5/3 msec            0xA2
5.16. Clock Generation Subsystem                           UART DTE rate is set to 2400 bps, given that the clock
                                                           input is 4.9152 MHz. The MCKR register conserves
The Si2400 contains an on-chip clock generator. Using
                                                           power via slower clocking of the microcontroller for
a single master clock input, the Si2400 can generate all
                                                           specific applications where power conservation is
modem sample rates necessary to support V.22bis,
                                                           required. Table 16 shows the configurations for different
V.22/Bell212A, and V.21/Bell103 standards and a
                                                           values of MCKR.
9.6 kHz rate for audio playback. Either a 4.9152 MHz
clock on XTALI or a 4.9152 MHz crystal across XTALI                  Table 16. MCKR Configurations
and XTALO form the master clock for the Si2400. This
clock source is sent to an internal phase-locked loop           SE1[7:6]        Controller
(PLL) which generates all necessary internal system                                                  Modes
                                                                (MCKR)        Clock (MHz)
clocks. The PLL has a settling time of ~1 ms. Data on
RXD should not be sent to the device prior to settling of          00          9.8304 MHz     All (default)
the PLL.
The CLKOUT pin outputs a 78.6432 MHz/(N + 1) clock                 01          4.9152 MHz     All except V.22bis,
which may be used to clock a microcontroller or other                                         PCM
devices in the system. N may be programmed via                     10          2.4576 MHz     Command only
SE1[4:0] (CLKD) to any value from 1 to 31. N defaults to
7 on power-up. CLKOUT is disabled by setting N = 0.                11           Reserved      Reserved
SE1[7:6] (MCKR) allows the user to control the
microcontroller clock rate. On powerup, the Si2400
28                                                    Rev. 1.3


                                                                                                      Si2400
6. AT Command Set                                           contain several commands, one after the other. If there
                                                            are no characters between AT and <CR>, the modem
The controller provides several vital functions including   responds with “O” after the carriage return.
AT command parsing, DAA control, connect sequence
control, DCE protocol control, intrusion detection,         6.1. Command Line Execution
parallel phone off-hook detection, escape control, caller   The characters in a command line are executed one at
ID control and formatting, PCM mode control, ring           a time. Unexpected command characters will be
detect, DTMF control, call progress monitoring, and         ignored, but unexpected data characters may be
HDLC framing. The controller also writes to the control     interpreted incorrectly.
registers that configure the modem. Virtually all           After the modem has executed a command line, the
interaction between the host and the modem is done via      result code corresponding to the last command
the controller. The controller uses AT (ATtention)          executed is returned to the terminal or host. In addition
commands and S-Registers to configure and control the       to the “ATH” and “ATZ” commands, the commands
modem.                                                      which warrant a response (e.g., “ATSR?” or “ATI”) must
The modem has two basic modes of operation, the             be the last in the string and followed by a <CR>. All
Command mode and the Data mode. The Si2400 is               other commands may be concatenated on a single line.
asynchronous in both the Command mode and the Data          To echo command line characters, set the Si2400 to
mode. The modem is in the Command mode at power-            echo mode using the E1 command.
up, after a reset, before a connection is made, after a     All numeric arguments, including S-register address and
connection is dropped, and during a connection after        value, are in hexidecimal format and two digits must
successfully “Escaping” from the data mode back to the      always be entered.
command mode using one of the methods previously
described. The following section describes the AT           6.2. < CR > End Of Line Character
command set available in the Command mode.                  This character is typed to end a command line. The
The Si2400 supports a subset of the typical modem AT        value of the <CR> character is 13 decimal, the ASCII
command set since it is intended for use with a             carriage return character. When the <CR> character is
dedicated microcontroller instead of general terminal       entered, the modem executes the commands in the
applications. AT commands begin with the letters AT         command line. Commands which do not require a
and are followed directly (no space) by the command.        response are executed immediately and do not
(These commands are also case-sensitive.) All AT            need a <CR>.
commands must be entered in upper case including AT
except w##, r#, m#, q#, and z (wakeup-on-ring).
AT commands can be divided into two groups, control                Table 17. AT Command Set Summary
commands and configuration commands. Control
                                                              Command        Function
commands, such as ATD, cause the modem to perform
an action (going off-hook and dialing). The value of this           A        Answer line immediately with modem.
type of command is changed at a particular time to                DT#        Tone dial number.
perform a particular action. For example, the command             DP#        Pulse dial number.
“ATDT1234<CR>” will cause the modem to go off-hook                  E        Local echo on/off.
and dial the number 1234 via DTMF. This action will
                                                                   H         Hangup/go on line.
exist only during a connection attempt. No enduring
change in the modem configuration will exist after the              I        Chip revision.
connection or connection attempt has ended.                        M         Speaker control options.
Configuration       commands         change       modem            O         Return online.
characteristics until they are modified or reversed by a          RO         V.23 reverse.
subsequent configuration command or the modem is                    S        Read/write S-Registers.
reset. Modem configuration status can be determined               w##        Write S-Register in binary.
with the use of “ATSR?<CR>” Where R is the two                     r#        Read S-Register in binary.
character hexadecimal address of an S-register.
                                                                  m#         Monitor S-Register in binary.
A command line is defined as a string of characters
                                                                   q#        Read S-Register in binary.
starting with AT and ending with an end-of-line
character, <CR> (13 decimal). Command lines may                     Z        Software reset.
                                                                    z        Wakeup on ring.
                                                       Rev. 1.3                                                    29


Si2400
6.3. AT Command Set Description                                ATDT;
                                                               ATH
A                 Answer
                                                               ATDT#
The “A” command makes the modem go off hook and
                                                               The length of the flash is determined by how quickly the
respond to an incoming call. This command is to be
                                                               commands are entered. No comma is necessary for the
executed after the Si2400 has indicated a ring has
                                                               second dial because ATS01 sets the number of
occurred. (The Si2400 will indicate an incoming ring by
                                                               seconds before dialing. Set S07[6] (BD) for blind dial.
echoing an “R”.)
                                                               6.3.1. Automatic Tone/Pulse Dialing
This command is aborted if any other character is
transmitted to the Si2400 before the answer process is         The Si2400 can be set up to try DTMF dialing and
completed.                                                     automatically revert to pulse dialing if it determines that
                                                               the line is not DTMF-capable. This feature is best
Auto answer mode is entered by setting S00 (NR) to a
                                                               explained by the following example:
non-zero value. NR indicates the number of rings before
answering the line.                                            If it is desired that the telephone number 12345 be
                                                               dialed, it is normally accomplished through either the
Upon answering, the modem communicates by
                                                               ATDT12345 or the ATDP12345 command. In the force
whatever protocol has been determined via the modem
                                                               pulse dialing mode of operation, the following string
control registers in S07 (MF1).
                                                               should be issued instead:
If no transmit carrier signal is received from the calling
                                                                                    ATDT1,p12345
modem within the time specified in S39 (CDT), the
modem hangs up and enters the idle state.                      If the result code returned is “t,”, it indicates that the
                                                               dialing was accomplished using DTMF dialing. If the
D                 Dial
                                                               result code returned is “tt,”, it indicates that the dialing
     DT#          Tone Dial Number.                            was accomplished using pulse dialing.
     DP#          Pulse Dial Number.                           In the above example, the Si2400 dials the first digit “1”
The D commands make the modem dial a telephone                 using DTMF dialing. The “,” is used to pause in order to
call according to the digits and dial modifiers in the dial    ensure that the central office has had time to accept the
string following the command. A maximum of 64 digits is        DTMF digit “1”. When the Si2400 processes the “p”
allowed. A DT command performs tone dialing, and a             command, it attempts to detect a dial tone. If a dial tone
DP command performs pulse dialing.                             is detected, the DTMF digit “1” was not effective, hence
The “ATS07=40DT;” command can be used to go off                the line does not support DTMF dialing. Conversely, if
hook without detecting dial tone or dialing.                   the dial tone is not detected, the DTMF digit “1” was
                                                               effective, and the line does support DTMF dialing. The
The dial string must contain only the digits “0–9”, “*”, “#”,
                                                               character after the “p” may or may not be dialed,
“A”, “B”, “C”, “D”, or the modifiers “;”, “/”, or “,”. Other
                                                               depending on whether the DTMF digit “1” was effective
characters will be interpreted incorrectly. The modifier
                                                               or not. If the “1” was effective (DTMF mode), the
“,” causes a two second delay (added to the spacing
                                                               character after the “p” is skipped. The next DTMF digit
value in S04) in dialing. The modifier “/” causes a
                                                               to be dialed is “2”. Subsequent digits are all DTMF. If the
125 ms delay (added to the spacing value in S04) in
                                                               “1” was not effective, the first character after the “p” (the
dialing. The modifier “;” returns the device to command
                                                               “1”) is pulse dialed, and subsequent digits are all pulse
mode after dialing and must be the last character.
                                                               dialed.
If any character is received by the Si2400 between the
                                                               E                 Command Mode Echo
ATDT#<CR> (or ATDP#<CR>) command and when the
connection is made (“c” or “d” is echoed), the extra           Tells the Si2400 whether or not to echo characters sent
character is interpreted as an abort, and the Si2400           from the terminal.
returns to command mode, ready to accept AT                          EO
commands. A line feed character immediately following          Does not echo characters sent from the terminal.
the <CR> will be treated as an “extra character” and will
                                                                     E1
abort the call.
                                                               Echo characters sent from the terminal.
If the modem does not have to dial (i.e., “ATDT<CR>” or
“ATDP<CR>” with no dial string), the Si2400 assumes            H                 Hangup
the call was manually established and attempts to make         Hang up and go into command mode (go offline).
a connection.                                                  I                 Chip Identification
The following may be used to perform a hook-flash:
30                                                        Rev. 1.3


                                                                                                          Si2400
This command causes the modem to echo the chip                  examples are given below.
revision for the Si2400 device.                                 6.4.1. ATSR Commands
0 = Revision A                                                  The ATSR commands are generally used to write to or
1 = Revision B                                                  read from S-registers. The address, R, and the value, N,
2 = Revision C, etc.                                            must be written into the AT command as a two character
                                                                hexadecimal value between 00 and FF. An S-Register is
M                 Speaker On/Off Options
                                                                written with the command “ATSR=N”. The hexadecimal
These options are used to control AOUT for use with a           address and value parameters appearing on the
call progress monitor speaker.                                  terminal or PC screen are actually transmitted to the
      M0                                                        modem as the hexadecimal equivalents of each
Speaker always off.                                             character. Likewise, the value N stored in S-register R is
                                                                read back to the terminal with the ATSR? command as
      M1
                                                                two hexadecimal characters. For example, read the
Speaker on until carrier established. The modem sets            value of S35 after the Si2400 has been reset.
SF4[3:2] (ARL) = 11b and SF4[1:0] (ATL) = 11b after a
connection is established.                                          Terminal      Sent to Modem Response Display
      M2                                                              Entry
Speaker always on.                                               ATS35?<CR> 41 54 53 33 35            41 32        A2
      M3                                                                               3F 0D
Speaker on after last digit dialed, off at carrier detect.
                                                                6.4.2. # Commands
O                 Return to Online Mode
                                                                The # commands offer several performance and
This command returns the modem to the online mode. It
                                                                convenience advantages for embedded applications
is frequently used after an escape sequence to resume
                                                                over the more traditional ATSR-style commands. The #
communication with the remote modem.
                                                                parameter is entered as the ASCII equivalent of a
RO                Turn-Around                                   hexadecimal value representing the S-register address
This command initiates a V.23 “direct turnaround”               or content. This parameter is sent to the modem as the
sequence and returns online.                                    hexadecimal equivalent of the ASCII value. The #
                                                                commands offer a more rapid method for reading and
6.4. S-Register Control                                         writing S-Registers since fewer characters are sent to or
S-registers control Si2400 configuration and provide            received from the modem.
status information. Therefore, writing to and reading           6.4.3. w## Write S-Register
from S-registers is central to the operation of the
                                                                This command is analogous to the ATSR=N command.
modem. There are two fundamental methods for writing
                                                                From a terminal, the first # following w is the ASCII
to and reading from Si2400 S-Registers. The first and
                                                                equivalent of the hexadecimal address of the S-Register
most common method uses the ATSR=N and ATSR?
                                                                and the second # is the ASCII equivalent of the
commands. These commands are used by
                                                                hexadecimal value of the S-Register. For example, write
communication software packages and are universally
                                                                the value 58h to S34.
supported by modem chips. The second method uses
the ATw##, ATr#, ATm#, and ATq# commands and is
designed to reduce data flow and streamline                         Terminal      Sent to Modem Response Display
performance in embedded systems. When ATSR                            Entry            (hex)
commands are used, each character of the two                          ATw4X       41 54 77 34 58        —          —
character hexadecimal values for both R and N are sent
to the AT command parser for decoding and action                6.4.4. r# Command Read S-Register
immediately instead of waiting for a <CR>. Additionally,        This command is analogous to the ATSR? command.
a carriage return, <CR>, is required to terminate the           From a terminal, the # following r is the ASCII
ATSR? command (not ATSR=N). When the #                          equivalent of the hexadecimal address of the S-
commands are used, # is the single character ASCII              Register. The modem will echo the register contents as
equivalent of the two character hexadecimal S-Register          the ASCII equivalent of the hexadecimal value of the
address or value and no carriage return is required for         contents. This command executes immediately and
any of the # commands. Further explanations and                 does not require a carriage return. Modem result codes
                                                           Rev. 1.3                                                    31


Si2400
must be disabled by setting S14[7] (MRCD) = 1b when        Z                 Software Reset (upper-case Z)
using this command to ensure the host does not             The “Z” command causes a software reset to occur in
confuse a result code with data. w## and r# are not        the device whereby the registers will return to their
required to be on separate lines (no <CR> between          default power up value with the exception of E0, E2,
them). Once a <CR> is encountered, AT is required to       E4–E7, F8, and F9. These registers are not reset, so
begin the next AT command. For example, write the          the Si2400 will maintain its current DTE settings, GPIO
value 58h to S34 and read it back using # commands         definitions, tone detect and transmit settings, and
and ATSR commands.                                         overload and billing tone detection status. The hardware
                                                           reset pin, RESET (Si2400, pin 8), is used to reset the
     Terminal          Sent to     Response Display        Si2400 to factory default settings. If other commands
       Entry        Modem (hex)      (hex)                 follow on the same line, another AT is needed after the
     ATw4Xr4       41 54 77 34 58      58         X        “Z” (e.g., ATZATS07=06<CR>).
                        72 34                              z                 Wakeup on Ring (lower-case z)
  ATS34=58S34 41 54 53 33 34         35 38        58       The Si2400 enters a low-power mode wherein the DSP
      ?<CR>        3D 35 38 53 33                          and microcontroller are powered down. The serial
                      34 3F 0D                             interface also stops functioning. In this mode, only the
                                                           line-side chip (Si3015) and the communication link
The economy of the # commands is clearly evident from
                                                           function. An incoming ring signal or line transient
this example. One caveat when using the # commands
                                                           causes the Si2400 to power up and echo an “R”.
is that the ASCII equivalents of the response can be
                                                           Without a ring signal, the host must perform a hardware
displayed as special or graphic characters when using a
                                                           reset (Si2400, pin 8) to power up the Si2400. Return
terminal emulator program such as HyperTerminal.
                                                           from wake-on-ring can also be set to trigger the ALERT
However, in an embedded system, it is easy to send
                                                           pin by setting S62[4] (WOR) = 1b.
non-ASCII characters.
6.4.5. m# Command Monitor S-Register                       6.5. Alarm Industry AT Commands
This command is similar to the r# command but is           The Si2400 supports a complete set of commands
repeated at the DTE rate until a new byte is transmitted   necessary for making connections in security industry
to the modem. The modem will echo the register             systems. The Si2400 is configurable in three modes for
contents to the display as the ASCII equivalent of the     these applications. The first mode, DTMF send and
hexadecimal value of the contents. This command            receive, is selected with the “!1” command. The second
executes immediately and does not require a carriage       mode uses FSK transmit with a tone acknowledgement
return. Modem result codes must be disabled by setting     and is selected with “!2”. Finally, “!7” is selected for the
S14[7] (MRCD) = 1b when using this command to              tone-on/tone-off mode.
ensure that the host does not confuse a result code with   The following are a few general comments about the
data.                                                      use of “!” commands. Specific details for each command
6.4.6. q# Command Read S-Register with 0x5500              is given below. The first instance of the “!” must be on
       Offset                                              the same line as the ATDT or ATDP command. DRT
This command is the same as the r# command except          must be set to data mode (SE4[5:4] (DRT) = 0b) before
that the response from the Si2400 is formatted as the      attempting to send tones after a “!” command. The three
hexadecimal value 0x55aa where aa is the hexadecimal       data-mode escape sequences (“+++”, “escape” pin and
value of the S-register contents. From a terminal, the #   “ninth-bit”) only function in “!2” mode. However, using
following q is the ASCII equivalent of the hexadecimal     the “+++” or “ninth-bit” is not recommended because
address of the S-register. This command executes           characters could be sent to and misinterpreted by the
immediately and does not require a carriage return. The    remote modem. Only the “escape pin” (Si2400, pin 14)
0x5500 offset in the value of the register contents        is recommended for use in the “!2” mode. The “!1” and
prevents confusion between data and result codes and       “!7” modes have special escape provisions described in
permits the result codes to remain enabled.                their respective sections below. The AT commands for
                                                           Alarm Industry applications are described in Table 18.
32                                                    Rev. 1.3


                                                                                                        Si2400
      Table 18. AT Command Set Extensions
                                                                        Command                     Result
                    for Alarm Industry
                                                                     ATDT#!0<CR>          Dials #
  Command          Function
                                                                   After “,” result code
       A0          Answer and switch to DTMF monitor
                   mode                                            ATSE4=00O<CR>          Detects DTMF tones in
                                                                                          “data mode”
       A1          Answer and switch to “SIA Format”
       !0          Dial and switch to DTMF monitor                     ATDT1234!0         Sends DTMF tones for
                   mode                                            After “,” result code  1234
       !1          Dial and switch to DTMF security                ATSE4=00O<CR>          Detects DTMF tones in
                   mode                                                                   “data mode”
       !2          Dial and switch to “SIA Format”
                                                                            ATH           Terminates call
       !7          Dial and switch to pulse security mode
       X1          SIA half-duplex mode search                 Example: Dial a number and place the Si2400 in “voice
       X2          SIA half-duplex return online as            mode.”
                   transmitter
       X3          SIA half-duplex return online as                     Command                     Result
                   receiver
                                                                        ATSEf=02          Powers ADC and DAC
6.5.1. A0                                                               ATSE2=02          Sets GPIO1 as analog input
Answer and transmit the AIN analog input signal on the
telephone line and connect the phone line receive                    ATDT#!0<CR>          Dials #
signal to the AOUT pin (see Figure 10B). This mode                 After “,” result code  Modem in “voice mode”
also monitors for local DTMF received signals and user                                    Audio placed on Ain
defined tones. Any received character is echoed. User-                                    (GPIO1) is transmitted and
defined tones are echoed as X and Y. Transmission of                                      received audio is available
any data to the Si2400 UART will cause the modem to                                       on AOUT (see Figure 10).
go into the command mode. The modem can then send
                                                                            ATH           Terminates call
DTMF tones via the “ATDT #!0” command (where #
represents a DTMF character 0-9, A-D, # or*) or be                      ATSE4=02          Returns Si2400 to “data
disconnected with the “ATH” command. The “ATDT #!0”                                       mode” for next dial com-
command string does not initiate a new call since the                                     mand.
modem is already connected.
Notes:                                                         DTMF detection is only intended for local detection of a
    1. DRT must be set to data mode (SE4[5:4](DRT) = 00b)      parallel device, not for detection of a remote source
       before attempting to send tones after a “A0” command.   over two local loops. “Data mode” (see example above)
       User defined tones are enabled by setting S14[6]        DTMF detection is reliable on a quiet line without the
       (UDF) = 1b and require DSP low-level control as
                                                               presence of interfering audio signals or voice. DTMF
       defined on page 40. The online mode can be resumed
                                                               detection, although possible, in the “voice mode” (see
       by issuing the “ATO” command. (see the “!0” section
       for more detail).                                       example above) is not recommended and can be
    2. DTMF detection is only intended for local detection     unreliable.
       of a parallel device.                                   6.5.3. !1
6.5.2. !0                                                      Dial number and follow the DTMF security protocol.
After dialing the number, go to DTMF monitor mode with         The format for this command is as follows:
no modem connection. After dialing the !0 mode is the          ATDT<phone number>!1<message 1><CR>
same as the A0 mode described previously.
                                                               K
Example: Dial a number and detect DTMF tones in
“data mode.”                                                   !<message 2><CR>
                                                               K
                                                          Rev. 1.3                                                    33


Si2400
!<message 3><CR>                                              signaling is at 300 bps half-duplex FSK. The host can
K                                                             send the first SIA block after the “c” is received. Once
                                                              the block is transmitted, the modem can monitor for the
.
                                                              acknowledge tone by completing the following
.                                                             sequence:
.                                                             1. Place the Si2400 in the command mode by pulsing the
K                                                                 ESCAPE pin (Si2400 pin 14). The “+++” and “ninth-bit”
                                                                  escape modes will operate in the “!2” mode but are not
!<message n><CR>
                                                                  recommended because they can send unwanted
The modem dials the phone number and echoes “r”                   characters to the remote modem.
(ring), “b” (busy), and “c” (connect) as appropriate. “c”     2. Issue the “ATX1” command to turn the modem transmitter
echoes only after the Si2400 detects the Handshake                off and begin monitoring for the acknowledgment tones.
Tone. After a 250 msec delay, the modem sends the             3. Monitor for a positive (negative) acknowledgment “P” (“N”)
DTMF tones containing the first message data and                  after the tone has been detected for at least 400 msec.
listens for a Kissoff Tone. If the Kissoff Tone is shorter
                                                              4. The modem, still in command mode, can be placed online
than or equal to the value stored in S36(KTL)                     as a transmitter by issuing the “ATX2” command or a
(default = 480 ms) is detected, the Si2400 echoes a “K”.          receiver by issuing the “ATX3” command. If tonal
A “k” is echoed if the length of the Kissoff Tone is longer       acknowledgement is not used, the host can toggle the
than the S36(KTL) value. The controller can then send             ESCAPE pin to place the Si2400 in the command mode
the next message. All messages must be preceded by a              and issue an “ATX2” or an “ATX3” command to reverse
“!” and followed by a <CR> and received by the Si2400             data direction.
within 250 msec after the “K” is echoed. Setting              This sequence can be repeated for long messages.
S0C[0] (MCH) = 1b causes a “.” to be echoed when the
                                                              6.5.6. !7
DTMF tone is turned on and a “/” character to be
echoed when the DTMF tone is turned off. This can help        The “!7” mode is a field-configurable tone-on/tone-off
the host monitor the status of the message being sent.        messaging protocol for the alarm industry. There are
The previous message can be resent if the host                many proprietary standards that necessitate a flexible
responds with a “~” after the Si2400 echoes a “K”. Any        alarm protocol. The “!7” command fills that need with
character other than a “!” or a “~” sent to the modem         programmable usage and timing.
immediately after the “K” will cause the modem to             The “!7” mode is entered by issuing the “ATDT<phone
escape to the command mode and remain off-hook. Any           number>!7<message><CR> After the Si2400 connects
character except “!” and “~” sent during the transmission     to the alarm receiver, it waits for a Handshake Tone
of a message will cause the message to be aborted and         (equivalent to an answer tone). When a valid
the modem to return to the command mode.                      Handshake Tone is received a “c” (connect) is echoed
If the Kissoff Tone is not received within 1.25 seconds,      to the host and the message is sent. The Si2400
the modem will echo a “^”. A “~” from the host will cause     echoes a “,” to the host signaling the message is sent,
the last message to be resent. Any character other than       additional messages can be received from the host and
a “!” or a “~” sent to the modem immediately after the “^”    to mark the start of the intermessage time. The end of
will cause the modem to escape to the command mode            the intermessage time is marked by the “N” result code.
and remain off-hook. After hanging up, set SCC = 00 to        The Si2400 monitors for the Kissoff Tone from the alarm
ensure that a subsequent automatic answer (e.g.               receiver which acknowledges receipt of the message.
500 = 01) or Bellcore CID will function normally.             The Si2400 echoes a “K” to indicate the Kissoff Tone
                                                              was received or a “^” to indicate it has not been
6.5.4. A1                                                     received prior to the timeout set by S36[3:2] (IDKT).
Answers a call and follows the “SIA Format” protocol for      Register S36 is reconfigured from SKDTL (Second
Alarm System Communications at 300 bps (see !2).              Kissoff Tone Detector Length) as used in A1 and !1
6.5.5. !2                                                     modes to Alarm 1, a bit-mapped register, in the “!7”
Dial number and follow the “SIA Format” protocol for          mode. Register S1F is reconfigured from ATTD (Answer
Alarm System Communications.                                  Tone to Transmit Delay) to Alarm3, a bit-mapped
The modem dials the phone number and echoes “r”               register, in the “!7” mode. S38(Alarm 2) is a bit-mapped
(ring), “b” (busy), and “c” (connect) as appropriate. “c”     register only used in “!7” mode. The following is a
echoes only after the Si2400 detects the Handshake            summary of commands, result codes and S-Registers
Tone and the speed synchronization signal is sent. The        encountered in the “!7” mode. After hanging up, set
                                                              SCC = 00 to ensure that a subsequent automatic
34                                                       Rev. 1.3


                                                                                                     Si2400
answer (e.g. 500 = 01) or Bellcore CID will function                 time window and present for S38[4:2]
normally.                                                            (HMT) msec
Basic Command                                            N           Handshake Tone not detected per above
ATDT<phone number>!7<tone pulse digits 0-9, B-           Result codes after “c” received
F><CR>
                                                         ,         Message sent—start of intermessage time
Result codes after dialing                               K         Kissoff Tone detected in S36[3:2] (IDKT)
                                                                   time window and present for S38[4:2] (HMT)
t           Dial tone detected                                     msec
,           Phone number dialed—start      of    initial ^         Kissoff Tone not detected per above
            intermessage time                            N         Intermessage timeout defined in S36[3:2]
r           Ringback tone detected                                 (IDKT) elapsed. A second message received
                                                                   after the “,” is sent at this time.
b           Busy tone detected
c           Handshake Tone detected in S39 (CDT)
                                        Table 19. !7 Parameters
  S-Register      Bits       Name                                      Function
     S1F                    Alarm 3 Reconfigured from ATTD in !7 mode.
                  7:5        KOT    Kissoff timeout.
                  4:0         IMT   Intermessage timing.
     S2B          7:0         DTL   Reconfigured from DTL in !7 mode to pulse on time (5/3 ms units).
     S2C          7:0        DTTO   Reconfigured from DTTO in !7 mode to pulse off time (5/3 ms units).
     S2D          7:0         SDL   Reconfigured from SDL in !7 mode to pulse interdigit time (5/3 ms units).
     S2E          7:0        RTCT   Reconfigured from RTLT in !7 mode to handshake end to data TX delay
                                    (10 ms units).
     S36                    Alarm 1 Reconfigured from SKDTL in !7 mode.
                  7:6        POF    Pulse off time.
                  5:4        PON    Pulse on time.
                  3:2        IDKT   Intermessage delay and Kissoff timeout.
                  1:0          IT   Interdigit timing.
     S38                    Alarm 2 Only used in !7 mode.
                   7         DBD    Delay before data.
                  6:5        DCF    Data carrier frequency.
                  4:2        HMT    Handshake minimum tone.
                  1:0          HF   Handshake frequency.
     S39          7:0        CDT    Reconfigured from CDT in !7 mode to handshake tone timeout.
                                                    Rev. 1.3                                                 35


Si2400
6.5.7. Intermessage Timing                                              6.5.8. Returning to Command Mode
Intermessage timing is accomplished in three ways,                      To return to command mode, the host sends any
relative to the end of the previous message (“,” result                 character except the “~” and “!” characters. The
code), relative to the Kissoff Tone (“K” result code) or                example here uses a <CR> to escape.
relative to the Kissoff timeout (“^” result code).                      Once in command mode, all of the AT commands are
If the intermessage timing is relative to the end of the                available.
previous message (S36[3:2] [IDKT] = 10b or 11b), the                    ATH<CR>         Is used to hang up the line. Note that it is
intermessage timer begins with the “,” result code. The                                 the responsibility of the host to hang up the
Si2400 sends an “N” to mark the time in which the                                       line.
intermessage timer has timed out. If another message
                                                                        !7xxx<CR> Sends the message xxx without dialing.
is received prior to the “N”, the Si2400 keeps the
                                                                                        The message is sent as soon as the
message and sends it to the receiver at the time the “N”
                                                                                        Si2400 receives the <CR>. After this
is sent.
                                                                                        message, it is again possible to send
If a message is not received within the time frame                                      subsequent messages using the “~” and “!”
defined by “,” and “N”, the Si2400 sends nothing, waits                                 commands shown above.
for the next message and transmits the message as
                                                                        X1
soon as the host sends the message. This message
may not be accepted by the alarm receiver.                              Search for positive and negative acknowledge tones in
                                                                        SIA half-duplex 300 bps mode. The Si2400 will respond
If the intermessage timing is relative to the end of the
                                                                        with “P” when a positive acknowledge is detected and
Kissoff Tone, the timing begins when the “K” result code
                                                                        “N” when a negative acknowledge is detected.
is sent. In the event a kissoff tone was not detected, the
intermessage timing begins when the “^” is sent.                        X2
                                                                        Return to online mode in SIA half-duplex mode as
                                                                        transmitter.
                                                                        X3
                                                                        Return to online mode in SIA half-duplex mode as
                                                                        receiver.
          S39 (CDT)                                                              S38[4:2] (HMT)
       Before give up on                                                              m in.
          handshake
                                    f = S38[1:0] (HF)
                  Handshake                                                         Kissoff      S36[3:2] (IDKT) = 0Xb Interm essage
                     Tone                                                            Tone
                            S38[7] (DBD)
                                                                                                              From end of Kissoff Tone
                                              f = S38[6:5] (DCF)
                                                                    S36[3:2] (IDKT)
                S38[4:2] (HMT)                                        Before Indicating lack
                                          1st                 Last                                             1st               Last
                     m in.                                            of Kissoff
                                         Digit                Digit                                           Digit              Digit
                                                                                                                    2nd Message
                                                                                 S36[3:2] (IDKT) =
                                                                                        1Xb
                                                                      Interm essage from end of previous
                                                                       m essage to start of next m essage
                                           S36[1:0] (IT) = 0Xb
                                                   Interdigit
                                                                                            Intradigit Tim ing
                                                                                            Pulse On = S36[5:4] (PON)
                                         S36[1:0] (IT) = 1Xb                                Pulse Off = S36[7:6] (POF)
                                               Interdigit                                   Pulse freq = S38[6:5] (DCF)
                                                  Figure 12. !7 Security Timing
36                                                               Rev. 1.3


                                                                                                            Si2400
6.6. Modem Result Codes and Call                           6.6.1. Automatic Call Progress Detection
      Progress                                             The Si2400 has the ability to detect dial, busy and
Table 20 shows the modem result codes which can be         ringback tones automatically. The following is a
used in call progress monitoring. All result codes are a   description of the algorithms that have been
single character to speed up communication and ease        implemented for these three tones.
host processing.                                           1. Dial Tone. The dial tone detector looks for a dial tone after
                                                               going off hook and before dialing is initiated. This can be
                                                               bypassed by enabling blind dialing (set S07[6] (BD) =1b).
          Table 20. Modem Result Codes                         After going off hook, the Si2400 waits the number of
                                                               seconds in S01 (DW) before searching for the dial tone.
  Command       Function                                       In order for a dial tone to be detected, it must be present
                                                               for the length of time programmed in S1C (DTT). Once the
       a        British Telecom Caller ID Idle Tone            dial tone is detected, dialing will commence. If a dial tone
                Alert Detected                                 is not detected within the time programmed in S02 (CW),
       b        Busy Tone Detected                             the Si2400 will hangup and echo an “N” to the user.
                                                           2. Busy / Ringback Tone. After dialing has completed, the
       c        Connect
                                                               Si2400 monitors for Busy/Ringback and modem answer
       d        Connect 1200 bps (when pro-                    tones. The busy and ringback tone detectors both use the
                grammed as V.22bis modem)                      call progress energy detector. The registers that set the
                                                               cadence for busy and ringback are listed in Table 21.
       f        Hookswitch Flash or Battery Reversal
                Detected                                       Si2400 register settings for global cadences for busy and
                                                               ringback tones are listed in Table 22.
       H        Modem Automatically Hanging Up in
                Japan Caller ID Mode                              Table 21. Busy and Ringback Cadence
       I        Intrusion Completed (parallel phone                                   Registers
                back on hook)
                                                             Register       Name              Function              Units
       i        Intrusion Detected (parallel phone off-
                                                                S16         BTON          Busy tone on time 10 msec
                hook on the line)
                                                                S17          BTOF         Busy tone off time 10 msec
       K        Kissoff Tone Detected                           S18         BTOD        Busy tone delta time 10 msec
       k        Contact ID Kissoff Tone too long.               S19         RTON          Ringback tone on         53.333
       L        Phone Line Detected                                                               time              msec
       l        No Phone Line Detected                          S1A          RTOF         Ringback tone off        53.333
                                                                                                  time              msec
       m        Caller ID Mark Signal Detected
                                                                S1B         RTOD         Ringback tone delta 53.333
       N        No Carrier Detected                                                               time              msec
       n        No Dial tone (time-out set by CW
                [S02])                                     6.6.2. Manual Call Progress Detection
       O        Modem OK Response                          Because other call progress tones beyond those
                                                           described above may exist, the Si2400 supports manual
       R        Incoming Ring Signal Detected              call progress. This requires the host to read and write
       r        Ringback Tone Detected                     the low-level DSP registers and may require realtime
       t        Dial Tone                                  control by the host. Manual call progress may be
                                                           required for detection of application-specific ringback,
       v        Connect 75 bps TX (V.23 originate          dial tone, and busy signals. The section on DSP low
                only)                                      level control should be read before attempting manual
       x        Overcurrent State Detected After an        call progress detection.
                Off-Hook Event                             To use this mode, the automatic modem responses
       ^        Kissoff tone detection required            should be disabled by setting S14[7] (MRCD) = 1b. The
       ,        Dialing Complete                           call progress biquad filters can be programmed to have
                                                           a custom frequency response and detection level (as
                                                           described in “Low Level DSP Control”).
                                                           Four dedicated user-defined frequency detectors can
                                                      Rev. 1.3                                                            37


Si2400
be programmed to search for individual tones. The four   By issuing the “ATDT;” command, the modem will go off
detectors have center frequencies which can be set by    hook and return to command mode. The user can then
registers UDFD1–4 (see Table 24). (SE5[6] [TDET]         put the DSP into call progress monitoring by first setting
[SE8 = 0x02] Read Only Definition) can be monitored,     SE8 = 0x02. Next, set SE5 (DSP2) = 0x00 so no tones
along with TONE, to detect energy at these user-         are transmitted, and set SE6 (DSP3) to the appropriate
defined frequencies. The default trip-threshold for      code, depending on which types of tones are to be
UDFD1–4 is –34 dBm but can be modified with the DSP      detected.
register UDFSL.
                      Table 22. Si2400 Global Ringer and Busy Tone Cadence Settings
                  Country                 RTON        RTOF         RTOD        BTON       BTOF           BTOD
                                           S19         S1A          S1B          S16       S17            S18
                  Australia               0x07         0x03        0x01         0x25       0x25          0x04
                   Austria                0x12         0x5D        0x0A         0x1E       0x1E          0x03
                  Belgium                 0x12         0x38        0x06         0x32       0x32          0x05
                    Brazil                0x12         0x4B        0x08         0x19       0x19          0x03
                  Bulgaria                0x12         0x4B        0x08         0x14       0x32          0x05
                    China                 0x12         0x4B        0x08         0x23       0x23          0x04
                   Cyprus                 0x1C         0x38        0x06         0x32       0x32          0x05
             Czech Republic               0x12         0x4B        0x08         0x18       0x24          0x0A
                 Denmark                  0x0E         0x8C        0x0F         0x19       0x19          0x03
                  Finland                 0x0E         0x5D        0x0A         0x1E       0x1E          0x03
                   France                 0x1C         0x41        0x07         0x32       0x32          0x05
                 Germany                  0x12         0x4B        0x08         0x32       0x32          0x05
               Great Britain              0x07         0x03        0x01         0x25       0x25          0x04
                  Greece                  0x12         0x4B        0x08         0x1E       0x1E          0x03
         Hong Kong, New Zealand           0x07         0x03        0x01         0x32       0x32          0x05
                  Hungary                 0x17         0x46        0x0F         0x1E       0x1E          0x03
                  Iceland                 0x16         0x58        0x09         0x19       0x19          0x03
                    India                 0x07         0x03        0x01         0x4B       0x4B          0x08
                   Ireland                0x07         0x03        0x01         0x32       0x32          0x05
  Italy, Netherlands, Norway, Thailand,   0x12         0x4B        0x08         0x32       0x32          0x05
            Switzerland, Israel
               Japan, Korea               0x12         0x25        0x04         0x32       0x32          0x05
               Luxembourg                 0x12         0x4B        0x08         0x30       0x30          0x05
                 Malaysia                 0x07         0x03        0x01         0x23       0x41          0x07
                    Malta                 0x00         0x00        0x00         0x00       0x00          0x00
                   Mexico                 0x12         0x4B        0x08         0x19       0x19          0x03
                   Poland                 0x12         0x4B        0x10         0x32       0x32          0x05
                  Portugal                0x12         0x5D        0x0A         0x32       0x32          0x05
                 Singapore                0x07         0x03        0x01         0x4B       0x4B          0x08
                    Spain                 0x1C         0x38        0x06         0x14       0x14          0x02
                  Sweden                  0x12         0x5D        0x0A         0x19       0x19          0x03
                   Taiwan                 0x12         0x25        0x04         0x32       0x32          0x05
          U.S., Canada (default)          0x25         0x4B        0x08         0x32       0x32          0x05
38                                                  Rev. 1.3


                                                                                          Si2400
At this point, users may program their own algorithm to
monitor the detected tones. If the host wishes to dial, it
should do so by blind dialing, setting the dial timeout                    Table 23. DTMF
S01 (DW)       to   0   seconds,     and     issuing    an
“ATDT<Phone Number><CR>;” command. This will                                      Contact   Tones
                                                               DTMF  Keyboard        ID
immediately dial and return to command mode.                    Code Equivalent
                                                                                   Digit  Low   High
Once the host has detected an answer tone using
manual call progress, the host should immediately
execute the “ATDT” command in order to make a                     0      0            0   941   1336
connection. This will cause the Si2400 to search for the
modem answer tone and begin the correct connect                   1      1            1   697   1209
sequence.
                                                                  2      2            2   697   1336
In manual call progress, the DSP can be programmed
to detect specific tones. The result of the detection is
                                                                  3      3            3   697   1477
reported into SE5 (SE8 = 0x2) as explained above. The
output is priority encoded such that if multiple tones are
                                                                  4      4            4   770   1209
detected, the one with the highest priority whose
detection is also enabled is reported (see SE5 [SE8=02]
                                                                  5      5            5   770   1336
Read Only.)
In manual call progress, the DSP can be programmed                6      6            6   770   1477
to generate specific tones (see SE5[2:0] (TONC)
(SE8 = 02) Write Only). For example, setting                      7      7            7   852   1209
SE5[2:0] (TONC) = 110b will generate the user-defined
tone as indicated by UFRQ in Table 24 with an                     8      8            8   852   1336
amplitude of TGNL.
Table 23 shows the mappings of Si2400 DTMF values,                9      9            9   852   1477
keyboard equivalents, and the related dual tones.
                                                                 10      D            –   941   1633
                                                                 11      *            B   941   1209
                                                                 12      #            C   941   1477
                                                                 13      A            D   697   1633
                                                                 14      B            E   770   1633
                                                                 15      C            F   852   1633
                                                        Rev. 1.3                                     39


Si2400
7. Low Level DSP Control                                    with the low bits [7:0] of the DSP register address and
                                                            SE6 (DADH) is written with the high bits [15:8] of the
Although not necessary for most applications, the DSP       DSP address. When SE8 = 0x01, SE5 (DDL) is written
low-level control functions are available for users with    with the low bits [7:0] of the DSP data word
very specific applications requiring direct DSP control.    corresponding to the previously written address and
                                                            SE6 (DDH) is written with the high bits [15:8] of the data
7.1. DSP Registers                                          word corresponding to the previously written address.
Several DSP registers are accessible through the            Example 1 below illustrates the proper procedure for
Si2400 microcontroller via S-registers SE5, SE6, SE7        writing to DSP registers.
and SE8. SE5 and SE6 are used as conduits to write          Example1: The user would like to program call
data to specific DSP registers and read status. SE8         progress filter coefficient A2_k0 (0x15) to be 309
defines the function of SE5 and SE6 depending on            (0x135).
whether they are being written to or read from. Care
                                                            Host                                            Command:
must be exercised when writing to DSP registers. DSP        ATSE8=00SE6=00SE5=15SE8=01SE6=01SE5=35SE8=00
registers can only be written while the Si2400 is on-
                                                            In the command above, ATSE8=00 sets up registers
hook and in the Command mode. Writing to any register
                                                            SE5 and SE6 as DSP address registers. SE6=00 sets
address not listed in Tables 24 and 25 or writing out-of-
                                                            the high bits of the address, and SE5=15 sets the low
range values is likely to cause the DSP to exhibit
                                                            bits. SE8=01 sets up registers SE5 and SE6 as DSP
unpredictable behavior.
                                                            data registers for the previously written DSP address
The DSP register address is 16-bits wide and the DSP        (0x15). SE6=01 sets the high 6 bits of the 14-bit data
data field is 14-bits wide. DSP register addresses and      word, and SE5=35 sets the low 8 bits of the 14-bit data
data are written in hexadecimal. To write a value to a      word.
DSP register, the register address is written then the
data is written. When SE8 = 0x00, SE5(DADL) is written
                                     Table 24. Low-Level DSP Parameters
                     Name                     Description                               Function              Default
 DSP Reg. Addr.
                                                                                                                (dec)
     0x0002          XMTL DAA modem full scale transmit level,              Level = 20log10 (XTML/4096)         4096
                             default = –10 dBm                              –10 dBm
     0x0003          DTML DTMF high tone transmit level,                    Level = 20log10 (DTML/4868)         4868
                             default = –5.5 dBm                             –5.5 dBm
     0x0004          DTMT DTMF twist ratio (low/high), default = –2 dBm Level = 20log10 (DTMT/3277) –           3277
                                                                            2 dB
     0x0005          UFRQ User-defined transmit tone frequency. See         f = (9600/512) UFRQ (Hz)              91
                             register SE5 (SE8=0x02 (Write Only))
     0x0006          CPDL Call progress detect level (see Figure 13),       Level = 20log10 (4096/CPDL)         4096
                             default = –43 dBm                              –43 dBm
     0x0007         UDFD1 User-defined frequency detector 1. Center         UDFD1 = 8192 cos (2π f/9600)        4987
                             frequency for detector 1.
     0x0008         UDFD2 User-defined frequency detector 2. Center         UDFD2 = 8192 cos (2π f/9600)         536
                             frequency for detector 2.
     0x0009         UDFD3 User-defined frequency detector 3. Center         UDFD3 = 8192 cos (2π f/9600)        4987
                             frequency for detector 3.
     0x000A         UDFD4 User-defined frequency detector 4. Center         UDFD4 = 8192 cos (2π f/9600)         536
                             frequency for detector 4.
     0x000B          TGNL Tone generation level associated with TONC Level = 20log10 (TGNL/2896)                2896
                             (SE5 (SE8 = 0x02) Write Only Definition),      – 10 dBm
                             default = –10 dBm
40                                                     Rev. 1.3


                                                                                                  Si2400
                             Table 24. Low-Level DSP Parameters (Continued)
                   Name                       Description                           Function              Default
DSP Reg. Addr.
                                                                                                           (dec)
     0x000E        UDFSL Sensitivity setting for UDFD1–4 detectors,     Sensitivity = 10log10(UDFSL/       4096
                            default = –43 dBm                           4096) – 43 dBm
     0x0024        CONL Carrier ON level. Carrier is valid once it      Level = 20log10(2620/CONL) –       2620
                            reaches this level.                         43 dBm
     0x0025        COFL Carrier OFF level. Carrier is invalid once it   Level = 20log10(3300/COFL) –       3300
                            falls below this level.                     45.5 dBm
     0x0026        AONL Answer ON level. Answer tone is valid once it Level = 10log10(AONL/107) –           67
                            reaches this level.                         43 dBm
     0x0027        AOFL     Answer OFF level. Answer tone is invalid    Level = 10log10(AOFL/58) –          37
                            once it fall below this level.              45.5 dBm
Table 25 defines the relationship between SE5, SE6, and SE8.
                                  Table 25. SE5, SE6, and SE8 Relationship
   SE8                                    SE6                                          SE5
           R/W      Name                    Description              Name                Description
   0x00      W      DADH       DSP register address bits [15:8]      DADL    DSP register address bits [7:0]
   0x01      W       DDH       DSP register data bits [15:8]          DDL    DSP register data bits [7:0]
   0x02      R                                                       DSP1    7 = DSP data available.
                                                                             6 = Tone detected.
                                                                             5 = Reserved.
                                                                             4:0 = Tone type.
   0x02      W      DSP3       7 = Enable squaring function.         DSP2    7 = Reserved.
                               6 = Call progress cascade disable.            6:3 = DTMF tone to transmit.
                               5 = Reserved.                                 2:0 = Tone type.
                               4 = User tone 3 and 4 reporting.
                               3 = User tone 1 and 2 reporting.
                               2 = V.23 tone reporting.
                               1 = Answer tone reporting.
                               0 = DTMF tone reporting.
                                                        Rev. 1.3                                               41


Si2400
7.2. Call Progress Filters
The programmable call progress filter coefficients are               Table 26. Call Progress Filters
located in DSP address locations 0x0010 through               DSP Register
0x0023. There are two independent 4th order filters A                           Coefficient         Default (dec)
                                                                Address
and B, each consisting of two biquads, for a total of 20
coefficients. Coefficients are 14 bits (–8192 to 8191)           0x0010             A1_k0               256
and are interpreted as, for example, b0 = value/4096,            0x0011             A1_b1              –8184
thus giving a floating point value of approximately –2.0         0x0012             A1_b2               4096
to 2.0. Output of each biquad is calculated as                   0x0013             A1_a1               7737
                                                                 0x0014             A1_a2              –3801
w[n] = k0 x[n] + a1 w[n – 1] + a2 w[n – 2]
            z         z                 z
                                                                 0x0015             A2_k0               1236
y[n] = w[n] + b1 w[n – 1] + b2 w[n – 2].
                   z               z
                                                                 0x0016             A2_b1                133
                                                                 0x0017             A2_b2               4096
The output of the filters is input to an energy detector
and then compared to a fixed threshold with hysteresis           0x0018             A2_a1               7109
(DSP register CPDL). Defaults shown are a bandpass               0x0019             A2_a2              –3565
filter from 290–630 Hz (–3 dB). These registers are              0x001A             B1_k0                256
located in the DSP and thus must be written in the same          0x001B             B1_b1              –8184
manner described in “DSP Registers”.                            0x001C              B1_b2               4096
The filters may be configured in either parallel or             0x001D              B1_a1               7737
cascade through SE6[6] (CPCD) with SE8 = 0x02, and               0x001E             B1_a2              –3801
the output of filter B may be squared by selecting
                                                                 0x001F             B2_k0               1236
SE6[7] (CPSQ) = 1b. Figure 13 shows a block diagram
of the call progress filter structure.                           0x0020             B2_b1                133
                                                                 0x0021             B2_b2               4096
                                                                 0x0022             B2_a1               7109
                                                                 0x0023             B2_a2              –3565
                                                          0
                                                               CPCD
                                                                1
       Filter Input                            Energy
                         Filter B                               0
                                               Detect
                           1     y = x2
                                                                        B                         A
                                                                             Max
                                                                                       Hysteresis
                           0                                                (A,B)
                                                                        A                         B A > B? TDET
  CPCD        1   0
                         CPSQ
                                               Energy
                         Filter A
                                               Detect
                                                                          20log 10 (4096/CPDL) –34 dBm
                          Figure 13. Programmable Call Progress Filter Architecture
42                                                    Rev. 1.3


                                                                                                                Si2400
8. S Registers
Any register not documented here is reserved and should not be written. Bold selection in bit-mapped registers
indicate default values.
                                              Table 27. S-Register Summary
     “S”       Register        Name       Function                                                                    Reset
  Register     Address
                 (hex)
     S00          0x00           NR       Number of rings before answer; 0 suppresses auto answer.                    0x00
     S01          0x01           DW       Number of seconds modem waits before dialing after going                    0x03
                                          off-hook (maximum of 109 seconds).
     S02          0x02           CW       Number of seconds modem waits for a dial tone before hang-up                0x14
                                          added to time specified by DW (maximum of 109 seconds).
     S03          0x03          CLW       Duration that the modem waits (53.33 ms units) after loss of car-           0x0E
                                          rier before hanging up.
     S04          0x04           TD       Both duration and spacing (5/3 ms units) of DTMF dialed tones.              0x30
     S05          0x05        OFFPD       Duration of off-hook time (5/3 ms units) for pulse dialing.                 0x18
     S06          0x06         ONPD       Duration of on-hook time (5/3 ms units) for pulse dialing.                  0x24
                                                                              1
     S07          0x07          MF1       This is a bit mapped register.                                              0x01
                                                                                    2
     S08          0x08         MNRP       Minimum ring period (5/3 ms units).                                         0x0A
                                                                                     2
     S09          0x09         MXRP       Maximum ring period (5/3 ms units).                                         0x28
                                                                                  2
     S0A         0x0A           ROT       Ringer off time (53.333 ms units).                                          0x4B
                                                                                       2
     S0B         0x0B          MNRO       Minimum ringer off time (10 ms units).                                      0x08
                                                                              1
     S0C         0x0C           MF2       This is a bit mapped register.                                              0x00
                                                                                                  2
     S0D         0x0D           RPE       Ringer off time allowed error (53.333 ms units).                            0x16
     S0E         0x0E            DIT      Pulse dialing Interdigit time (10 ms units added to a minimum               0x46
                                          time of 64 ms).
     S0F          0x0F          TEC       TIES escape character. Default = +.                                         0x2B
     S10          0x10          TDT       TIES delay time (256 5/3 ms units).
                                                                     z
                                                                                                                      0x07
                                                                              1
     S11          0x11          ONHI      This is a bit mapped register.                                              0x48
                                                                              1
     S12          0x12          OFHI      This is a bit mapped register.                                              0x40
                                                                              1
     S13          0x13          MF3       This is a bit mapped register.                                              0x10
                                                                              1
     S14          0x14          MF4       This is a bit mapped register.                                              0x00
                                                                              1
     S15          0x15          MLC       This is a bit mapped register.                                              0x84
     S16          0x16         BTON       Busy tone on. Time that the busy tone must be on (10 ms units)              0x32
                                          for busy tone detector.
 Notes:
     1. These registers are explained in detail in the following section.
     2. The ring detector will only detect ringing if the ring burst on/off times meet the settings in MNRP, MXRP, MNRU, ROT,
        and REP.
                                                               Rev. 1.3                                                     43


Si2400
                                   Table 27. S-Register Summary (Continued)
    “S”       Register        Name       Function                                                                    Reset
  Register    Address
                (hex)
    S17          0x17         BTOF       Busy tone off. Time that the busy tone must be off (10 ms units)            0x32
                                         for busy tone detector.
    S18          0x18         BTOD       Busy tone delta. Detector Time Delta (10 ms). A busy tone is                0x0F
                                         detected to be valid if (BTON – BTOD < on time < BTON +
                                         BTOD) and (BTOF – BTOD < off time < BTOF + BTOD).
    S19          0x19         RTON       Ringback tone on. Time that the ringback tone must be on                    0x26
                                         (53.333 ms units) for ringback tone detector.
    S1A          0x1A         RTOF       Ringback tone off. Time that the ringback tone must be off                  0x4B
                                         (53.333 ms units) for ringback tone detector.
    S1B          0x1B         RTOD       Detector time delta (53.333 ms units). A ringback tone is deter-            0x07
                                         mined to be valid if (RTON – RTOD < on time < RTON + RTOD)
                                         and (RTOF – RTOD < off time < RTOF + RTOD).
    S1C          0x1C          DTT       Dial tone detect time. The time that the dial tone must be valid            0x0A
                                         before being detected
                                         (10 ms units).
    S1D          0x1D        DTMFD DTMF detect time. The time that a DTMF tone must be valid                         0x03
                                         before being detected (10 ms units).
    S1E          0x1E          TATL      Transmit answer tone length. Answer tone length in seconds                  0x03
                                         when answering a call (1 second units).
    S1F          0x1F         ATTD       Answer tone to transmit delay. Delay between answer tone end                0x2D
                                         and transmit data start (5/3 ms units). In the !7 mode, this is a bit-
                                         mapped register.
    S20          0x20          UNL       Unscrambled ones length. Minimum length of time required for                0x5D
                                         detection of unscrambled binary ones during V.22 handshaking
                                         by a calling modem (5/3 ms units).
    S21          0x21         TSOD       Transmit scrambled ones delay. Time between unscrambled                     0x09
                                         binary one detection and scrambled binary one transmission by
                                         a call mode V.22 modem (53.3 ms units).
    S22          0x22         TSOL       Transmit scrambled ones length. Length of time scrambled ones               0xA2
                                         are sent by a call mode V.22 modem (5/3 ms units).
    S23          0x23         VDDL       V.22 data delay low. Delay between handshake complete and                   0xCB
                                         data connection for a V.22 call mode modem (5/3 ms units added
                                         to the time specified by VDDH).
    S24          0x24         VDDH       V.22 data delay high. Delay between handshake complete and                  0x08
                                         data connection for a V.22 call mode modem (256 5/3 ms unitsz
                                         added to the time specified by VDDL).
    S25          0x25          SPTL      S1 pattern time length. Amount of time the unscrambled S1 pat-              0x3C
                                         tern is sent by a call mode V.22bis modem (5/3 ms units).
 Notes:
    1. These registers are explained in detail in the following section.
    2. The ring detector will only detect ringing if the ring burst on/off times meet the settings in MNRP, MXRP, MNRU, ROT,
        and REP.
44                                                             Rev. 1.3


                                                                                                              Si2400
                                  Table 27. S-Register Summary (Continued)
   “S”       Register        Name       Function                                                                    Reset
 Register    Address
               (hex)
   S26          0x26         VTSO       V.22bis 1200 bps scrambled ones length. Minimum length of                   0x0C
                                        time for transmission of 1200 bps scrambled binary ones by a
                                        call mode V.22bis modem after the end of pattern S1 detection
                                        (53.3 ms).
   S27          0x27        VTSOL       V.22bis 2400 bps scrambled ones length low. Minimum length of               0x78
                                        time for transmission of 2400 bps scrambled binary ones by a
                                        call mode V.22bis modem (5/3 ms units).
   S28          0x28        VTSOH       V.22bis 2400 bps scrambled ones length high. Minimum length                 0x08
                                        of time for transmission of 2400 bps scrambled binary ones by a
                                        call mode V.22bis modem (256 5/3 ms units added to the time
                                                                               z
                                        specified by VTSOL).
   S29          0x29           IS       Intrusion suspend. When S82[2:1] (IB) = 10b, this register sets             0x00
                                        the length of time from when dialing begins that the off-hook
                                        intrusion algorithm is blocked (suspended) (500 ms units).
   S2A          0x2A          RSO       Receive scrambled ones V.22bis (2400 bps) length.                           0xD2
                                        Minimum length of time required for detection of scrambled
                                        binary ones during V.22bis handshaking by the answering
                                        modem after S1 pattern conclusion (5/3 ms units).
   S2B          0x2B          DTL       V.23 direct turnaround carrier length. Minimum length of time that          0x18
                                        a master mode V.23 modem must detect carrier when searching
                                        for a direct turnaround sequence (5/3 ms units). In the !7 alarm
                                        mode, this register functions as pulse on time.
   S2C          0x2C         DTTO       V.23 direct turnaround timeout. Length of time that the modem               0x08
                                        searches for a direct turnaround carrier (5/3 ms units added to a
                                        minimum time of 426.66 ms). In the !7 alarm mode, this register
                                        functions as pulse off time.
   S2D          0x2D          SDL       V.23 slave carrier detect loss. Minimum length of time that a               0x0C
                                        slave mode V.23 modem must lose carrier before searching
                                        for a reverse turnaround sequence (5/3 ms units). In the !7
                                        alarm mode, this register functions as pulse interdigit time
                                        (10 ms units).
   S2E          0x2E         RTCT       V.23 reverse turnaround carrier timeout. Amount of time a slave             0x84
                                        mode V.23 modem will search for carriers during potential
                                        reverse turnaround sequences (5/3 ms units). In the !7 alarm
                                        mode, this register functions as Handshake End to TX Data
                                        delay (10 ms units).
   S2F          0x2F          FCD       FSK connection delay low. Amount of time delay added                        0x3C
                                        between end of answer tone handshake and actual modem
                                        connection for FSK modem connections (5/3 ms units).
Notes:
   1. These registers are explained in detail in the following section.
   2. The ring detector will only detect ringing if the ring burst on/off times meet the settings in MNRP, MXRP, MNRU, ROT,
       and REP.
                                                             Rev. 1.3                                                     45


Si2400
                                   Table 27. S-Register Summary (Continued)
    “S”       Register        Name       Function                                                                    Reset
  Register    Address
                (hex)
    S30          0x30         FCDH       FSK connection delay high. Amount of time delay added                       0x00
                                         between end of answer tone handshake and actual modem con-
                                         nection for FSK modem connections (256 5/3 ms units).
                                                                                           z
    S31          0x31          RATL      Receive answer tone length. Minimum length of time required                 0x3C
                                         for detection of a CCITT answer tone (5/3 ms units).
    S32          0x32         OCDT       The time after going off hook when the loop current sense bits              0x0C
                                         are checked for overcurrent status (5/3 ms units).
    S33          0x33         MDMO       This is a bit mapped register.1                                             0x80
    S34          0x34          TASL      Answer tone length when answering a call (5/3 ms units). This               0x5A
                                         register is only used if TATL (1E) has a value of zero.
    S35          0x35         RSOL       Receive scrambled ones V.22 length (5/3 ms units). Minimum                  0xA2
                                         length of time that an originating V.22 (1200 bps) modem must
                                         detect 1200 bps scrambled ones during a V.22 handshake.
    S36          0x36         SKDTL      Second kissoff tone detector length. The security modes A1 and              0x30
                                         !1 will echo a “k” if a kissoff tone longer than the value stored in
                                         SKDTL is detected (10 ms units.) In the !7 security mode, this
                                         register represents a bit-mapped register.
    S37          0x37          CDR       Carrier detect return. Minimum length of time that a carrier must           0x20
                                         return and be detected in order to be recognized after a carrier
                                         loss is detected
                                         (5/3 ms units).
    S38          0x38         ARM2       This is a bit-mapped register.1                                             0x38
    S39          0x39          CDT       Carrier detect timeout. Amount of time modem will wait for carrier          0x3C
                                         detect before aborting call (1 second units). In the !7 alarm
                                         mode, this register functions as Handshake Tone Timeout, which
                                         defines how long the Si2400 waits for a handshake prior to send-
                                         ing the “N” result code.
    S3A          0x3A           ATD      Delay between going off-hook and answer tone generation when                0x29
                                         in answer mode (53.33 ms units).
    S3B          0x3B           RP       Minimum number of consecutive ring pulses per ring burst.                   0x03
    S3C          0x3C          CIDG      This is a bit mapped      register.1                                        0x04
                                                                             1
    S62          0x62           RC       This is a bit mapped register.                                              0x00
                                                                             1
    S82          0x82           IST      This is a bit mapped register.                                              0x00
    S83          0x83          DCID      DTMF caller ID initialization.                                               —
    SD1          0xD1          INTS      Intrusion state.                                                            0x00
    SDB         0xDB           LVCS      Loop voltage (on-hook)/loop current (off-hook) register                     0x00
 Notes:
    1. These registers are explained in detail in the following section.
    2. The ring detector will only detect ringing if the ring burst on/off times meet the settings in MNRP, MXRP, MNRU, ROT,
        and REP.
46                                                             Rev. 1.3


                                                                                                              Si2400
                                  Table 27. S-Register Summary (Continued)
   “S”       Register        Name       Function                                                                    Reset
 Register    Address
               (hex)
   SDF          0xDF         DGSR       This is a bit mapped register.1                                             0x00
   SE0          0xE0          CF1       This is a bit mapped      register.1                                        0x22
   SE1          0xE1          CLK1      This is a bit mapped      register.1                                        0x07
   SE2          0xE2          GPIO      This is a bit mapped      register.1                                        0x00
   SE3          0xE3          GPD       This is a bit mapped      register.1                                        0x00
   SE4          0xE4          CF5       This is a bit mapped      register.1                                        0x00
   SE5          0xE5         DADL       (SE8 = 0x00) Write only definition. DSP register address lower              0x00
                                        bits [7:0].1
   SE5          0xE5          DDL       (SE8 = 0x01) Write only definition. DSP data word lower bits                0x00
                                        [7:0].1
   SE5          0xE5         DSP1       (SE8 = 0x02) Read only definition. This is a bit mapped register.1          0x00
                                                                                                                1
   SE5          0xE5         DSP2       (SE8 = 0x02) Write only definition. This is a bit mapped register.          0x00
   SE6          0xE6         DADH       (SE8 = 0x00) Write only definition. DSP register address upper              0x00
                                        bits [15:8]
   SE6          0xE6          DDH       (SE8 = 0x01) Write only definition. DSP data word upper bits                0x00
                                        [13:8]
   SE6          0xE6         DSP3       (SE8 = 0x02) Write only definition. This is a bit mapped register.1         0x00
   SE8          0xE8        DSPR4       Set the mode to define E5 and E6 for low level DSP control.                 0x00
                                                                            1
   SEB         0xEB           TPD       This is a bit mapped register.                                              0x00
                                                                            1
   SF0          0xF0         DAA0       This is a bit mapped register.                                              0x00
                                                                            1
   SF1          0xF1         DAA1       This is a bit mapped register.                                              0x1C
                                                                            1
   SF2          0xF2         DAA2       This is a bit mapped register.                                              0x00
   SF4          0xF4         DAA4       This is a bit mapped      register.1                                        0x0F
   SF5          0xF5         DAA5       This is a bit mapped      register.1                                        0x08
   SF6          0xF6         DAA6       This is a bit mapped      register.1                                        0x00
   SF7          0xF7         DAA7       This is a bit mapped      register.1                                        0x10
   SF8          0xF8         DAA8       This is a bit mapped      register.1                                         —
   SF9          0xF9         DAA9       This is a bit mapped      register.1                                        0x20
Notes:
   1. These registers are explained in detail in the following section.
   2. The ring detector will only detect ringing if the ring burst on/off times meet the settings in MNRP, MXRP, MNRU, ROT,
       and REP.
                                                             Rev. 1.3                                                     47


Si2400
                            Table 28. Bit Mapped Register Summary
   “S”    Register Register   Bit 7   Bit 6     Bit 5    Bit 4   Bit 3    Bit 2     Bit 1    Bit 0  Default
 Register Address Name                                                                               Binary
           (hex)
   S07     0x07      MF1     HDEN       BD      V23R      V23T            BAUD      CCITT     FSK  0000_0001
   S0C     0x0C      MF2      CDE         CIDM[1:0]               9BF      BDL       MLB      MCH  0000_0000
   S11     0x11     ONHI            DVL[2:0]                             AVL[4:0]                  0100_1000
   S12     0x12     OFHI            DCL[2:0]                             ACL[4:0]                  0100_0000
   S13     0x13      MF3       JID     BTID     OFHE     OFHD    ONHD     CIDB      CIDU      PCM  0001_0000
   S14     0x14      MF4     MRCD      UDF       TEO      AOC     OD       NLD       IND       RD  0000_0000
   S15     0x15      MLC     ATPRE    VCTE      FHGE     ENGE     STB        BDA[2:1]         NBE  1000_0100
   S1F     0x1F     ARM3            KOT[2:0]                             IMT[4:0]                  0010_1101
   S33     0x33     MDMO               DON       DOF                                 NAT     TSAC  1000_0000
   S36     0x36     ARM1         POF[1:0]           PON[1:0]       IDKT[1:0]            IT[1:0]    0011_0000
   S38     0x38     ARM2      DBD         DCF[1:0]              HMT[2:0]                HF[1:0]    0011_1000
   S3C     0x3C     CIDG                                                          CIDG[2:0]        0000_0100
   S62     0x62      RC       CLD      OCR       LLC     WOR      FLS       IR       NLR       RR  0000_0000
   S82     0x82      IST                  IST[3:0]               LCLD          IB[1:0]             0000_0000
   SDF     0xDF     DGSR                                       DGSR[6:0]                           0000_0000
   SE0     0xE0      CF1                        ICTS              ND               SD[2:0]         0010_0010
   SE1     0xE1     CLK1        MCKR[1:0]                              CLKD[4:0]                   0000_0111
   SE2     0xE2     GPIO        GPIO4[1:0]         GPIO3[1:0]      GPIO2[1:0]          GPIO1[1:0]  0000_0000
   SE3     0xE3      GPD        AING[1:0]                        GPD4     GPD3      GPD2     GPD1  0000_0000
   SE4     0xE4      CF5     NBCK     SBCK          DRT[1:0]      GPE                APO     TRSP  0000_0000
   SE5     0xE5     DADL                                                                           0000_0000
   SE5     0xE5      DDL                                                                           0000_0000
   SE5     0xE5     DSP1     DDAV     TDET                             TONE[4:0]                   0000_0000
   SE5     0xE5     DSP2                            DTM[3:0]                      TONC[2:0]        0000_0000
   SE6     0xE6     DADH                                                                           0000_0000
   SE6     0xE6      DDH                                                                           0000_0000
   SE6     0xE6     DSP3     CPSQ     CPCD              USEN2 USEN1       V23E      ANSE    DTMFE 0000_0000
48                                                Rev. 1.3


                                                                                      Si2400
                    Table 28. Bit Mapped Register Summary (Continued)
  “S”    Register Register  Bit 7   Bit 6   Bit 5    Bit 4 Bit 3   Bit 2 Bit 1   Bit 0  Default
Register Address Name                                                                    Binary
          (hex)
  SEB     0xEB      TPD                                    PDDE                        0000_0000
  SF0     0xF0     DAA0                                                   LM     OFHK  0000_0000
  SF1     0xF1     DAA1     BTE     PDN     PDL                     HBE                0001_1100
  SF2     0xF2     DAA2                                     FDT                        0000_0000
  SF4     0xF4     DAA4    SQLH           ARG[2:0]            ARL[1:0]      ATL[1:0]   0000_1111
  SF5     0xF5     DAA5     FULL   DCTO     OHS       ACT     DCT[1:0]    RZ       RT  0000_1000
  SF6     0xF6     DAA6                                     FJM    DIAL  VOL     FLVM  0000_0000
  SF7     0xF7     DAA7                              LMO    LIM                        0001_0000
  SF8     0xF8     DAA8               LRV[3:0]                                             —
  SF9     0xF9     DAA9             OVL                     BTD          ROV           0010_0000
                                             Rev. 1.3                                           49


Si2400
 S07 (MF1). Modem Functions 1
   Bit      D7       D6       D5         D4           D3        D2       D1      D0
  Name    HDEN       BD      V23R       V23T                  BAUD      CCITT   FSK
  Type     R/W      R/W      R/W        R/W                    R/W       R/W    R/W
Reset settings = 0000_0001b (0x01)
  Bit       Name                                                     Function
   7        HDEN          HDLC Framing.
                          0 = Disable.
                          1 = Enable.
   6          BD          Blind Dialing.
                          0 = Disable.
                          1 = Enable (Blind dialing occurs immediately after “ATDT#” command).
   5         V23R         V.23 Receive.*
                          V.23 75 bps send/600 (BAUD = 0) or 1200 (BAUD = 1) bps receive.
                          0 = Disable.
                          1 = Enable.
   4         V23T         V.23 Transmit.*
                          V.23 600 (BAUD = 0) or 1200 (BAUD = 1) bps send/75 bps receive.
                          0 = Disable.
                          1 = Enable.
   3       Reserved       Read returns zero.
   2        BAUD          2400/1200 Baud Select.*
                          2400/1200 baud select (V23R = 0 and V23T = 0).
                          0 = 1200
                          1 = 2400
                          600/1200 baud select (V23R = 1 and V23T = 1).
                          0 = 600
                          1 = 1200
   1        CCITT         CCITT/Bell Mode.*
                          0 = Bell.
                          1 = CCITT.
   0         FSK          300 bps FSK.*
                          0 = Disable.
                          1 = Enable.
 *Note: See Table 12 on page 15 for proper setting of modem protocols.
50                                                       Rev. 1.3


                                                                                                    Si2400
S0C (MF2). Modem Functions 2
  Bit       D7       D6       D5         D4          D3       D2       D1        D0
 Name      CDE          CIDM                        9BF      BDL      MLB       MCH
 Type      R/W           R/W                        R/W      R/W      R/W       R/W
Reset settings = 0000_0000b (0x00)
 Bit        Name                                                   Function
  7          CDE        Carrier Detect Enable.
                        0 = Disable.
                        1 = Enable GPI02 as an active low carrier detect pin (must also set SE2[3:2]
                        [GPIO2] = 01b).
 6:5         CIDM       Caller ID Monitor.
                        00 = Caller ID monitor disabled (Normal caller ID operation).
                        01 = Caller ID monitor enabled. Si2400 must detect channel seizure signal followed by
                        marks in order to report caller ID data.
                        10 = Caller ID monitor enabled. Si2400 must detect a DTMF A or D followed by marks in
                        order to report caller ID data.
                        11 = Caller ID monitor enabled. Si2400 must only detect marks in order to report caller ID
                        data.
  4        Reserved     Read returns zero.
  3          9BF        Ninth Bit Function.
                        Only valid if the ninth bit escape is set S15[0] (NBE).
                        0 = Ninth bit equivalent to ALERT.
                        1 = Ninth bit equivalent to HDLC EOFR.
  2          BDL        Blind Dialing.
                        0 = Blind dialing disabled.
                        1 = Enables blind dialing after dial timeout register S02 (CW) expires.
  1          MLB        Modem Loopback.
                        0 = Not swapped.
                        1 = Swaps frequency bands in modem algorithm to do a loopback in a test mode.
  0          MCH        Miscellaneous Characters.
                        0 = Disables “.” and “/” character echoing.
                        1 = Enables “.” and “/” character echoing to indicate tone on and tone off for !7 operation.
                                                       Rev. 1.3                                                   51


Si2400
S11 (ONHI). On-Hook Intrusion
   Bit      D7      D6       D5          D4         D3        D2        D1        D0
 Name              DVL                                       AVL
 Type              R/W                                       R/W
Reset settings = 0100_1000b (0x48)
  Bit        Name                                                  Function
 7:5          DVL       Differential Voltage Level.
                        Differential voltage level to detect intrusion event (2.75 V units.)
 4:0          AVL       Absolute Voltage Level.
                        Absolute voltage level to detect intrusion event (2.75 V units added to 3 V.)
S12 (OFHI). Off-Hook Intrusion
   Bit      D7      D6       D5          D4         D3        D2        D1        D0
 Name              DCL                                       ACL
 Type              R/W                                       R/W
Reset settings = 0100_0000b (0x40)
  Bit        Name                                                  Function
 7:5         DCL        Differential Current Level.
                        Differential current level to detect intrusion event (3 mA units.)
 4:0          ACL       Absolute Current Level.
                        When S13[4] (OFHD) = 0b, ACL represents the absolute current threshold used by the
                        off-hook intrusion algorithm (3 mA units added to 12 mA.)
                        When OFHD = 1b, see "5.5.5.Differential Algorithm #2" on page 20.
52                                                     Rev. 1.3


                                                                                         Si2400
S13 (MF3). Modem Functions 3
  Bit       D7       D6       D5          D4     D3         D2       D1        D0
 Name       JID     BTID     OFHE      OFHD     ONHD       CIDB     CIDU      PCM
 Type      R/W      R/W       R/W       R/W      R/W       R/W       R/W       R/W
Reset settings = 0001_0000b (0x10)
 Bit         Name                                               Function
  7            JID      Japan Caller ID.
                        0 = Disable.
                        1 = Enable.
  6          BTID       BT Caller ID Wetting Pulse.
                        0 = Enable.
                        1 = Disable.
  5          OFHE       Enable Off-Hook.
                        Enable off hook in current limit mode for overcurrent detection.
                        0 = Disable.
                        1 = Enable.
  4          OFHD       Off-Hook Intrusion Detect Method.
                        0 = Absolute.
                        1 = Differential.
  3          ONHD       On-Hook Intrusion Detect Method.
                        0 = Absolute.
                        1 = Differential.
  2          CIDB       British Telecom Caller ID Decode.
                        0 = Disable.
                        1 = Enable.
  1          CIDU       BellCore Caller ID Decode.
                        0 = Disable.
                        1 = Enable.
  0           PCM       PCM Data Mode.
                        DTE rate must be ≥ 228613, and flow control must be used.
                        0 = Disable.
                        1 = Enable.
                                                     Rev. 1.3                                 53


Si2400
S14 (MF4). Modem Functions 4
   Bit      D7       D6       D5          D4         D3        D2        D1       D0
 Name    MRCD       UDF      TEO         AOC        OD        NLD       IND       RD
 Type      R/W      R/W       R/W        R/W        R/W       R/W       R/W      R/W
Reset settings = 0000_0000b (0x00)
  Bit       Name                                                   Function
   7        MRCD        Disable Modem Result Codes. (See S62 also.)
                        0 = Enables the following modem result codes:
                        1 = Disables the following modem result codes:
                        Intrusion—”i” and “I”
                        Line present—”l” and “L”
                        Flash—”f”
                        Ring—”R”
                        Register S62 can be used to individually re-enable particular result codes.
   6         UDF        User Defined Frequency.
                        0 = Disable.
                        1 = Enable user defined frequency detectors in A0 and !0 modes.
   5         TEO        TIES Escape Operation.
                        0 = Disable TIES escape operation.
                        1 = Enable TIES.
   4         AOC        AutoOverCurrent Detection.
                        0 = Disables AutoOverCurrent detection.
                        1 = Enables AutoOverCurrent detection.
   3          OD        Overcurrent Detected (Sticky).
   2         NLD        No Phone Line.
                        This bit is sticky while off-hook if S82[3] (LCLD) = 1b, and non-sticky (status) while on-
                        hook. NLD remains sticky for 800 ms after going from off-hook to on-hook.
   1         IND        Intrusion Detected.
                        This bit is normally NOT sticky so that the user may monitor/poll for intrusion manually.
                        However, during dialing and during data mode, it is impossible to monitor/poll this bit.
                        Therefore, if the Si2400 is either dialing or in data mode, this bit is sticky. If triggered dur-
                        ing data mode, this bit will remain sticky for 800 ms after the Si2400 goes back on-hook.
   0          RD        Ring Detected (Sticky).
                        This bit is normally sticky, but is cleared when the Si2400 goes from on-hook to off-hook.
54                                                      Rev. 1.3


                                                                                            Si2400
S15 (MLC). Modem Link Control
  Bit       D7       D6       D5         D4       D3       D2         D1        D0
 Name ATPRE        VCTE     FHGE       ENGE      STB          BDA              NBE
 Type      R/W      R/W      R/W         R/W     R/W          R/W              R/W
Reset settings = 1000_0100b (0x84)
 Bit        Name                                               Function
  7         ATPRE       Answer Tone Phase Reversal.
                        0 = Disable.
                        1 = Enable answer tone phase reversal.
  6          VCTE       V.25 Calling Tone.
                        0 = Disable.
                        1 = Enable V.25 calling tone.
  5         FHGE        550 Hz Guardtone.
                        0 = Disable.
                        1 = Enable 550 Hz guardtone.
  4         ENGE        1800 Hz Guardtone.
                        0 = Disable.
                        1 = Enable 1800 Hz guardtone.
  3           STB       Stop Bits.
                        0 = 1 stop bit.
                        1 = 2 stop bits.
 2:1         BDA        Bit Data.
                        00 = 6 bit data.
                        01 = 7 bit data.
                        10 = 8 bit data.
                        11 = 9 bit data.
  0          NBE        Ninth Bit Enable.
                        0 = Disable.
                        1 = Enable ninth bit as Escape and ninth bit function (register C).
                                                    Rev. 1.3                                     55


Si2400
S1F (ARM3). Alarm 3 (!7 Mode Only)
   Bit      D7         D6        D5          D4       D3           D2        D1          D0
 Name                 KOT                                         IMT
  Type                R/W                                         R/W
Reset settings = 0010_1101b (0x2D)
  Bit        Name                                                      Function
  7:5         KOT          Kissoff Timeout.
                           1 s units. Maximum 7 s.
  4:0         IMT          Intermessage Timing.
                           500 ms units. Maximum 8 s.
 Note: S1F is reconfigured as Alarm 3, a bit-mapped register, in !7 mode only. In all other modes, S1F is ATTD (Answer Tone
       to Transmit Delay).
56                                                        Rev. 1.3


                                                                                                           Si2400
S33 (MDMO). Modem Override
  Bit       D7        D6         D5        D4        D3        D2         D1         D0
 Name                DON       DOF                                       NAT       TSAC
 Type                R/W       R/W                                       R/W        R/W
Reset settings = 1000_0000b (0x80)
 Bit        Name                                                     Function
  7        Reserved       Read returns one.
  6          DON          On-Hook Intrusion Detect.
                          0 = Enable.
                          1 = Disable*.
  5          DOF          Off-Hook Intrusion Detect.
                          0 = Enable.
                          1 = Disable.
 4:2       Reserved       Read returns zero.
  1          NAT          No Answer Tone.
                          0 = Disable.
                          1 = Enable no answer tone fast handshake.
  0         TSAC          Transmit Scrambler Active.
                          0 = Disable.
                          1 = Force transmit scrambler active once connected.
*Note: When the Si2400 is on hook, the on-hook intrusion detector might not be immediately disabled by only setting the
       S33[6] (DON) = 1b (S33 = 0xCX, X indicates an otherwise appropriate value.) In order to guarantee that the result
       codes and the updating of S14[2] (NLD) and S14[1] (IND) are immediately disabled, ATS33=CX must be followed by
       ATSD1=00S14=X0.
                                                        Rev. 1.3                                                         57


Si2400
S36 (ARM1). Alarm 1 (!7 Mode Only)
   Bit       D7        D6         D5         D4       D3           D2        D1          D0
 Name            POF                  PON                 IDKT                      IT
  Type           R/W                   R/W                 R/W                    R/W
Reset settings = 0011_0000b (0x30)
  Bit    Name                                                       Function
  7:6     POF       Pulse Off Time.
                    00 = 25 ms.
                    01 = 50 ms.
                    10 = 65 ms.
                    11 = Use S2C register.
  5:4     PON       Pulse On Time.
                    00 = 25 ms.
                    01 = 50 ms.
                    10 = 65 ms.
                    11 = Use S2B register.
  3:2     IDKT      Intermessage Delay and Kissoff Timeout.
                    This register field defines two parameters. The Intermessage Delay defines the time the Si2400
                    waits prior to sending a subsequent message. The Kissoff Timeout defines the time the Si2400
                    waits for a Kissoff Tone prior to declaring that there is no kissoff tone detected.
                    00 = Intermessage Delay is measured relative to the end of Kissoff and it is a fixed delay
                    of 2.4 s. The Kissoff Timeout is measured relative to the end of Kissoff and it is a fixed
                    value of 2 s.
                    01 = Intermessage Delay is measured relative to the end of Kissoff and it is determined by
                    S1F[4:0] (IMT). The Kissoff Timeout is measured relative to the end of Kissoff and it is deter-
                    mined by S1F[7:5] (KOT).
                    10 = Intermessage Delay is measured relative to the end of the previous message and it is a
                    fixed delay of 3.4 s. The Kissoff Timeout is measured relative to the end of Kissoff and it is a
                    fixed value of 2 s.
                    11 = Intermessage Delay is measured relative to the end of the previous message and it is
                    determined by S1F[7:5] (KOT). The Kissoff Timeout is measured relative to the end of Kissoff
                    and it is determined by S1F[7:5] (KOT).
  1:0       IT      Interdigit Timing.
                    The controlled timing between the pulse digits.
                    00 = The timing between the end of a digit to the start of the next digit is fixed at 660 ms.
                    01 = The timing between the end of a digit to the start of the next digit is defined by the S2D
                    register.
                    10 = The timing between the start of a digit to the start of the next digit is fixed at 800 ms.
                    11 = The timing between the start of a digit to the start of the next digit is defined by the S2D
                    register.
 Note: S36 is reconfigured as Alarm 1, a bit-mapped register, in !7 mode only. In all other modes, S36 is SKDTL (Second
       Kissoff Tone Detect Length).
58                                                        Rev. 1.3


                                                                                                     Si2400
S38 (ARM2). Alarm 2 (!7 Mode Only)
  Bit       D7       D6        D5       D4       D3        D2        D1          D0
 Name      DBD          DCF                     HMT                        HF
 Type      R/W          R/W                     R/W                       R/W
Reset settings = 0011_1000b (0x38)
 Bit        Name                                                Function
  7          DBD        Delay Before Data.
                        Time the Si2400 waits prior to transmitting data, relative to the end of the handshake
                        tone.
                        0 = 300 ms.
                        1 = Use S2E (RTCT) register contents.
 6:5         DCF        Data Carrier Frequency.
                        Frequency that the Si2400 will use to transmit.
                        00 = User programmed. This is accomplished by accessing DSP register 5 prior to using
                        the !7 command.
                        01 = 1800 Hz.
                        10 = 1900 Hz.
                        11 = 1850 Hz.
 4:2         HMT        Handshake Minimum Time.
                        The minimum required tone length for a handshake tone or a kissoff tone.
                        000 = 53 ms.
                        001 = 160 ms.
                        010 = 320 ms.
                        011 = 480 ms.
                        100 = 640 ms.
                        101 = 800 ms.
                        110 = 960 ms.
                        111 = 1120 ms.
 1:0          HF        Handshake Frequency.
                        The frequency that the Si2400 detects as Handshake and Kissoff Tone.
                        00 = User-defined frequency detectors must be programmed prior to using the !7
                        command. See DSP Registers.
                        01 = 1400 Hz only.
                        10 = 2300 Hz only.
                        11 = 1400 Hz or 2300 Hz.
Note: S38 (ALARM2) is used in !7 mode only.
                                                    Rev. 1.3                                                   59


Si2400
S3C (CIDG). Caller ID Gain
   Bit      D7       D6       D5         D4        D3        D2      D1        D0
 Name                                                              CIDG
 Type                                                               R/W
Reset settings = 0000_0100b (0x04)
  Bit       Name                                                Function
 7:3       Reserved     Read returns 0.
 2:0         CIDG       Caller ID Gain.
                        The Si2400 dynamically sets the On-Hook Analog Receive Gain SF4[6:4] (ARG) to
                        CIDG during a caller ID event (or continuously if S0C[6:5] (CIDM = 11b). This field should
                        be set prior to caller ID operation.
                        000 = 7 dB
                        001 = 6 dB
                        010 = 4.8 dB
                        011 = 3.5 dB
                        100 = 2.0 dB
                        101 = 0 dB
                        110 = –2.0 dB
                        111 = –6.0 dB
60                                                    Rev. 1.3


                                                                                                              Si2400
S62 (RC). Result Codes Override
  Bit       D7        D6         D5         D4         D3        D2         D1         D0
 Name      CLD       OCR        LLC        WOR        FLS         IR       NLR         RR
 Type      R/W       R/W        R/W        R/W        R/W       R/W        R/W        R/W
Reset settings = 0000_0000b (0x00)
 Bit        Name                                                       Function
  7          CLD         Carrier Loss Detector.
                         0 = Default.
                         1 = Caller ID sensitivity can be increased by 5 dB. When CLD = 1, the host is responsi-
                         ble for terminating caller ID reception by asserting an escape and issuing the ATH com-
                         mand.
                         Note: This bit also controls the carrier loss detection of non-caller ID modes of operation.
                                  Therefore, the host must set CLD = 0 prior to answering a call via “ATA” or initiating a call
                                  via “ATDT” or “ATDP”.
  6          OCR         Overcurrent Result Code (“x”).
                         0 = Enable.
                         1 = Disable.
  5          LLC         Low Loop Current (required for CTR21 operation).
                         This feature only works when SDF ≠ 0x00.
                         0 = Disable.
                         1 = Enable.
  4          WOR         Wake-On-Ring Alert.
                         0 = Alert is not asserted upon a wake-on-ring event.
                         1 = Alert is asserted upon a wake-on-ring event SE2[7:6] (GPIO4) = 11b.
  3          FLS         Hookswitch Flash Result Code (“f”).*
                         0 = Disable.
                         1 = Enable.
  2           IR         Intrusion Result Code (“I” and “i”).*
                         0 = Disable.
                         1 = Enable.
  1          NLR         No Phone Line Result Code (“L” and “l”).*
                         0 = Disable.
                         1 = Enable.
  0           RR         Ring Result Code (“R”).*
                         0 = Disable.
                         1 = Enable.
*Note: S62[3] (FLS), S62[2] (IR), S62[1] (NLR), and S62[0] (RR) only apply if S14[7] (MRCD) = 1.
                                                         Rev. 1.3                                                               61


Si2400
S82 (IST). Intrusion
   Bit      D7       D6        D5        D4       D3        D2          D1         D0
 Name                    IST                     LCLD              IB
 Type                    R/W                      R/W            R/W
Reset settings = 0000_0000b (0x00)
  Bit        Name                                                 Function
 7:4          IST       Intrusion Settling Time.
                        0000 = IST equals 1 second.
                        Delay between when the ISOmodem goes off-hook and the off-hook intrusion algorithm
                        begins (250 ms units).
   3         LCLD       Loop Current Loss Detect.
                        0 = Disable.
                        1 = Enables the reporting of “I” and “L” result codes while off-hook. Will assert ALERT if
                        GPIO4 (SE2[7:6]) is enabled as ALERT. Will assert NLD (S14[2]).
 2:1           IB       Intrusion Blocking.
                        This feature only works when SDF ≠ 0x00. Defines the method used to block the off-hook
                        intrusion algorithm from operating after dialing has begun.
                        00 = No intrusion blocking.
                        01 = Intrusion disabled from start of dial to end of dial.
                        10 = Intrusion disabled from start of dial to register S29 time out.
                        11 = Intrusion disabled from start of dial to carrier detect or to “N” or “n” result code.
   0       Reserved     Read returns 0.
SDF (DGSR). Intrusion Deglitch
   Bit      D7       D6        D5        D4       D3        D2          D1         D0
 Name                                           DGSR
 Type                                             R/W
Reset settings = 0000_0000b (0x00)
  Bit        Name                                                 Function
   7       Reserved     Read returns zero.
 6:0        DGSR        Deglitch Sample Rate.
                        Sets the sample rate for the deglitch algorithm and the off-hook intrusion algorithm
                        (40 ms units).
                        0000000 = Disables the deglitch algorithm, and sets the off-hook intrusion sample
                        rate to 200 ms and delay between compared samples to 800 ms.
62                                                   Rev. 1.3


                                                                                 Si2400
SE0 (CF1). Chip Functions 1
  Bit       D7       D6       D5       D4          D3       D2       D1      D0
 Name                        ICTS                 ND                 SD
 Type                         R/W                R/W                R/W
Reset settings = 0010_0010b (0x22)
 Bit        Name                                               Function
 7:6       Reserved     Read returns zero.
  5          ICTS       Invert CTS pin.
                        0 = Inverted (CTS).
                        1 = Normal (CTS).
  4        Reserved     Read returns zero.
  3           ND        0 = 8N1.
                        1 = 9N1 (hardware UART only).
 2:0          SD        Serial Dividers.
                        000 = 300 bps serial link.
                        001 = 1200 bps serial link.
                        010 = 2400 bps serial link.
                        011 = 9600 bps serial link.
                        100 = 19200 bps serial link.
                        101 = 228613 bps serial link (0.8% error to 230400 bps).
                        110 = 245760 bps serial link.
                        111 = 307200 bps serial link.
                                                     Rev. 1.3                         63


Si2400
SE1 (CLK1). Clock 1
   Bit      D7       D6       D5         D4        D3         D2       D1     D0
 Name          MCKR                                         CLKD
 Type           R/W                                          R/W
Reset settings = 0000_0111b (0x07)
  Bit       Name                                                   Function
 7:6        MCKR        Microcontroller Clock Rate.
                        0 = Fastest 9.8304 MHz.
                        1 = 4.9152 MHz.
                        2 = 2.4576 MHz.
                        3 = Reserved.
                        Note: MCKR must be set to 0 when the UART DTE rate is set to 228613 or greater
                               (SE0[2:0] (SD) = 101b, 110b or 111b).
   5       Reserved     Read returns zero.
 4:0        CLKD        CLK_OUT Divider.
                        00000 = Disable CLK_OUT pin.
                        CLK_OUT = 78.6432/(CLKD + 1) MHz.
                        00111b CLK_OUT = 9.8304 MHz.
64                                                     Rev. 1.3


                                                                                                     Si2400
SE2 (GPIO). General Purpose Input/Output
  Bit       D7        D6        D5        D4         D3         D2       D1        D0
 Name          GPIO4                GPIO3                GPIO2             GPIO1
 Type           R/W                  R/W                  R/W                R/W
Reset settings = 0000_0000b (0x00)
 Bit        Name                                                    Function
 7:6        GPIO4         GPIO4.
                          00 = Digital input.
                          01 = Digital output (relay drive).
                          10 = Analog input.
                          11 = ALERT function triggered by loss of carrier (always), V.23 reversal (always), wake-
                          on-ring S62[4] (WOR), parallel phone intrusion S33[5] (DOF), or loss of loop current
                          S82[3] (LCLD).
 5:4        GPIO3         GPIO3.
                          00 = Digital input.
                          01 = Digital output (relay drive).
                          01 = Analog input.
                          11 = ESCAPE function (digital input).
 3:2        GPIO2         GPIO2*.
                          00 = Digital input.
                          01 = Digital output (relay drive; also used for CD function).
                          10 = Analog input.
                          11 = Reserved.
 1:0        GPIO1         GPIO1*.
                          00 = Digital input.
                          01 = Digital output (relay drive).
                          10 = Analog input.
                          11 = Reserved.
*Note: To be used as analog input or GPIO pins; SE4[3] (GPE) and SE4[0] (TRSP) must both equal zero.
                                                         Rev. 1.3                                                65


Si2400
SE3 (GPD). GPIO Data
   Bit      D7       D6       D5       D4   D3        D2     D1    D0
 Name          AING                        GPD4     GPD3    GPD2  GPD1
 Type           R/W                         R/W      R/W     R/W   R/W
Reset settings = 0000_0000b (0x00)
  Bit       Name                                         Function
 7:6         AING       AIN Gain Bits.
                        00 = 0 dB
                        01 = 6 dB
                        10 = 2.5 dB
                        11 = 12 dB
 5:4       Reserved     Read returns zero.
   3        GPD4        GPIO4 Data.
                        0
                        1
   2        GPD3        GPIO3 Data.
                        0
                        1
   1        GPD2        GPIO2 Data.
                        0
                        1
   0        GPD1        GPIO1 Data.
                        0
                        1
66                                             Rev. 1.3


                                                                                                           Si2400
SE4 (CF5). Chip Functions 5
  Bit       D7         D6        D5       D4        D3         D2         D1         D0
 Name     NBCK       SBCK            DRT           GPE                   APO       TRSP
 Type        R          R            R/W           R/W                   R/W        R/W
Reset settings = 0000_0000b (0x00)
 Bit         Name                                                   Function
  7          NBCK          9600 Baud Clock (Read Only).
  6          SBCK          600 Baud Clock (Read Only).
 5:4          DRT          Data Routing (See Figure 10).
                           00 = Data mode, DSP output transmitted to line, line received by DSP input.
                           01 = Voice mode, selected AIN transmitted to line, line received by AOUT.
                           10 = Loopback mode, RXD through microcontroller (DSP) to TXD. AIN looped to AOUT.
                           11 = Codec mode, data from DSPOUT to AOUT, AIN to DSPIN.
  3          GPE*          GPIO1 Enable.
                           0 = Disable.
                           1 = Enable GPIO1 to be HDLC end-of-frame flag.
  2        Reserved        Read returns zero.
  1           APO          Analog Power On.
                           0 = Disable.
                           1 = Power on analog ADC and DAC.
  0         TRSP*          TXD2/RXD2 Serial Port.
                           0 = Disable.
                           1 = Enable TXD2/RXD2 serial port so that RXD2 is GPIO1 and TXD2 is GPIO2.
*Note: GPE and TRSP are mutually exclusive. Only one can be set at any one time, and they override the settings in registers
       GPIO2 and GPIO1. Once TXD2 and RXD2 are enabled through TRSP = 1b, the primary serial port TXD and RXD no
       longer function and pins TXD2 and RXD2 control the Si2400. This feature allows a second microcontroller to control
       the Si2400.
                                                        Rev. 1.3                                                           67


Si2400
SE5 (DSP1). (SE8 = 0x02) Read Only Definition
   Bit      D7        D6        D5      D4        D3         D2        D1    D0
 Name     DDAV      TDET                                   TONE
  Type       R         R                                      R
Reset settings = 0000_0000b (0x00)
  Bit       Name                                                 Function
   7        DDAV        DSP Data Available.
   6        TDET        Tone Detected.
                        Indicates a TONE (any of type 0–25 below) has been detected.
                        0 = Not detected.
                        1 = Detected.
   5      Reserved      Read returns zero.
  4:0       TONE        Tone Type Detected.
                        When TDET goes high, TONE indicates which tone has been detected from the following:
                        TONE           Tone Type                                               Priority
                        00000–01111 DTMF 0–15 (DTMFE = 1)1 See Table 23 on page 39                 1
                                                                                2
                        10000          Answer tone detected 2100 Hz (ANSE = 1)                     2
                        10001          Bell 103 answer tone detected 2225 Hz (ANSE = 1)            2
                        10010          V.23 forward channel mark 1300 Hz (V23E = 1)3               3
                        10011          V.23 backward channel mark 390 Hz (V23E = 1)                3
                        10100          User defined frequency 1 (USEN1 = 1)4                       4
                        10101          User defined frequency 2 (USEN1 = 1)                        4
                        10110          Call progress filter A detected                             6
                        10111          User defined frequency 3 (USEN2 = 1)5                       5
                        11000          User defined frequency 4 (USEN2 = 1)                        5
                        11001          Call progress filter B detected                             6
 Notes:
     1. SE6[0] (DTMFE) SE8 = 0x02.
     2. SE6[1] (ANSE) SE8 = 0x02.
     3. SE6[2] (V23E) SE8 = 0x02.
     4. SE6[3] (USEN1) SE8 = 0x02.
     5. SE6[4] (USEN2) SE8 = 0x02.
68                                                   Rev. 1.3


                                                                                             Si2400
SE5 (DSP2). (SE8 = 0x02) Write Only Definition
  Bit       D7       D6      D5        D4       D3       D2        D1      D0
 Name                           DTM                              TONC
 Type                              W                               W
Reset settings = 0000_0000b (0x00)
 Bit        Name                                             Function
  7        Reserved     Always write zero.
 6:3         DTM        DTMF tone (0–15) to transmit when selected by TONC = 001b. See Table 23 on page 39.
 2:0        TONC        Tone                    Tone Type
                        000                     Mute
                        001                     DTMF
                        010                     2225 Hz Bell mode answer tone with phase reversal
                        011                     2100 Hz CCITT mode answer tone with phase reversal
                        100                     2225 Hz Bell mode answer tone without phase reversal
                        101                     2100 Hz CCITT mode answer tone without phase reversal
                        110                     User-defined programmable frequency tone (UFRQ)
                                                (see Table 24 on page 40, default = 1700 Hz)
                        111                     1300 Hz V.25 calling tone
                                                  Rev. 1.3                                               69


Si2400
SE6 (DSP3). (SE8 = 0x02) Write Only Definition
   Bit      D7       D6        D5       D4         D3        D2       D1        D0
 Name     CPSQ     CPCD              USEN2 USEN1           V23E      ANSE     DTMFE
 Type       W        W                   W         W         W         W         W
Reset settings = 0000_0000b (0x00)
  Bit        Name                                                 Function
   7        CPSQ        0 = Disable.
                        1 = Enables a squaring function on the output of filter B before the input to A (cascade
                        only).
   6        CPCD        0 = Call progress filter B output is input into call progress filter A. Output from fil-
                        ter A is used in the detector.
                        1 = Cascade disabled. Two independent fourth order filters available (A and B). The
                        largest output of the two is used in the detector.
   5       Reserved
   4        USEN2       0 = Disable.
                        1 = Enable the reporting of user defined frequency tones 3 and 4 through TONE.
   3        USEN1       0 = Disable.
                        1 = Enable the reporting of user defined frequency tones 1 and 2.
   2         V23E       0 = Disable.
                        1 = Enable the reporting of V.23 tones, 390 Hz and 1300 Hz.
   1         ANSE       0 = Disable.
                        1 = Enable the reporting of answer tones.
   0        DTMFE       0 = Disable.
                        1 = Enable the reporting of DTMF tones.
SEB (TPD). Timer and Power Down
   Bit      D7       D6        D5       D4         D3        D2       D1        D0
 Name                                           PDDE
 Type                                            R/W
Reset settings = 0000_0000b (0x00)
  Bit        Name                                                 Function
 7:4       Reserved     Read returns zero.
   3        PDDE        Power Down DSP Engine.
                        0 = Power on
                        1 = Power down
 2:0       Reserved     Read returns zero.
70                                                    Rev. 1.3


                                                                                                               Si2400
SF0 (DAA0). DAA Low Level Functions 0
  Bit       D7        D6         D5        D4         D3         D2          D1         D0
 Name                                                                        LM        OFHK
 Type                                                                       R/W         R/W
Reset settings = 0000_0000b (0x00)
 Bit        Name                                                        Function
 7:2       Reserved       Read returns zero.
  1           LM          Hook Control/Status.1,2
  0         OFHK          OFHK LM           LM0         Line Status Mode
                            0         0     1           On-hook
                            0         1     1           On-hook line monitor mode (Si3015 compatible)
                            1         0     0           Off-hook
                            Else Reserved
Notes:
    1. See Register F7 on page 76 for LM0.
    2. Under normal operation, the Si2400 internal microcontroller will automatically set these bits appropriately.
                                                         Rev. 1.3                                                   71


Si2400
SF1 (DAA1). DAA Low Level Functions 1
   Bit      D7       D6       D5         D4        D3        D2      D1        D0
 Name      BTE      PDN       PDL                           HBE
 Type      R/W      R/W       R/W
Reset settings = 0001_1100b (0x1C)
  Bit       Name                                                Function
   7         BTE        Billing Tone Enable.
                        When the Si3015 detects a billing tone, SF9[3] (BTD) is set.
                        0 = Disable.
                        1 = Enable.
   6         PDN        Power Down.
                        0 = Normal operation.
                        1 = Powers down the Si2400.
   5         PDL        Power Down Line-Side Chip (typically only used for board level debug.)
                        0 = Normal operation. Program the clock generator before clearing this bit.
                        1 = Places the Si3015 in lower power mode.
 4:3       Reserved     Do Not Modify
   2         HBE        Hybrid Transmit Path Connect.
                        0 = Disable.
                        1 = Enable.
 1:0       Reserved     Do Not Modify
SF2 (DAA2). DAA Low Level Functions 2
   Bit      D7       D6       D5         D4        D3        D2      D1        D0
 Name                                             FDT
 Type                                              R
Reset settings = 0000_0000b (0x00)
  Bit       Name                                                Function
 7:4       Reserved     Read only.
   3         FDT        Frame Detect (Typically only used for board-level debug.)
                        1 = Indicates link frame lock has been established.
                        0 = Indicates link frame lock has not been established.
 2:0       Reserved     Reserved
72                                                    Rev. 1.3


                                                                                                     Si2400
SF4 (DAA4). DAA Low Level Functions 4
  Bit       D7       D6        D5        D4       D3        D2         D1        D0
 Name     SQLH                ARG                     ARL                   ATL
 Type      R/W                R/W                     R/W                   R/W
Reset settings = 0000_1111b (0x0F)
 Bit        Name                                                  Function
  7         SQLH        Ring Squelch.
                        If the host implements a manual ring detect (bypassing the Si2400 micro), this bit must
                        be set, then cleared following a polarity reversal detection. Used to quickly recover offset
                        on RNG1/2 pins after polarity reversal.
                        0 = Normal.
                        1 = Squelch.
 6:4         ARG        Analog Receive Gain.
                        Off-Hook                     On-Hook
                        000 = 0 dB gain 000 = 7 dB
                        001 = 3 dB gain              001 = 6 dB
                        010 = 6 dB gain              010 = 4.8 dB
                        011 = 9 dB gain              011 = 3.5 dB
                        1xx = 12 dB gain             1xx = 2.0 dB
 3:2         ARL        AOUT Receive—Path Level.
                        DAA receive path signal AOUT gain.
                        00 = 0 dB
                        01 = –6 dB
                        10 = –12 dB*
                        11 = Mute
 1:0         ATL        AOUT Transmit—Path Level.
                        DAA transmit path signal AOUT gain.
                        00 = –18 dB
                        01 = –24 dB
                        10 = –30 dB*
                        11 = Mute
                                                     Rev. 1.3                                                      73


Si2400
SF5 (DAA5). DAA Low Level Functions 5
   Bit      D7       D6       D5        D4          D3        D2        D1        D0
 Name     FULL     DCTO      OHS       ACT              DCT             RZ        RT
 Type      R/W      R/W       R/W      R/W              R/W             R/W      R/W
Reset settings = 0000_1000b (0x08)
  Bit       Name                                                   Function
   7         FULL       Full Scale.
                        0 = Si3015 ADC/DAC full scale > –1 dBm.
                        1 = Si3015 ADC/DAC full scale > 3.2 dBm.
                        This bit changes the full scale of the ADC and DAC from –1 dBm min. to 3.2 dBm min. In
                        order to use this bit, the R2 resistor must be changed from 402 Ω to 243 Ω and ACT
                        (SF5, bit 4) must be set to 0. This bit is intended for use only in voice communications
                        and may be used in PCM modes.
   6        DCTO        DC Termination Off.
                        0 = Normal operation. The OFF bit must always be set to 0 when on-hook.
                        1 = DC termination disabled and the device presents an 800 Ω dc impedance to the line
                        which is used to enhance operation with an off-hook parallel phone.
   5         OHS        On-Hook Speed (See Table 13 and “Appendix A—DAA Operation”).
                        0 = The Si2400 will execute a fast on-hook.
                        1 = The Si2400 will execute a slow, controlled on-hook.
   4         ACT        AC Termination (See Table 13 and “Appendix A—DAA Operation”).
                        0 = Real impedance.
                        1 = Complex impedance.
 3:2         DCT        DC Termination Voltage (See Table 13 and “Appendix A—DAA Operation”).
                        00 = Low Voltage Mode (transmit level = –5 dBm).
                        01 = Japan mode (transmit level = –3 dBm).
                        10 = USA mode (transmit level = –1 dBm).
                        11 = CTR21/France current limit mode (transmit level = –1 dBm).
   1          RZ        Ringer Impedance.
                        0 = Maximum (high) ringer impedance.
                        1 = Synthesize ringer impedance.
   0          RT        Ringer Threshold Select.
                        Used to satisfy country requirements on ring detection. Signals below the lower level will
                        not generate a ring detection; signals above the upper level are guaranteed to generate
                        a ring detection.
                        0 = 11 to 22 VRMS.
                        1 = 17 to 33 VRMS.
74                                                     Rev. 1.3


                                                                                              Si2400
SF6 (DAA6). DAA Low Level Functions 6
  Bit       D7       D6       D5        D4        D3        D2       D1        D0
 Name                                            FJM       DIAL     VOL       FLVM
 Type                                            R/W                R/W        R/W
Reset settings = 0000_0000b (0x00)
 Bit        Name                                                Function
 7:4       Reserved     Read returns zero.
  3           FJM       Force Japan DC Termination.
                        0 = Normal mode.
                        1 = Force Japan dc termination.
  2          DIAL       DTMF Dialing Mode.
                        This bit should be set during DTMF dialing in CTR21 mode if SDB (LVCS) < 12.
                        0 = Normal operation.
                        1 = Increase headroom for DTMF dialing.
  1          VOL        Line Voltage Adjust.
                        0 = Nominal.
                        1 = Decreases dc termination voltage.
  0          FLVM       Force Low Voltage Mode.
                        When SF5[3:2] (DCT) = 10b (FCC mode), setting FLVM will force the Low Voltage mode
                        (see DCT = 00) while allowing for a transmit level of –1 dBm.
                        0 = Disable.
                        1 = Enable.
                                                     Rev. 1.3                                            75


Si2400
SF7 (DAA7). DAA Low Level Functions 7
   Bit      D7       D6        D5       D4         D3        D2      D1  D0
 Name                                  LM0        LIM
 Type                                  R/W       R/W
Reset settings = 0001_0000b (0x10)
  Bit       Name                                                Function
 7:5       Reserved     Read returns zero.
   4         LM0        See LM0 in Register F0 page 71.
                        0
                        1
   3         LIM        Current-Limiting Adjust Value.
                        0 = Disable.
                        1 = Enable (CTR21 mode).
 2:0       Reserved     Read returns zero.
SF8 (DAA8). DAA Low Level Functions 8
   Bit      D7       D6       D5       D4       D3         D2       D1   D0
 Name                   LRV
 Type                     R
  Bit       Name                                                Function
 7:4         LRV        Line-Side Chip Revision Number.
                        1001 = Si3015 Rev A
                        1010 = Si3015 Rev B
                        1011 = Si3015 Rev C
                        1100 = Si3015 Rev D
 3:0       Reserved     Read returns indeterministic.
76                                                  Rev. 1.3


                                                                                        Si2400
SF9 (DAA9). DAA Low Level Functions 9 Read Only
  Bit       D7       D6       D5        D4       D3        D2     D1     D0
 Name               OVL                         BTD              ROV
 Type                 R                          R                R
Reset settings = 0010_0000b (0x20)
 Bit        Name                                              Function
  7        Reserved     Read returns zero.
  6          OVL        Receive Overload (see “Appendix A—DAA Operation”).
                        Same as ROV, except non-sticky.
 5:4       Reserved     Do Not Modify.
  3          BTD        Billing Tone Detect (sticky). (See “Appendix A—DAA Operation”.)
                        0 = No billing tone detected.
                        1 = Billing tone detected.
  2        Reserved     Read returns zero.
  1          ROV        Receive Overload (sticky) (see “Appendix A—DAA Operation”).
                        0 = No excessive level detected.
                        1 = Excessive input level detected.
  0        Reserved     Read returns zero.
                                                     Rev. 1.3                                77


Si2400
APPENDIX A—DAA OPERATION
Introduction                                                 EN55022 and CISPR-22 Compliance
                                                             Compliance to the EN55022:1998 standard will be
This section describes the detailed functionality of the
                                                             necessary to conform to the European Union's EMC
integrated DAA included in the Si2400 chipset. This
                                                             Directive. Adherence to this standard will be necessary
specific functionality is generally transparent to the user
                                                             to display the CE mark on designs intended for sale in
when using the on-chip controller in the Si2400 modem.
                                                             the EU. The deadline for EN55022 and CISPR-22
When bypassing the on-chip controller, the low-level
                                                             compliance is August 1, 2003. However, some non-
DAA functions of the Si3015 described in this section
                                                             European countries currently require compliance to the
can be controlled through S registers.
                                                             CISPR-22 specification. The typical schematic
DAA Isolation Barrier                                        (Figure 3) and global bill of materials (BOM) (page 11)
                                                             contained in this data sheet is designed to be compliant
The Si2400 chipset consists of the Si3015 line-side
                                                             to the above mentioned standards. It should be noted
device and the Si2400 modem device. The Si2400
                                                             that L1, L2, R31, R32, C38, and C39 are only necessary
achieves an isolation barrier through a low-cost, high-
                                                             for those products which are intended for sale in the
voltage capacitor in conjunction with Silicon
                                                             European Union or require CISPR-22 compliance. If this
Laboratories’ proprietary signal processing techniques.
                                                             is not the target market then L1 and L2 can be replaced
These techniques eliminate any signal degradation due
                                                             with 0 Ω resistors and R31, R32, C38, and C39 need
to capacitor mismatches, common mode interference,
                                                             not be populated.
or noise coupling. As shown in Figure 3 on page 10, the
C1, C4, C24, and C25 capacitors isolate the Si2400           While this population option achieves EN55022 and
(DSP-side) from the Si3015 (line-side). All transmit,        CISPR-22 compliance, there are several system
receive, and control data are communicated through           dependent and country dependent issues worth
this barrier.                                                considering. The first relates to the direct current
                                                             resistance (DCR) of the inductors. If the selected
Emissions/Immunity                                           inductors have a DCR of less than 3 Ω each, then
The Si2400 chipset and recommended DAA schematic             countries which require 300 Ω or less of dc resistance at
is fully compliant with and passes all international         TIP and RING with 20 mA of loop current can be
electromagnetic emissions and conducted immunity             satisfied with the Japan dc termination mode (SF5[3:2]
tests (includes FCC part 15,68; EN50082-1). Careful          [DCT] = 01b). If the selected inductors have a DCR of
attention to the Si2400 bill of materials (page 11),         greater than 3 Ω but less than 8 Ω each, then low
schematic (Figure 3 on page 10), and layout guidelines       voltage dc termination mode (DCT = 00) must be used
(included in the Si2400URT-EVB data sheet) will ensure       to satisfy the above requirement. In either case, Silicon
compliance with these international standards. In            Laboratories strongly recommends users of the
designs with difficult layout constraints, the addition of   ISOmodem adhere to the section “DC Termination
the C22 and C30 capacitors to the C24 and C25                Considerations” for dc termination requirements.
recommended capacitors may improve modem                     The second consideration relates to the power supply of
performance on emissions and conducted immunity.             the target system. The recommended values for L1, L2,
Also, under some layout conditions, C22 and C30 may          R31, R32, C38, and C39 assume that the target system
improve the immunity to telephone line transients. This      provides a direct current connection between the target
is most important for applications that use the voice        system's reference ground (Si2400 GND) and an
codec feature of the Si2400. Because line transients are     external ground (often the third prong of a power plug).
infrequent and high voltage in nature, they tend to be       If there is no direct connection between the reference
more problematic in voice applications than in data          ground and external ground, then smaller inductor
applications. An occasional pop in a voice application is    values are possible. It should be understood that this
quite noticeable, whereas occasional bit errors are          consideration is system dependent, and the impedance
easily corrected in a modem connection with an error-        between the system ground and the external ground in
correction protocol.                                         the range of 500 kHz and 10 MHz should be well
                                                             known. Please contact a Silicon Laboratories technical
                                                             representative for further assistance in analyzing or
                                                             testing systems for this consideration.
78                                                      Rev. 1.3


                                                                                                                                                                                                  Si2400
DC Termination                                                                                                          Japan mode DCT = 01b, shown in Figure 16, is a lower
                                                                                                                        voltage mode and supports a transmit full scale level of
The Si2400 has four programmable dc termination
                                                                                                                        –2.71 dBm. Higher transmit levels for DTMF dialing are
modes which are selected with SF5[3:2] (DCT).
                                                                                                                        also supported. See "DTMF Dialing" on page 80. The
FCC mode (DCT = 10b), shown in Figure 14, is the                                                                        low voltage requirement is dictated by countries such as
default dc termination mode and supports a transmit full                                                                Japan and Malaysia.
scale level of –1 dBm at TIP and RING. This mode
meets FCC requirements in addition to the requirements                                                                                                                       Japan DCT M ode
of many other countries.                                                                                                                                     10.5
                                                                                                                                                              10
                                                                                                                              V oltage A c ros s DA A (V )
                                                                                 FCC DCT M ode                                                                9.5
                                                            12                                                                                                  9
                                                                                                                                                              8.5
                            V oltage A c ros s DA A (V )
                                                            11
                                                                                                                                                               8
                                                            10                                                                                                7.5
                                                                                                                                                                7
                                                                9                                                                                             6.5
                                                                                                                                                                6
                                                                8
                                                                                                                                                              5.5
                                                                                                                                                                 .01 .02 .03 .04 .05 .06 .07 .08 .09 .1   .11
                                                                7
                                                                                                                                                                              Loop Current (A )
                                                                6                                                             Figure 16. Japan Mode I/V Characteristics
                                                                    .01 .02 .03 .04 .05 .06 .07 .08 .09 .1   .11
                                                                                                                        Low Voltage mode (DCT = 00b), shown in Figure 17, is
                                                                                Loop Current (A )
                                                                                                                        the lowest line voltage mode supported on the Si2400,
                                                                                                                        with a transmit full scale level of –5 dBm. Higher
                     Figure 14. FCC Mode I/V Characteristics                                                            transmit levels for DTMF dialing are also supported.
CTR21 mode DCT = 11b, shown in Figure 15, provides                                                                      See “DTMF Dialing”. This low voltage mode is offered
current limiting while maintaining a transmit full scale                                                                for situations that require very low line voltage
level of –1 dBm at TIP and RING. In this mode, the dc                                                                   operation. It is important to note that this mode should
termination will current limit before reaching 60 mA.                                                                   only be used when necessary, as the dynamic range will
                                                                                                                        be significantly reduced and thus the ISOmodem will
                                                                               CTR21 DCT M ode                          not be able to transmit or receive large signals without
                                                           45
                                                                                                                        clipping them.
   V oltage A c ros s DA A (V )
                                                           40
                                                           35                                                                                                               Low V oltage M ode
                                                                                                                                                             10.5
                                                           30                                                                                                 10
                                                                                                                              V oltage A c ros s DA A (V )
                                                           25                                                                                                 9.5
                                                                                                                                                                9
                                                           20
                                                                                                                                                              8.5
                                                           15
                                                                                                                                                               8
                                                           10                                                                                                 7.5
                                                            5                                                                                                   7
                                                            .015 .02 .025 .03 .035 .04 .045 .05 .055 .06                                                      6.5
                                                                               Loop Current (A )                                                                6
                                                                                                                                                              5.5
  Figure 15. CTR21 Mode I/V Characteristics                                                                                                                      .01 .02 .03 .04 .05 .06 .07 .08 .09 .1   .11
                                                                                                                                                                              Loop Current (A )
                                                                                                                                                               Figure 17. Low Voltage Mode I/V
                                                                                                                                                                       Characteristics
                                                                                                                   Rev. 1.3                                                                                     79


Si2400
AC Termination                                               termination mode (DCT = 01b) or the Low Voltage
                                                             termination mode (DCT = 00b). SF6[3] (FJM) and
The Si2400 has two ac termination impedances,
                                                             SF6[0] (FLVM) have no effect in any other termination
selected with SF5[4] (ACT).
                                                             mode other than the FCC dc termination mode.
ACT = 0b is a real, nominal 600 Ω termination which
satisfies the impedance requirements of FCC part 68,         Pulse Dialing
JATE, and other countries. This real impedance is set        Pulse dialing is accomplished by going off and on hook
by circuitry internal to the Si2400 chipset as well as the   to generate make and break pulses. The nominal rate is
resistor R2 connected to the Si3015 REXT pin.                10 pulses per second. Some countries have very tight
ACT = 1b is a complex impedance which satisfies the          specifications for pulse fidelity, including make and
impedance requirements of Australia, New Zealand,            break times, make resistance, and rise and fall times. In
South Africa, CTR21 and some European NET4                   a traditional solid-state dc holding circuit, there are a
countries such as the UK and Germany. This complex           number of issues in meeting these requirements.
impedance is set by circuitry internal to the Si2400         The Si2400 dc holding circuit has active control of the
chipset as well as the network connected to the Si3015       on-hook and off-hook transients to maintain pulse
REXT2 pin.                                                   dialing fidelity.
Ringer Impedance                                             Spark quenching requirements in countries such as
                                                             Italy, Netherlands, South Africa and Australia deal with
The ring detector in a typical DAA is ac coupled to the
                                                             the on-hook transition during pulse dialing. These tests
line with a large, 1 µF, 250 V decoupling capacitor. The
                                                             provide an inductive dc feed, resulting in a large voltage
ring detector on the Si2400 is also capacitively coupled
                                                             spike. This spike is caused by the line inductance and
to the line, but it is designed to use smaller, less
                                                             the sudden decrease in current through the loop when
expensive 560 pF capacitors. Inherently, this network
                                                             going on-hook. The traditional way of dealing with this
produces a very high ringer impedance to the line on
                                                             problem is to put a parallel RC shunt across the
the order of 800 to 900 kΩ. This value is acceptable for
                                                             hookswitch relay. The capacitor is large (~1 µF, 250 V)
most countries, including FCC and CTR21.
                                                             and expensive. In the Si2400, SF5[6:5] (OHS) can be
Several countries, including Poland, South Africa and        used to slowly ramp down the loop current to pass these
South Korea, require a maximum ringer impedance. For         tests without requiring additional components.
Poland, South Africa and South Korea, the maximum
ringer impedance specification can be met with an            Billing Tone Detection
internally synthesized impedance by setting SF5[1]           “Billing tones” or “metering pulses” generated by the
(RZ) = 1b.                                                   central office can cause modem connection difficulties.
DTMF Dialing                                                 The billing tone is typically either a 12 KHz or 16 KHz
                                                             signal and is sometimes used in Germany, Switzerland,
In CTR21 dc termination mode, set SF6[2] (DIAL) = 1b         and South Africa. Depending on line conditions, the
during DTMF dialing if SDB (LVCS) ≤ 11. Setting this bit     billing tone may be large enough to cause major modem
increases headroom for large signals. This bit should        errors. The Si2400 chipset can provide feedback when
only be used during dialing and if SDB (LVCS) < 11.          a billing tone occurs and when it ends.
In Japan dc termination mode (SF5[3:2] (DCT) = 01b),         Billing tone detection is enabled by setting SF1[7]
the ISOmodem attenuates the transmit output by 1.7 dB        (BTE) = 1b. Billing tones less than 1.1 VPK on the line
to meet headroom requirements. Similarly, in Low             will be filtered out by the low pass digital filter on the
Voltage mode (DCT = 00b), the ISOmodem attenuates            Si2400. SF9[1] (ROV) is set when a line signal is
the transmit output by 4 dB. However, when DTMF              greater than 1.1 VPK, indicating a receive overload
dialing is desired in these modes, this attenuation must     condition. SF9[3] (BTD) is set when a line signal (billing
be removed. This is achieved by entering the FCC dc          tone) is large enough to excessively reduce the line-
termination mode and setting SF6[3] (FJM) = 1b or            derived power supply of the line-side device (Si3015).
SF6[0] (FLVM) = 1. When in the FCC dc termination            When the BTD bit is set, the dc termination is changed
modes, these bits will enable the respective lower loop      to an 800 Ω dc impedance. This ensures minimum line
current termination modes without the associated             voltage levels even in the presence of billing tones.
transmit attenuation. Increased distortion may be
                                                             The OVL bit should be polled following a billing tone
observed, which is acceptable during DTMF dialing.
                                                             detection. When the OVL bit returns to zero, indicating
After DTMF dialing is complete, the attenuation should
                                                             that the billing tone has passed, the BTE bit should be
be enabled by returning to either the Japan dc
                                                             written to zero to return the dc termination to its original
80                                                      Rev. 1.3


                                                                                                             Si2400
state. It will take approximately one second to return to
normal dc operating conditions. The BTD and ROV bits
are sticky, and they must be written to zero to be reset.                                 C1
After the BTE, ROV, and BTD bits are all cleared, the
BTE bit can be set to reenable billing tone detection.
                                                                                          C2
Certain line events, such as an off-hook event on a
parallel phone or a polarity reversal, may trigger the
ROV or the BTD bits, after which the billing tone detector
must be reset. The user should look for multiple events                                   L3
before qualifying whether billing tones are actually                    TIP
present.
Although the DAA will remain off-hook during a billing                                               L4
                                                                      FROM                                     To
tone event, the received data from the line will be
                                                                       LINE                                   DAA
corrupted (or a modem disconnect or retrain may occur)
                                                                                                    C3
in the presence of large billing tones. If the user wishes
to receive data through a billing tone, an external LC
filter must be added. A modem manufacturer can                        RING
provide this filter to users in the form of a dongle that
connects on the phone line before the DAA. This keeps                      Figure 18. Billing Tone Filter
the manufacturer from having to include a costly LC filter
                                                              ‘
internal to the modem when it may only be necessary to          Table 29. Component Values—Optional Billing
support a few countries/customers.                                                 Tone Filters
Alternatively, when a billing tone is detected, the host
software may notify the user that a billing tone has                  Symbol                       Value
occurred. This notification can be used to prompt the                  C1,C2           0.027 μF, 50 V, ±10%
user to contact the telephone company and have the
                                                                         C3            0.01 μF, 250 V, ±10%
billing tones disabled or to purchase an external LC filter.
                                                                         L3      3.3 mH, >120 mA, <10 Ω, ±10%
Billing Tone Filter (Optional)
                                                                         L4       10 mH, >40 mA, <10 Ω, ±10%
In order to operate without degradation during billing
tones in Germany, Switzerland, and South Africa, an
external LC notch filter is required. (The Si3015 can                                     C1
remain off-hook during a billing tone event, but modem                               0.027  F, 50 V
data will be lost [or a modem disconnect or retrain may
occur] in the presence of large billing tone signals.) The                                C2
                                                                                     0.027  F, 50 V
notch filter design requires two notches, one at 12 KHz
and one at 16 KHz. Because these components are
fairly expensive and few countries supply billing tone                                     L3
                                                                                    3.3 mH, 120 mA
support, this filter is typically placed in an external                TIP
dongle or added as a population option for these
countries. Figure 18 shows an example billing tone filter.
Figure 19 shows the billing tone filter and the ringer
impedance network for the Czech Republic. Both of                                                         L4
                                                                                               3.3 mH, 40 mA   To
these circuits may be combined into a single external                                                           Si3015
                                                                    From
dongle.                                                                                                         Chipset
                                                                     Line
L3 must carry the entire loop current. The series
                                                                                                        C3
resistance of the inductors is important to achieve a                                         0.01  F, 250 V
narrow and deep notch. This design has more than
25 dB of attenuation at both 12 KHz and 16 KHz.
                                                                   RING
                                                                    Figure 19. Dongle Applications Circuit
                                                         Rev. 1.3                                                       81


Si2400
The billing tone filter affects the ac termination and       The Si2400 receives the loopback tone and should be
return loss. The current complex ac termination will         programmed to drive the tone to AOUT. This approach
pass worldwide return loss specifications both with and      requires loop current consistent with the equivalent
without the billing tone filter by at least 3 dB. The ac     circuit shown in Figure 1.
termination is optimized for frequency response and          As an example, the following strings can be sent to the
hybrid cancellation, while having greater than 4 dB of       Si2400 to set up the 2225 Hz answer tone as the
margin with or without the dongle for South Africa,          stimulus waveform.
Australia, CTR21, German, and Swiss country-specific
                                                             1. ATE0SF1=18SF7=00SF0=01 to go off hook and to disable
specifications.                                                  transmit hybrid.
In-Circuit Testing                                           2. ATSE4=02M2SF4=03 to drive AOUT with the received
                                                                 loopback tone from the line.
The Si2400’s advanced design provides the system
                                                             3. ATSE8=00SE6=00SE5=0BSE8=01SE6=08SE5=FCSE8=0
manufacturer with increased ability to determine system
                                                                 0 to set the tone amplitude to –12 dBm.
functionality during production line test, as well as
support for end-user diagnostics.                            4. ATSE8=02SE5=04SE6=02 to begin the 2225 Hz answer
                                                                 tone.
The CLKOUT pin of the Si2400 can be used as an initial
indication that the Si2400 is functional. Upon power up      With the above strings a number of points can be
and the negation of the reset pin, the CLKOUT pin            probed to determine if the DAA is functioning properly.
oscillates at 9.8304 MHz, which is twice the input clock     Assuming a 30 mA loop current, the dc value of the TIP/
frequency of 4.9152 MHz. Testing the frequency of            RING voltage should be in the neighborhood of 7.5 V.
CLKOUT indicates that the Si2400 internal clock is           The actual voltage is dependent on the chosen dc
operational. To test communication with the Si2400           Termination. Refer to Figures 14, 15, and 16.
across the UART, the local echo may be used                  The amplitude of the 2225 Hz tone on AOUT should be
immediately after the part has been properly reset.          around 500 mV peak-to-peak, corresponding to
There are many methods to check to discover whether          amplitude consistent with a –12.9 dBm signal. The
the ISOCAP link between the Si2400 and Si3015 is             digital filters introduce the 0.9 dBm attenuation. The
operational. These tests do not require any loop current     transmitted tone is set to a –12 dBm level so that when
on the DAA. The first method is to check SF2[3] (FDT).       the hybrid is disabled, an internal dc offset is realized.
If it is set, the Si2400 and the Si3015 are                  The size of this dc offset is approximately half scale. To
communicating. Another method is to read SF8[7:4]            guarantee no clipping under all conditions, a –12 dBm
(LRV) to verify the Si3015 is properly sending its version   maximum is recommended. If a slightly distorted signal
number back to the Si2400. Finally, the voltage between      is acceptable on AOUT, a signal exceeding –12 dBm
the Si3015 VREG pin and the IGND pin may be                  may be implemented instead using the method shown
measured and must exceed 3.6 V.                              in step 3 above.
Once the clock, UART, and isolation link have been           In order to complete the production test, it may be
proven to function, the production test can proceed to       necessary to simulate a ring signal. A sine wave pulse
verify operation of the discrete components mounted on       of 500 ms with a 20 Hz frequency and an amplitude of
the board. In general, there are two approaches to           35 VRMS is sufficient for the Si2400 to return an “R”
production line test. The first approach is to execute       result code. Additional production tests may be
complete modem connections through a commercially            employed to check the DAA. For example, a 300 V dc
available telephone line simulator. This approach is         test between TIP and RING can be used to ensure that
simple to implement but incurs a relatively long per unit    the hookswitch transistors are operational and are not
test time. If per unit test time is an important             leaking any significant amount of current. Also, a HIPOT
consideration, another approach is to use the internal       (High Potential such as 1500 V) test applied
tone generator on the Si2400 to generate a tone at TIP/      longitudinally between TIP/RING and GND can be used
RING. The Si3015 can be programmed to disable the            to ensure that the isolation barrier is not bridged
hybrid (clearing SF1[2] [HBE]), thereby allowing the         inadvertently.
transmitted signal to be looped back through the receive
path.
82                                                      Rev. 1.3


                                                                      Si2400
Compliance Test Commands
The following are compliance test commands:
ATS07=4ODT;                 // go off hook
ATSE8=05\r                  // place DSP in mode 5 (for QAM and DPSK)
ATSE5=xx\r                  // see notes below for setting xx
Writes to the ATSE5 register has the following effect when in DSP
Mode 5
bit 0 : transmit_ena set to 1 turns the transmitter on.
bit 2 : QAM/nDPSK
           If 0, DPSK algorithm is chosen
           If 1, QAM algorithm is chosen
bit 3 : orig/nans selects between originate mode and answer mode.
           If 0, answer mode
           If 1, originate mode
bit 4 : When set, enables 550 Hz guard tone
bit 5 : When set, enables 1800 Hz guard tone
ATSE6=00                    // sending unscrambled zeros
ATSE6=FF                    // sending scarmbled ones
                                              Rev. 1.3                     83


Si2400
APPENDIX B—TYPICAL MODEM APPLICATIONS EXAMPLES
Introduction                                                    Si2400 may echo the following:
                                                                t – tone dial detected
Appendix B outlines the steps required to configure the         , – dialing complete
Si2400 for modem operation under typical examples.              r – ringback
                                                                b – busy tone
The ISOmodem has been designed to be both easy to
                                                                N – No carrier
use and flexible. The Si2400 has many features and
                                                                c – connect
modes, which add to the complexity of the device, but
                                                            6. Next byte after “c” is modem data!
are not required for a typical modem configuration. The
goal of this appendix is to help the user to quickly make   Example 4: Bell 103 in Australia with
a modem connection and begin evaluation of the              Parallel Phone Detect
Si2400 under various operational examples.
                                                            1. Power on reset
Example 1: V.22bis in FCC countries                         2. Set Host UART to 2400 bps with CTS flow control
1. Power on reset                                           3. ATS07=01 (set for FSK 300 bps)
2. Set Host UART to 2400 bps                                4. ATSF5=38 (set DAA for Australia)
3. ATS07=06 set for QAM 2400 bps                            5. ATSE2=C0 (enable ALERT pin)
4. ATDT18005551212<CR>                                      6. ATDT18005551212<CR>
   Si2400 may echo the following:                               Si2400 may echo the following:
   t – tone dial detected                                       t – tone dial detected
   , – dialing complete                                         , – dialing complete
   r – ringback                                                 r – ringback
   b – busy tone                                                b – busy tone
   N – No carrier                                               N – No carrier
   c – connect                                                  c – connect
   d – connect at 1200bps                                   7. Next byte after “c” is modem data!
5. Next byte after “c” or “d” is modem data!
                                                            Example 5: Bell 212A in South Korea with
Example 2: V.22 in CTR21 countries                          Japanese caller ID
1. Power on reset                                           1. Power on reset
2. Set Host UART to 2400 bps with CTS flow control          2. Set Host UART to 2400 bps with CTS flow control
3. ATS07=02 (set for DPSK 1200 bps)                         3. ATS07=00 (set for DPSK 1200 bps)
4. ATSF5=1C (set DAA for CTR21)                             4. ATSF5=06(set DAA for South Korea)
5. ATSF7=18 (set DAA for CTR21)                             5. ATS13=80 (set caller ID to Japanese format)
6. ATDT18005551212<CR>                                          When caller ID data is detected, Si2400 will echo “f”
   Si2400 may echo the following:                               indicating the line reversal, “m” indicating the mark, and
   t – tone dial detected                                       then caller ID data will follow.
   , – dialing complete                                     6. ATDT18005551212<CR>
   r – ringback                                                 -Si2400 may echo:
   b – busy tone                                                t – tone dial detected
   N – No carrier                                               , – dialing complete
   c – connect                                                  r – ringback
7. Next byte after “c” is modem data!                           b – busy tone
                                                                N – No carrier
Example 3: Bell 103 in Australia                                c – connect
1. Power on reset                                           7. Next byte after “c” is modem data!
2. Set Host UART to 2400 bps with CTS flow control
3. ATS07=01 (set for FSK 300 bps)
4. ATSF5=38 (set DAA for Australia)
5. ATDT18005551212<CR>
84                                                     Rev. 1.3


                                                                                                      Si2400
APPENDIX C—UL1950 3RD EDITION
Designs using the Si2400 pass all overcurrent and           on the protected side of the sidactor (RV1). For this
overvoltage tests for UL1950 3rd Edition compliance         design, the ferrite beads can be rated at 200 mA.
with a couple of considerations.                            In a cost-optimized design, it is important to remember
Figure 20 shows the designs that can pass the UL1950        that compliance to UL1950 does not always require
overvoltage tests, as well as electromagnetic emissions.    overvoltage tests. It is best to plan ahead and know
The top schematic of Figure 20 shows the configuration      which overvoltage tests will apply to your system.
in which the ferrite beads (FB1, FB2) are on the            System-level elements in the construction, such as fire
unprotected side of the sidactor (RV1). For this            enclosure and spacing requirements, need to be
configuration, the current rating of the ferrite beads      considered during the design stages. Consult with your
must be 6 A.                                                Professional Testing Agency during the design of the
The bottom schematic of Figure 20 shows the                 product to determine which tests apply to your system.
configuration in which the ferrite beads (FB1, FB2) are
                                C24
                                                                       75 Ω @ 100 MHz, 6A
                                                       1.25 A                     FB1
                                                                                                    TIP
                                                     Fuse/PTC
         RV1
                                                                       75 Ω @ 100 MHz, 6A
                                                                                  FB2
                                                                                                  RING
                                C25           Note: In this configuration, C24 and C25 are used for
                                              em issions testing.
          1000 Ω @ 100 MHz, 200 m A
                   C24
                                FB1                                      1.25 A
                                                                                                   TIP
                                                                       Fuse/PTC
                                                   RV1
          1000 Ω @ 100 MHz, 200 m A
                                FB2
                                                                                                  RING
                  C25
                       Figure 20. Circuits that Pass all UL1950 Overvoltage Tests
                                                      Rev. 1.3                                                   85


Si2400
9. Pin Descriptions: Si2400
                                    XTALI   1        16   GPIO1
                                   XTALO    2        15   GPIO2
                                 CLKOUT     3        14   GPIO3
                                      VD    4        13   ISOB
                                     RXD    5        12   GND
                                     TXD    6        11   C1A
                                     CTS    7        10   GPIO4
                                   RESET    8          9  AOUT
  Pin # Pin Name                                         Description
    1     XTALI   XTALI—Crystal Oscillator Pin.
                  These pins provide support for parallel resonant, AT cut crystals. XTALI also acts as
                  an input in the event that an external clock source is used in place of a crystal.
    2     XTALO   XTALO—Crystal Oscillator Pin.
                  Serves as the output of the crystal amplifier. A 4.9152 MHz crystal is required or a
                  4.9152 MHz clock on XTALI.
    3    CLKOUT   Clock Output.
                  This signal is typically used to clock an output system microcontroller. The frequency
                  is 78.6432 MHz/(N+1), where N is programmable from 0 to 31. N defaults to 7 on
                  power up. Setting N = 0 stops the clock.
    4       VD    Digital Supply Voltage.
                  Provides the digital supply voltage to the Si2400. Nominally either 5 V or 3.3 V.
    5      RXD    Receive Data.
                  Serial communication data from the Si2400.
    6      TXD    Transmit Data.
                  Serial communication data to the Si2400.
    7      CTS    Clear to Send.
                  Clear to send output used by the Si2400 to signal that the device is ready to receive
                  more digital data on the TXD pin.
    8    RESET    Reset Input.
                  An active low input that is used to reset all control registers to a defined, initialized
                  state. Also used to bring the Si2400 out of sleep mode.
    9     AOUT    Analog Speaker Output.
                  Provides an analog output signal for monitoring call progress tones or to output voice
                  data to a speaker.
86                                            Rev. 1.3


                                                                                           Si2400
Pin # Pin Name                                        Description
 10    GPIO4   General Purpose Input/Output 4.
               This pin can be either a GPIO pin (analog in, digital in, digital out) or the ALERT pin.
               Default is digital in. When programmed as ALERT, this pin provides five functions.
               While the modem is connected, it will normally be low, but will go high if the carrier is
               lost, a wake-on ring (using the “ATZ” command) event is detected, a loss of loop cur-
               rent event is detected, V.23 reversal is detected, or if an intrusion event has been
               detected. The ALERT pin is sticky, and will stay high until the host clears it by writing
               to the correct S register. (See register SE2[7:6].)
 11      C1A   Isolation Capacitor 1A.
               Connects to one side of the isolation capacitor C1.
 12     GND    Ground.
               Connects to the system digital ground.
 13     ISOB   Bias Voltage.
               This pin should be connected via the C3 capacitor.
 14    GPIO3   General Purpose Input/Output 3.
               This pin can be either a GPIO pin (analog in, digital in, digital out) or the ESC pin.
               Default is digital in. When programmed as ESC, a positive edge on this pin will cause
               the modem to go from online (connected) mode to the offline (command) mode.
 15    GPIO2   General Purpose Input/Output 2.
               This pin can be either a GPIO pin (analog in, digital in, digital out) or the TXD2 pin.
               Default is digital in. The user can program this pin to function as TXD2 if the second-
               ary serial interface is enabled. This pin is also used as the active low carrier detect pin
               (CD) if enabled via the CDE bit in (S0C.7).
 16    GPIO1   General Purpose Input Output 1.
               This pin can be either a GPIO pin (analog in, digital in, digital out) or the RXD2 pin.
               Default is digital. The user can program this pin to function as RXD2 if the secondary
               serial interface is enabled. This pin can also be programmed to function as the EOFR
               (end of frame receive) signal for HDLC framing.
                                           Rev. 1.3                                                      87


Si2400
10. Pin Descriptions: Si3015
                                    QE2    1         16  FILT2
                                    DCT    2         15  FILT
                                   IGND    3         14  RX
                                    C1B    4         13  REXT
                                   RNG1    5         12  REXT2
                                   RNG2    6         11  REF
                                     QB    7         10  VREG2
                                     QE    8          9  VREG
                             Table 30. 3015 Pin Descriptions
  Pin # Pin Name                                        Description
    1      QE2    Transistor Emitter 2.
                  Connects to the emitter of Q4.
    2      DCT    DC Termination.
                  Provides dc termination to the telephone network
    3     IGND    Isolated Ground.
                  Connects to ground on the line-side interface. Also connects to capacitor C2.
    4      C1B    Isolation Capacitor 1B.
                  Connects to one side of isolation capacitor C1.
    5     RNG1    Ring 1.
                  Connects through a capacitor to the TIP lead of the telephone line. Provides the ring
                  and caller ID signals to the Si2400.
    6     RNG2    Ring 2.
                  Connects through a capacitor to the RING lead of the telephone line. Provides the ring
                  and caller ID signals to the Si2400.
    7      QB     Transistor Base.
                  Connects to the base of transistor Q3.
    8      QE     Transistor Emitter.
                  Connects to the emitter of Q3.
    9     VREG    Voltage Regulator.
                  Connects to an external capacitor to provide bypassing for an internal power supply.
   10    VREG2    Voltage Regulator 2.
                  Connects to an external capacitor to provide bypassing for an internal power supply.
   11      REF    Reference.
                  Connects to an external resistor to provide a high accuracy reference current.
   12    REXT2    External Resistor 2.
                  Sets the complex ac termination impedance.
   13     REXT    External Resistor.
                  Sets the real ac termination impedance.
88                                           Rev. 1.3


                                                                            Si2400
                   Table 30. 3015 Pin Descriptions (Continued)
Pin # Pin Name                                          Description
 14      RX    Receive Input.
               Serves as the receive side input from the telephone network.
 15      FILT  Filter.
               Provides filtering for the dc termination circuits.
 16     FILT2  Filter 2.
               Provides filtering for the bias circuits.
                                           Rev. 1.3                              89


Si2400
11. Ordering Guide
        Chipset   Region  System-Side     Line-Side  Pb-Free Temp. Range
        Si2400     Global  Si2400-KS      Si3015-KS    No      0 to 70 °C
        Si2400     Global  Si2400-BS      Si3015-BS    No     –40 to 85 °C
        Si2400     Global  Si2400-FS     Si3015-F-FS   Yes     0 to 70 °C
90                                  Rev. 1.3


                                                                                                          Si2400
12. Package Outline: 16-Pin SOIC
Figure 21 illustrates the package details for the Si2400 and Si3015. Table 31 lists the values for the dimensions
shown in the illustration.
          16                   9
                                                                                    h
                                    E         H     bbb B
                                       -B-
                                                                 θ
           1                   8
                     B                                                    L
                         aaa C A B
                                                                        Detail F
               -A-
                       D
                                       -C-      A                                             C
                   e               A1
                                                                                    See Detail F
          Seating Plane              γ                                           Approximate device weight is 152 mg.
                     Figure 21. 16-pin Small Outline Integrated Circuit (SOIC) Package
                                  Table 31. Package Diagram Dimensions
                                                         Millimeters
                                           Symbol
                                                       Min          Max
                                              A        1.35        1.75
                                             A1         .10         .25
                                              B         .33         .51
                                              C         .19         .25
                                              D        9.80        10.00
                                              E        3.80        4.00
                                              e           1.27 BSC
                                              H        5.80        6.20
                                              h         .25         .50
                                              L        .40         1.27
                                              γ              0.10
                                              θ          0º          8º
                                             aaa             0.25
                                             bbb             0.25
                                                      Rev. 1.3                                                        91


Si2400
DOCUMENT CHANGE LIST
Revision 1.1 to Revision 1.2
  Table 3 on page 6, GPIO1–4 (VOL) changed to
   20 mA.
  Table 4 on page 6, GPIO1–4 (VOL) changed to
   15 mA.
  Table 5 on page 7, Caller ID Common Mode
   Tolerance added.
  Updated !7, !1 description of page 34.
  Added "Compliance Test Commands" on page 83.
  Register S33 (MDMO)., “Modem Override,” on page
   57, bit 0 (TSAL) definition corrected.
  Updated "11.Ordering Guide" on page 90.
  SOIC outline updated.
Revision 1.2 to Revision 1.3
  Updated "11.Ordering Guide" on page 90.
92                                              Rev. 1.3


                Si2400
NOTES:
       Rev. 1.3      93


Si2400
CONTACT INFORMATION
Silicon Laboratories Inc.
4635 Boston Lane
Austin, TX 78735
Tel: 1+(512) 416-8500
Fax: 1+(512) 416-9669
Toll Free: 1+(877) 444-3032
Email: ISOinfo@silabs.com
Internet: www.silabs.com
  The information in this document is believed to be accurate in all respects at the time of publication but is subject to change without notice.
  Silicon Laboratories assumes no responsibility for errors and omissions, and disclaims responsibility for any consequences resulting from
  the use of information included herein. Additionally, Silicon Laboratories assumes no responsibility for the functioning of undescribed features
  or parameters. Silicon Laboratories reserves the right to make changes without further notice. Silicon Laboratories makes no warranty, rep-
  resentation or guarantee regarding the suitability of its products for any particular purpose, nor does Silicon Laboratories assume any liability
  arising out of the application or use of any product or circuit, and specifically disclaims any and all liability, including without limitation conse-
  quential or incidental damages. Silicon Laboratories products are not designed, intended, or authorized for use in applications intended to
  support or sustain life, or for any other application in which the failure of the Silicon Laboratories product could create a situation where per-
  sonal injury or death may occur. Should Buyer purchase or use Silicon Laboratories products for any such unintended or unauthorized ap-
  plication, Buyer shall indemnify and hold Silicon Laboratories harmless against all claims and damages.
Silicon Laboratories, Silicon Labs, and ISOmodem are trademarks of Silicon Laboratories Inc.
Other products or brandnames mentioned herein are trademarks or registered trademarks of their respective holders
94                                                                      Rev. 1.3


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Silicon Laboratories:
 SI2400-BSR SI2400-KS SI2400-BS SI2400-KSR SI3015-KS SI3015-F-FS SI2400-FS
